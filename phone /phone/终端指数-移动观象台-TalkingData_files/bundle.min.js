/*! Tue Jun 18 2019 17:15:58 GMT+0800 (CST) */
!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={"exports":{},"id":i,"loaded":!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="{{ PUBLIC_PATH }}",t(0)}([function(e,t,n){"use strict";function i(){window.NTBaseInited||(window.NTBaseInited=!0,n(1),n(2),n(3),n(4),n(5),n(44),n(48),n(54),n(94),n(97),n(104),n(106),n(109),n(110),n(111),n(120),n(121))}i()},function(e,t){"use strict";function n(){function e(e){}window.getComputedStyle||(window.getComputedStyle=e)}n()},function(e,t,n){var i,r;!function(o,a){"use strict";i=a,r="function"==typeof i?i.call(t,n,t,e):i,!(void 0!==r&&(e.exports=r))}(this,function(){var e,t,n=Array,i=n.prototype,r=Object,o=r.prototype,a=Function,s=a.prototype,u=String,c=u.prototype,l=Number,f=l.prototype,d=i.slice,p=i.splice,h=i.push,g=i.unshift,m=i.concat,v=i.join,y=s.call,b=s.apply,T=Math.max,w=Math.min,S=o.toString,M="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,E=Function.prototype.toString,C=/^\s*class /,_=function(e){try{var t=E.call(e),n=t.replace(/\/\/.*\n/g,""),i=n.replace(/\/\*[.\s\S]*\*\//g,""),r=i.replace(/\n/gm," ").replace(/ {2}/g," ");return C.test(r)}catch(o){return!1}},x=function(e){try{return!_(e)&&(E.call(e),!0)}catch(t){return!1}},I="[object Function]",N="[object GeneratorFunction]",e=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(M)return x(e);if(_(e))return!1;var t=S.call(e);return t===I||t===N},O=RegExp.prototype.exec,A=function(e){try{return O.call(e),!0}catch(t){return!1}},R="[object RegExp]";t=function(e){return"object"==typeof e&&(M?A(e):S.call(e)===R)};var D,L=String.prototype.valueOf,k=function(e){try{return L.call(e),!0}catch(t){return!1}},U="[object String]";D=function(e){return"string"==typeof e||"object"==typeof e&&(M?k(e):S.call(e)===U)};var P=r.defineProperty&&function(){try{var e={};r.defineProperty(e,"x",{"enumerable":!1,"value":e});for(var t in e)return!1;return e.x===e}catch(n){return!1}}(),F=function(e){var t;return t=P?function(e,t,n,i){!i&&t in e||r.defineProperty(e,t,{"configurable":!0,"enumerable":!1,"writable":!0,"value":n})}:function(e,t,n,i){!i&&t in e||(e[t]=n)},function(n,i,r){for(var o in i)e.call(i,o)&&t(n,o,i[o],r)}}(o.hasOwnProperty),j=function(e){var t=typeof e;return null===e||"object"!==t&&"function"!==t},G=l.isNaN||function(e){return e!==e},V={"ToInteger":function(e){var t=+e;return G(t)?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t},"ToPrimitive":function(t){var n,i,r;if(j(t))return t;if(i=t.valueOf,e(i)&&(n=i.call(t),j(n)))return n;if(r=t.toString,e(r)&&(n=r.call(t),j(n)))return n;throw new TypeError},"ToObject":function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return r(e)},"ToUint32":function(e){return e>>>0}},B=function(){};F(s,{"bind":function(t){var n=this;if(!e(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var i,o=d.call(arguments,1),s=function(){if(this instanceof i){var e=b.call(n,this,m.call(o,d.call(arguments)));return r(e)===e?e:this}return b.call(n,t,m.call(o,d.call(arguments)))},u=T(0,n.length-o.length),c=[],l=0;l<u;l++)h.call(c,"$"+l);return i=a("binder","return function ("+v.call(c,",")+"){ return binder.apply(this, arguments); }")(s),n.prototype&&(B.prototype=n.prototype,i.prototype=new B,B.prototype=null),i}});var H=y.bind(o.hasOwnProperty),q=y.bind(o.toString),z=y.bind(d),K=b.bind(d);if("object"==typeof document&&document&&document.documentElement)try{z(document.documentElement.childNodes)}catch(Y){var W=z,$=K;z=function(e){for(var t=[],n=e.length;n-- >0;)t[n]=e[n];return $(t,W(arguments,1))},K=function(e,t){return $(z(e),t)}}var Q=y.bind(c.slice),J=y.bind(c.split),X=y.bind(c.indexOf),Z=y.bind(h),ee=y.bind(o.propertyIsEnumerable),te=y.bind(i.sort),ne=n.isArray||function(e){return"[object Array]"===q(e)},ie=1!==[].unshift(0);F(i,{"unshift":function(){return g.apply(this,arguments),this.length}},ie),F(n,{"isArray":ne});var re=r("a"),oe="a"!==re[0]||!(0 in re),ae=function(e){var t=!0,n=!0,i=!1;if(e)try{e.call("foo",function(e,n,i){"object"!=typeof i&&(t=!1)}),e.call([1],function(){"use strict";n="string"==typeof this},"x")}catch(r){i=!0}return!!e&&!i&&t&&n};F(i,{"forEach":function(t){var n,i=V.ToObject(this),r=oe&&D(this)?J(this,""):i,o=-1,a=V.ToUint32(r.length);if(arguments.length>1&&(n=arguments[1]),!e(t))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++o<a;)o in r&&("undefined"==typeof n?t(r[o],o,i):t.call(n,r[o],o,i))}},!ae(i.forEach)),F(i,{"map":function(t){var i,r=V.ToObject(this),o=oe&&D(this)?J(this,""):r,a=V.ToUint32(o.length),s=n(a);if(arguments.length>1&&(i=arguments[1]),!e(t))throw new TypeError("Array.prototype.map callback must be a function");for(var u=0;u<a;u++)u in o&&("undefined"==typeof i?s[u]=t(o[u],u,r):s[u]=t.call(i,o[u],u,r));return s}},!ae(i.map)),F(i,{"filter":function(t){var n,i,r=V.ToObject(this),o=oe&&D(this)?J(this,""):r,a=V.ToUint32(o.length),s=[];if(arguments.length>1&&(i=arguments[1]),!e(t))throw new TypeError("Array.prototype.filter callback must be a function");for(var u=0;u<a;u++)u in o&&(n=o[u],("undefined"==typeof i?t(n,u,r):t.call(i,n,u,r))&&Z(s,n));return s}},!ae(i.filter)),F(i,{"every":function(t){var n,i=V.ToObject(this),r=oe&&D(this)?J(this,""):i,o=V.ToUint32(r.length);if(arguments.length>1&&(n=arguments[1]),!e(t))throw new TypeError("Array.prototype.every callback must be a function");for(var a=0;a<o;a++)if(a in r&&!("undefined"==typeof n?t(r[a],a,i):t.call(n,r[a],a,i)))return!1;return!0}},!ae(i.every)),F(i,{"some":function(t){var n,i=V.ToObject(this),r=oe&&D(this)?J(this,""):i,o=V.ToUint32(r.length);if(arguments.length>1&&(n=arguments[1]),!e(t))throw new TypeError("Array.prototype.some callback must be a function");for(var a=0;a<o;a++)if(a in r&&("undefined"==typeof n?t(r[a],a,i):t.call(n,r[a],a,i)))return!0;return!1}},!ae(i.some));var se=!1;i.reduce&&(se="object"==typeof i.reduce.call("es5",function(e,t,n,i){return i})),F(i,{"reduce":function(t){var n=V.ToObject(this),i=oe&&D(this)?J(this,""):n,r=V.ToUint32(i.length);if(!e(t))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===r&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,a=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(a in i){o=i[a++];break}if(++a>=r)throw new TypeError("reduce of empty array with no initial value")}for(;a<r;a++)a in i&&(o=t(o,i[a],a,n));return o}},!se);var ue=!1;i.reduceRight&&(ue="object"==typeof i.reduceRight.call("es5",function(e,t,n,i){return i})),F(i,{"reduceRight":function(t){var n=V.ToObject(this),i=oe&&D(this)?J(this,""):n,r=V.ToUint32(i.length);if(!e(t))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===r&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var o,a=r-1;if(arguments.length>=2)o=arguments[1];else for(;;){if(a in i){o=i[a--];break}if(--a<0)throw new TypeError("reduceRight of empty array with no initial value")}if(a<0)return o;do a in i&&(o=t(o,i[a],a,n));while(a--);return o}},!ue);var ce=i.indexOf&&[0,1].indexOf(1,2)!==-1;F(i,{"indexOf":function(e){var t=oe&&D(this)?J(this,""):V.ToObject(this),n=V.ToUint32(t.length);if(0===n)return-1;var i=0;for(arguments.length>1&&(i=V.ToInteger(arguments[1])),i=i>=0?i:T(0,n+i);i<n;i++)if(i in t&&t[i]===e)return i;return-1}},ce);var le=i.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;F(i,{"lastIndexOf":function(e){var t=oe&&D(this)?J(this,""):V.ToObject(this),n=V.ToUint32(t.length);if(0===n)return-1;var i=n-1;for(arguments.length>1&&(i=w(i,V.ToInteger(arguments[1]))),i=i>=0?i:n-Math.abs(i);i>=0;i--)if(i in t&&e===t[i])return i;return-1}},le);var fe=function(){var e=[1,2],t=e.splice();return 2===e.length&&ne(t)&&0===t.length}();F(i,{"splice":function(e,t){return 0===arguments.length?[]:p.apply(this,arguments)}},!fe);var de=function(){var e={};return i.splice.call(e,0,0,1),1===e.length}();F(i,{"splice":function(e,t){if(0===arguments.length)return[];var n=arguments;return this.length=T(V.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof t&&(n=z(arguments),n.length<2?Z(n,this.length-e):n[1]=V.ToInteger(t)),p.apply(this,n)}},!de);var pe=function(){var e=new n(1e5);return e[8]="x",e.splice(1,1),7===e.indexOf("x")}(),he=function(){var e=256,t=[];return t[e]="a",t.splice(e+1,0,"b"),"a"===t[e]}();F(i,{"splice":function(e,t){for(var n,i=V.ToObject(this),r=[],o=V.ToUint32(i.length),a=V.ToInteger(e),s=a<0?T(o+a,0):w(a,o),c=w(T(V.ToInteger(t),0),o-s),l=0;l<c;)n=u(s+l),H(i,n)&&(r[l]=i[n]),l+=1;var f,d=z(arguments,2),p=d.length;if(p<c){l=s;for(var h=o-c;l<h;)n=u(l+c),f=u(l+p),H(i,n)?i[f]=i[n]:delete i[f],l+=1;l=o;for(var g=o-c+p;l>g;)delete i[l-1],l-=1}else if(p>c)for(l=o-c;l>s;)n=u(l+c-1),f=u(l+p-1),H(i,n)?i[f]=i[n]:delete i[f],l-=1;l=s;for(var m=0;m<d.length;++m)i[l]=d[m],l+=1;return i.length=o-c+p,r}},!pe||!he);var ge,me=i.join;try{ge="1,2,3"!==Array.prototype.join.call("123",",")}catch(Y){ge=!0}ge&&F(i,{"join":function(e){var t="undefined"==typeof e?",":e;return me.call(D(this)?J(this,""):this,t)}},ge);var ve="1,2"!==[1,2].join(void 0);ve&&F(i,{"join":function(e){var t="undefined"==typeof e?",":e;return me.call(this,t)}},ve);var ye=function(e){for(var t=V.ToObject(this),n=V.ToUint32(t.length),i=0;i<arguments.length;)t[n+i]=arguments[i],i+=1;return t.length=n+i,n+i},be=function(){var e={},t=Array.prototype.push.call(e,void 0);return 1!==t||1!==e.length||"undefined"!=typeof e[0]||!H(e,0)}();F(i,{"push":function(e){return ne(this)?h.apply(this,arguments):ye.apply(this,arguments)}},be);var Te=function(){var e=[],t=e.push(void 0);return 1!==t||1!==e.length||"undefined"!=typeof e[0]||!H(e,0)}();F(i,{"push":ye},Te),F(i,{"slice":function(e,t){var n=D(this)?J(this,""):this;return K(n,arguments)}},oe);var we=function(){try{[1,2].sort(null)}catch(e){try{[1,2].sort({})}catch(t){return!1}}return!0}(),Se=function(){try{return[1,2].sort(/a/),!1}catch(e){}return!0}(),Me=function(){try{return[1,2].sort(void 0),!0}catch(e){}return!1}();F(i,{"sort":function(t){if("undefined"==typeof t)return te(this);if(!e(t))throw new TypeError("Array.prototype.sort callback must be a function");return te(this,t)}},we||!Me||!Se);var Ee=!ee({"toString":null},"toString"),Ce=ee(function(){},"prototype"),_e=!H("x","0"),xe=function(e){var t=e.constructor;return t&&t.prototype===e},Ie={"$applicationCache":!0,"$console":!0,"$external":!0,"$frame":!0,"$frameElement":!0,"$frames":!0,"$innerHeight":!0,"$innerWidth":!0,"$onmozfullscreenchange":!0,"$onmozfullscreenerror":!0,"$outerHeight":!0,"$outerWidth":!0,"$pageXOffset":!0,"$pageYOffset":!0,"$parent":!0,"$scrollLeft":!0,"$scrollTop":!0,"$scrollX":!0,"$scrollY":!0,"$self":!0,"$webkitIndexedDB":!0,"$webkitStorageInfo":!0,"$window":!0,"$width":!0,"$height":!0,"$top":!0,"$localStorage":!0},Ne=function(){if("undefined"==typeof window)return!1;for(var e in window)try{!Ie["$"+e]&&H(window,e)&&null!==window[e]&&"object"==typeof window[e]&&xe(window[e])}catch(t){return!0}return!1}(),Oe=function(e){if("undefined"==typeof window||!Ne)return xe(e);try{return xe(e)}catch(t){return!1}},Ae=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Re=Ae.length,De=function(e){return"[object Arguments]"===q(e)},Le=function(t){return null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&!ne(t)&&e(t.callee)},ke=De(arguments)?De:Le;F(r,{"keys":function(t){var n=e(t),i=ke(t),r=null!==t&&"object"==typeof t,o=r&&D(t);if(!r&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var a=[],s=Ce&&n;if(o&&_e||i)for(var c=0;c<t.length;++c)Z(a,u(c));if(!i)for(var l in t)s&&"prototype"===l||!H(t,l)||Z(a,u(l));if(Ee)for(var f=Oe(t),d=0;d<Re;d++){var p=Ae[d];f&&"constructor"===p||!H(t,p)||Z(a,p)}return a}});var Ue=r.keys&&function(){return 2===r.keys(arguments).length}(1,2),Pe=r.keys&&function(){var e=r.keys(arguments);return 1!==arguments.length||1!==e.length||1!==e[0]}(1),Fe=r.keys;F(r,{"keys":function(e){return Fe(ke(e)?z(e):e)}},!Ue||Pe);var je,Ge,Ve=0!==new Date(-0xc782b5b342b24).getUTCMonth(),Be=new Date(-0x55d318d56a724),He=new Date(14496624e5),qe="Mon, 01 Jan -45875 11:59:59 GMT"!==Be.toUTCString(),ze=Be.getTimezoneOffset();ze<-720?(je="Tue Jan 02 -45875"!==Be.toDateString(),Ge=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(He))):(je="Mon Jan 01 -45875"!==Be.toDateString(),Ge=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(He)));var Ke=y.bind(Date.prototype.getFullYear),Ye=y.bind(Date.prototype.getMonth),We=y.bind(Date.prototype.getDate),$e=y.bind(Date.prototype.getUTCFullYear),Qe=y.bind(Date.prototype.getUTCMonth),Je=y.bind(Date.prototype.getUTCDate),Xe=y.bind(Date.prototype.getUTCDay),Ze=y.bind(Date.prototype.getUTCHours),et=y.bind(Date.prototype.getUTCMinutes),tt=y.bind(Date.prototype.getUTCSeconds),nt=y.bind(Date.prototype.getUTCMilliseconds),it=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],rt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ot=function(e,t){return We(new Date(t,e,0))};F(Date.prototype,{"getFullYear":function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ke(this);return e<0&&Ye(this)>11?e+1:e},"getMonth":function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ke(this),t=Ye(this);return e<0&&t>11?0:t},"getDate":function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ke(this),t=Ye(this),n=We(this);if(e<0&&t>11){if(12===t)return n;var i=ot(0,e+1);return i-n+1}return n},"getUTCFullYear":function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=$e(this);return e<0&&Qe(this)>11?e+1:e},"getUTCMonth":function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=$e(this),t=Qe(this);return e<0&&t>11?0:t},"getUTCDate":function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=$e(this),t=Qe(this),n=Je(this);if(e<0&&t>11){if(12===t)return n;var i=ot(0,e+1);return i-n+1}return n}},Ve),F(Date.prototype,{"toUTCString":function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Xe(this),t=Je(this),n=Qe(this),i=$e(this),r=Ze(this),o=et(this),a=tt(this);return it[e]+", "+(t<10?"0"+t:t)+" "+rt[n]+" "+i+" "+(r<10?"0"+r:r)+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)+" GMT"}},Ve||qe),F(Date.prototype,{"toDateString":function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),n=this.getMonth(),i=this.getFullYear();return it[e]+" "+rt[n]+" "+(t<10?"0"+t:t)+" "+i}},Ve||je),(Ve||Ge)&&(Date.prototype.toString=function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),n=this.getMonth(),i=this.getFullYear(),r=this.getHours(),o=this.getMinutes(),a=this.getSeconds(),s=this.getTimezoneOffset(),u=Math.floor(Math.abs(s)/60),c=Math.floor(Math.abs(s)%60);return it[e]+" "+rt[n]+" "+(t<10?"0"+t:t)+" "+i+" "+(r<10?"0"+r:r)+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)+" GMT"+(s>0?"-":"+")+(u<10?"0"+u:u)+(c<10?"0"+c:c)},P&&r.defineProperty(Date.prototype,"toString",{"configurable":!0,"enumerable":!1,"writable":!0}));var at=-621987552e5,st="-000001",ut=Date.prototype.toISOString&&new Date(at).toISOString().indexOf(st)===-1,ct=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString(),lt=y.bind(Date.prototype.getTime);F(Date.prototype,{"toISOString":function(){if(!isFinite(this)||!isFinite(lt(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var e=$e(this),t=Qe(this);e+=Math.floor(t/12),t=(t%12+12)%12;var n=[t+1,Je(this),Ze(this),et(this),tt(this)];e=(e<0?"-":e>9999?"+":"")+Q("00000"+Math.abs(e),0<=e&&e<=9999?-4:-6);for(var i=0;i<n.length;++i)n[i]=Q("00"+n[i],-2);return e+"-"+z(n,0,2).join("-")+"T"+z(n,2).join(":")+"."+Q("000"+nt(this),-3)+"Z"}},ut||ct);var ft=function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&new Date(at).toJSON().indexOf(st)!==-1&&Date.prototype.toJSON.call({"toISOString":function(){return!0}})}catch(e){return!1}}();ft||(Date.prototype.toJSON=function(t){var n=r(this),i=V.ToPrimitive(n);if("number"==typeof i&&!isFinite(i))return null;var o=n.toISOString;if(!e(o))throw new TypeError("toISOString property is not callable");return o.call(n)});var dt=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),pt=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z")),ht=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(ht||pt||!dt){var gt=Math.pow(2,31)-1,mt=G(new Date(1970,0,1,0,0,0,gt+1).getTime());Date=function(e){var t=function(n,i,r,o,a,s,c){var l,f=arguments.length;if(this instanceof e){var d=s,p=c;if(mt&&f>=7&&c>gt){var h=Math.floor(c/gt)*gt,g=Math.floor(h/1e3);d+=g,p-=1e3*g}l=1===f&&u(n)===n?new e(t.parse(n)):f>=7?new e(n,i,r,o,a,d,p):f>=6?new e(n,i,r,o,a,d):f>=5?new e(n,i,r,o,a):f>=4?new e(n,i,r,o):f>=3?new e(n,i,r):f>=2?new e(n,i):f>=1?new e(n instanceof e?+n:n):new e}else l=e.apply(this,arguments);return j(l)||F(l,{"constructor":t},!0),l},n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),i=[0,31,59,90,120,151,181,212,243,273,304,334,365],r=function(e,t){var n=t>1?1:0;return i[t]+Math.floor((e-1969+n)/4)-Math.floor((e-1901+n)/100)+Math.floor((e-1601+n)/400)+365*(e-1970)},o=function(t){var n=0,i=t;if(mt&&i>gt){var r=Math.floor(i/gt)*gt,o=Math.floor(r/1e3);n+=o,i-=1e3*o}return l(new e(1970,0,1,0,0,n,i))};for(var a in e)H(e,a)&&(t[a]=e[a]);F(t,{"now":e.now,"UTC":e.UTC},!0),t.prototype=e.prototype,F(t.prototype,{"constructor":t},!0);var s=function(t){var i=n.exec(t);if(i){var a,s=l(i[1]),u=l(i[2]||1)-1,c=l(i[3]||1)-1,f=l(i[4]||0),d=l(i[5]||0),p=l(i[6]||0),h=Math.floor(1e3*l(i[7]||0)),g=Boolean(i[4]&&!i[8]),m="-"===i[9]?1:-1,v=l(i[10]||0),y=l(i[11]||0),b=d>0||p>0||h>0;return f<(b?24:25)&&d<60&&p<60&&h<1e3&&u>-1&&u<12&&v<24&&y<60&&c>-1&&c<r(s,u+1)-r(s,u)&&(a=60*(24*(r(s,u)+c)+f+v*m),a=1e3*(60*(a+d+y*m)+p)+h,g&&(a=o(a)),-864e13<=a&&a<=864e13)?a:NaN}return e.parse.apply(this,arguments)};return F(t,{"parse":s}),t}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var vt=f.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),yt={"base":1e7,"size":6,"data":[0,0,0,0,0,0],"multiply":function(e,t){for(var n=-1,i=t;++n<yt.size;)i+=e*yt.data[n],yt.data[n]=i%yt.base,i=Math.floor(i/yt.base)},"divide":function(e){for(var t=yt.size,n=0;--t>=0;)n+=yt.data[t],yt.data[t]=Math.floor(n/e),n=n%e*yt.base},"numToString":function(){for(var e=yt.size,t="";--e>=0;)if(""!==t||0===e||0!==yt.data[e]){var n=u(yt.data[e]);""===t?t=n:t+=Q("0000000",0,7-n.length)+n}return t},"pow":function Ft(e,t,n){return 0===t?n:t%2===1?Ft(e,t-1,n*e):Ft(e*e,t/2,n)},"log":function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}},bt=function(e){var t,n,i,r,o,a,s,c;if(t=l(e),t=G(t)?0:Math.floor(t),t<0||t>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(n=l(this),G(n))return"NaN";if(n<=-1e21||n>=1e21)return u(n);if(i="",n<0&&(i="-",n=-n),r="0",n>1e-21)if(o=yt.log(n*yt.pow(2,69,1))-69,a=o<0?n*yt.pow(2,-o,1):n/yt.pow(2,o,1),a*=4503599627370496,o=52-o,o>0){for(yt.multiply(0,a),s=t;s>=7;)yt.multiply(1e7,0),s-=7;for(yt.multiply(yt.pow(10,s,1),0),s=o-1;s>=23;)yt.divide(1<<23),s-=23;yt.divide(1<<s),yt.multiply(1,1),yt.divide(2),r=yt.numToString()}else yt.multiply(0,a),yt.multiply(1<<-o,0),r=yt.numToString()+Q("0.00000000000000000000",2,2+t);return t>0?(c=r.length,r=c<=t?i+Q("0.0000000000000000000",0,t-c+2)+r:i+Q(r,0,c-t)+"."+Q(r,c-t)):r=i+r,r};F(f,{"toFixed":bt},vt);var Tt=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),wt=f.toPrecision;F(f,{"toPrecision":function(e){return"undefined"==typeof e?wt.call(this):wt.call(this,e)}},Tt),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var e="undefined"==typeof/()??/.exec("")[1],n=Math.pow(2,32)-1;c.split=function(i,r){var o=String(this);if("undefined"==typeof i&&0===r)return[];if(!t(i))return J(this,i,r);var a,s,u,c,l=[],f=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(i.sticky?"y":""),d=0,p=new RegExp(i.source,f+"g");e||(a=new RegExp("^"+p.source+"$(?!\\s)",f));var g="undefined"==typeof r?n:V.ToUint32(r);for(s=p.exec(o);s&&(u=s.index+s[0].length,!(u>d&&(Z(l,Q(o,d,s.index)),!e&&s.length>1&&s[0].replace(a,function(){for(var e=1;e<arguments.length-2;e++)"undefined"==typeof arguments[e]&&(s[e]=void 0)}),s.length>1&&s.index<o.length&&h.apply(l,z(s,1)),c=s[0].length,d=u,l.length>=g)));)p.lastIndex===s.index&&p.lastIndex++,s=p.exec(o);return d===o.length?!c&&p.test("")||Z(l,""):Z(l,Q(o,d)),l.length>g?z(l,0,g):l}}():"0".split(void 0,0).length&&(c.split=function(e,t){return"undefined"==typeof e&&0===t?[]:J(this,e,t)});var St=c.replace,Mt=function(){var e=[];return"x".replace(/x(.)?/g,function(t,n){Z(e,n)}),1===e.length&&"undefined"==typeof e[0]}();Mt||(c.replace=function(n,i){var r=e(i),o=t(n)&&/\)[*?]/.test(n.source);if(r&&o){var a=function(e){var t=arguments.length,r=n.lastIndex;n.lastIndex=0;var o=n.exec(e)||[];return n.lastIndex=r,Z(o,arguments[t-2],arguments[t-1]),i.apply(this,o)};return St.call(this,n,a)}return St.call(this,n,i)});var Et=c.substr,Ct="".substr&&"b"!=="0b".substr(-1);F(c,{"substr":function(e,t){var n=e;return e<0&&(n=T(this.length+e,0)),Et.call(this,n,t)}},Ct);var _t="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",xt="​",It="["+_t+"]",Nt=new RegExp("^"+It+It+"*"),Ot=new RegExp(It+It+"*$"),At=c.trim&&(_t.trim()||!xt.trim());F(c,{"trim":function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");return u(this).replace(Nt,"").replace(Ot,"")}},At);var Rt=y.bind(String.prototype.trim),Dt=c.lastIndexOf&&"abcあい".lastIndexOf("あい",2)!==-1;F(c,{"lastIndexOf":function(e){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");for(var t=u(this),n=u(e),i=arguments.length>1?l(arguments[1]):NaN,r=G(i)?1/0:V.ToInteger(i),o=w(T(r,0),t.length),a=n.length,s=o+a;s>0;){s=T(0,s-a);var c=X(Q(t,s,o+a),n);if(c!==-1)return s+c}return-1}},Dt);var Lt=c.lastIndexOf;if(F(c,{"lastIndexOf":function(e){return Lt.apply(this,arguments)}},1!==c.lastIndexOf.length),8===parseInt(_t+"08")&&22===parseInt(_t+"0x16")||(parseInt=function(e){var t=/^[-+]?0[xX]/;return function(n,i){var r=Rt(String(n)),o=l(i)||(t.test(r)?16:10);return e(r,o)}}(parseInt)),1/parseFloat("-0")!==-(1/0)&&(parseFloat=function(e){return function(t){var n=Rt(String(t)),i=e(n);return 0===i&&"-"===Q(n,0,1)?-0:i}}(parseFloat)),"RangeError: test"!==String(new RangeError("test"))){var kt=function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");var e=this.name;"undefined"==typeof e?e="Error":"string"!=typeof e&&(e=u(e));var t=this.message;return"undefined"==typeof t?t="":"string"!=typeof t&&(t=u(t)),e?t?e+": "+t:e:t};Error.prototype.toString=kt}if(P){var Ut=function(e,t){if(ee(e,t)){var n=Object.getOwnPropertyDescriptor(e,t);n.configurable&&(n.enumerable=!1,Object.defineProperty(e,t,n))}};Ut(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),Ut(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){var Pt=function(){var e="/"+this.source+"/";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),e};RegExp.prototype.toString=Pt}})},function(e,t,n){var i,r;!function(o,a){"use strict";i=a,r="function"==typeof i?i.call(t,n,t,e):i,!(void 0!==r&&(e.exports=r))}(this,function(){var e,t,n,i,r=Function.call,o=Object.prototype,a=r.bind(o.hasOwnProperty),s=r.bind(o.propertyIsEnumerable),u=r.bind(o.toString),c=a(o,"__defineGetter__");c&&(e=r.bind(o.__defineGetter__),t=r.bind(o.__defineSetter__),n=r.bind(o.__lookupGetter__),i=r.bind(o.__lookupSetter__));var l=function(e){return null==e||"object"!=typeof e&&"function"!=typeof e};Object.getPrototypeOf||(Object.getPrototypeOf=function(e){var t=e.__proto__;return t||null===t?t:"[object Function]"===u(e.constructor)?e.constructor.prototype:e instanceof Object?o:null});var f=function(e){try{return e.sentinel=0,0===Object.getOwnPropertyDescriptor(e,"sentinel").value}catch(t){return!1}};if(Object.defineProperty){var d=f({}),p="undefined"==typeof document||f(document.createElement("div"));if(!p||!d)var h=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||h){var g="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(e,t){if(l(e))throw new TypeError(g+e);if(h)try{return h.call(Object,e,t)}catch(r){}var u;if(!a(e,t))return u;if(u={"enumerable":s(e,t),"configurable":!0},c){var f=e.__proto__,d=e!==o;d&&(e.__proto__=o);var p=n(e,t),m=i(e,t);if(d&&(e.__proto__=f),p||m)return p&&(u.get=p),m&&(u.set=m),u}return u.value=e[t],u.writable=!0,u}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){return Object.keys(e)}),!Object.create){var m,v=!({"__proto__":null}instanceof Object),y=function(){if(!document.domain)return!1;try{return!!new ActiveXObject("htmlfile")}catch(e){return!1}},b=function(){var e,t;t=new ActiveXObject("htmlfile");var n="script";return t.write("<"+n+"></"+n+">"),t.close(),e=t.parentWindow.Object.prototype,t=null,e},T=function(){var e,t=document.createElement("iframe"),n=document.body||document.documentElement;return t.style.display="none",n.appendChild(t),t.src="javascript:",e=t.contentWindow.Object.prototype,n.removeChild(t),t=null,e};m=v||"undefined"==typeof document?function(){return{"__proto__":null}}:function(){var e=y()?b():T();delete e.constructor,delete e.hasOwnProperty,delete e.propertyIsEnumerable,delete e.isPrototypeOf,delete e.toLocaleString,delete e.toString,delete e.valueOf;var t=function(){};return t.prototype=e,m=function(){return new t},new t},Object.create=function(e,t){var n,i=function(){};if(null===e)n=m();else{if(null!==e&&l(e))throw new TypeError("Object prototype may only be an Object or null");i.prototype=e,n=new i,n.__proto__=e}return void 0!==t&&Object.defineProperties(n,t),n}}var w=function(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){return!1}};if(Object.defineProperty){var S=w({}),M="undefined"==typeof document||w(document.createElement("div"));if(!S||!M)var E=Object.defineProperty,C=Object.defineProperties}if(!Object.defineProperty||E){var _="Property description must be an object: ",x="Object.defineProperty called on non-object: ",I="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(r,a,s){if(l(r))throw new TypeError(x+r);if(l(s))throw new TypeError(_+s);if(E)try{return E.call(Object,r,a,s)}catch(u){}if("value"in s)if(c&&(n(r,a)||i(r,a))){var f=r.__proto__;r.__proto__=o,delete r[a],r[a]=s.value,r.__proto__=f}else r[a]=s.value;else{var d="get"in s,p="set"in s;if(!c&&(d||p))throw new TypeError(I);d&&e(r,a,s.get),p&&t(r,a,s.set)}return r}}Object.defineProperties&&!C||(Object.defineProperties=function(e,t){if(C)try{return C.call(Object,e,t)}catch(n){}return Object.keys(t).forEach(function(n){"__proto__"!==n&&Object.defineProperty(e,n,t[n])}),e}),Object.seal||(Object.seal=function(e){if(Object(e)!==e)throw new TypeError("Object.seal can only be called on Objects.");return e}),Object.freeze||(Object.freeze=function(e){if(Object(e)!==e)throw new TypeError("Object.freeze can only be called on Objects.");return e});try{Object.freeze(function(){})}catch(N){Object.freeze=function(e){return function(t){return"function"==typeof t?t:e(t)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(e){if(Object(e)!==e)throw new TypeError("Object.preventExtensions can only be called on Objects.");return e}),Object.isSealed||(Object.isSealed=function(e){if(Object(e)!==e)throw new TypeError("Object.isSealed can only be called on Objects.");return!1}),Object.isFrozen||(Object.isFrozen=function(e){if(Object(e)!==e)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1}),Object.isExtensible||(Object.isExtensible=function(e){if(Object(e)!==e)throw new TypeError("Object.isExtensible can only be called on Objects.");for(var t="";a(e,t);)t+="?";e[t]=!0;var n=a(e,t);return delete e[t],n})})},function(e,t){!function(e){"use strict";e.console||(e.console={});for(var t,n,i=e.console,r=function(){},o=["memory"],a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=o.pop();)i[t]||(i[t]={});for(;n=a.pop();)"function"!=typeof i[n]&&(i[n]=r)}("undefined"==typeof window?this:window)},function(e,t,n){n(6),e.exports=n(9).Object.assign},function(e,t,n){var i=n(7);i(i.S+i.F,"Object",{"assign":n(28)})},function(e,t,n){var i=n(8),r=n(9),o=n(10),a=n(20),s=n(26),u="prototype",c=function(e,t,n){var l,f,d,p,h=e&c.F,g=e&c.G,m=e&c.S,v=e&c.P,y=e&c.B,b=g?i:m?i[t]||(i[t]={}):(i[t]||{})[u],T=g?r:r[t]||(r[t]={}),w=T[u]||(T[u]={});g&&(n=t);for(l in n)f=!h&&b&&void 0!==b[l],d=(f?b:n)[l],p=y&&f?s(d,i):v&&"function"==typeof d?s(Function.call,d):d,b&&a(b,l,d,e&c.U),T[l]!=d&&o(T,l,p),v&&w[l]!=d&&(w[l]=d)};i.core=r,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={"version":"2.6.9"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(11),r=n(19);e.exports=n(15)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(12),r=n(14),o=n(18),a=Object.defineProperty;t.f=n(15)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(13);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(15)&&!n(16)(function(){return 7!=Object.defineProperty(n(17)("div"),"a",{"get":function(){return 7}}).a})},function(e,t,n){e.exports=!n(16)(function(){return 7!=Object.defineProperty({},"a",{"get":function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var i=n(13),r=n(8).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){var i=n(13);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{"enumerable":!(1&e),"configurable":!(2&e),"writable":!(4&e),"value":t}}},function(e,t,n){var i=n(8),r=n(10),o=n(21),a=n(22)("src"),s=n(23),u="toString",c=(""+s).split(u);n(9).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(o(n,"name")||r(n,"name",t)),e[t]!==n&&(u&&(o(n,a)||r(n,a,e[t]?""+e[t]:c.join(String(t)))),e===i?e[t]=n:s?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,u,function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){
return n.call(e,t)}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t,n){e.exports=n(24)("native-function-to-string",Function.toString)},function(e,t,n){var i=n(9),r=n(8),o="__core-js_shared__",a=r[o]||(r[o]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({"version":i.version,"mode":n(25)?"pure":"global","copyright":"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=!1},function(e,t,n){var i=n(27);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var i=n(15),r=n(29),o=n(41),a=n(42),s=n(43),u=n(32),c=Object.assign;e.exports=!c||n(16)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=i})?function(e,t){for(var n=s(e),c=arguments.length,l=1,f=o.f,d=a.f;c>l;)for(var p,h=u(arguments[l++]),g=f?r(h).concat(f(h)):r(h),m=g.length,v=0;m>v;)p=g[v++],i&&!d.call(h,p)||(n[p]=h[p]);return n}:c},function(e,t,n){var i=n(30),r=n(40);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(21),r=n(31),o=n(35)(!1),a=n(39)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),u=0,c=[];for(n in s)n!=a&&i(s,n)&&c.push(n);for(;t.length>u;)i(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var i=n(32),r=n(34);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(33);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(31),r=n(36),o=n(38);e.exports=function(e){return function(t,n,a){var s,u=i(t),c=r(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var i=n(37),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(37),r=Math.max,o=Math.min;e.exports=function(e,t){return e=i(e),e<0?r(e+t,0):o(e,t)}},function(e,t,n){var i=n(24)("keys"),r=n(22);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var i=n(34);e.exports=function(e){return Object(i(e))}},function(e,t,n){n(45),e.exports=n(9).String.trim},function(e,t,n){"use strict";n(46)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){var i=n(7),r=n(34),o=n(16),a=n(47),s="["+a+"]",u="​",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),f=function(e,t,n){var r={},s=o(function(){return!!a[e]()||u[e]()!=u}),c=r[e]=s?t(d):a[e];n&&(r[n]=c),i(i.P+i.F*s,"String",r)},d=f.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=f},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){n(49),e.exports=n(9).String.startsWith},function(e,t,n){"use strict";var i=n(7),r=n(36),o=n(50),a="startsWith",s=""[a];i(i.P+i.F*n(53)(a),"String",{"startsWith":function(e){var t=o(this,e,a),n=r(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return s?s.call(t,i,n):t.slice(n,n+i.length)===i}})},function(e,t,n){var i=n(51),r=n(34);e.exports=function(e,t,n){if(i(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},function(e,t,n){var i=n(13),r=n(33),o=n(52)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},function(e,t,n){var i=n(24)("wks"),r=n(22),o=n(8).Symbol,a="function"==typeof o,s=e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))};s.store=i},function(e,t,n){var i=n(52)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,!"/./"[e](t)}catch(r){}}return!0}},function(e,t,n){n(55),n(57),n(67),n(71),n(87),n(90),n(92),e.exports=n(9).Map},function(e,t,n){"use strict";var i=n(56),r={};r[n(52)("toStringTag")]="z",r+""!="[object z]"&&n(20)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(e,t,n){var i=n(33),r=n(52)("toStringTag"),o="Arguments"==i(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),r))?n:o?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){"use strict";var i=n(58)(!0);n(59)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{"value":void 0,"done":!0}:(e=i(t,n),this._i+=e.length,{"value":e,"done":!1})})},function(e,t,n){var i=n(37),r=n(34);e.exports=function(e){return function(t,n){var o,a,s=String(r(t)),u=i(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):(o-55296<<10)+(a-56320)+65536)}}},function(e,t,n){"use strict";var i=n(25),r=n(7),o=n(20),a=n(10),s=n(60),u=n(61),c=n(65),l=n(66),f=n(52)("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",h="keys",g="values",m=function(){return this};e.exports=function(e,t,n,v,y,b,T){u(n,t,v);var w,S,M,E=function(e){if(!d&&e in I)return I[e];switch(e){case h:return function(){return new n(this,e)};case g:return function(){return new n(this,e)}}return function(){return new n(this,e)}},C=t+" Iterator",_=y==g,x=!1,I=e.prototype,N=I[f]||I[p]||y&&I[y],O=N||E(y),A=y?_?E("entries"):O:void 0,R="Array"==t?I.entries||N:N;if(R&&(M=l(R.call(new e)),M!==Object.prototype&&M.next&&(c(M,C,!0),i||"function"==typeof M[f]||a(M,f,m))),_&&N&&N.name!==g&&(x=!0,O=function(){return N.call(this)}),i&&!T||!d&&!x&&I[f]||a(I,f,O),s[t]=O,s[C]=m,y)if(w={"values":_?O:E(g),"keys":b?O:E(h),"entries":A},T)for(S in w)S in I||o(I,S,w[S]);else r(r.P+r.F*(d||x),t,w);return w}},function(e,t){e.exports={}},function(e,t,n){"use strict";var i=n(62),r=n(19),o=n(65),a={};n(10)(a,n(52)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(a,{"next":r(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var i=n(12),r=n(63),o=n(40),a=n(39)("IE_PROTO"),s=function(){},u="prototype",c=function(){var e,t=n(17)("iframe"),i=o.length,r="<",a=">";for(t.style.display="none",n(64).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(r+"script"+a+"document.F=Object"+r+"/script"+a),e.close(),c=e.F;i--;)delete c[u][o[i]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[u]=i(e),n=new s,s[u]=null,n[a]=e):n=c(),void 0===t?n:r(n,t)}},function(e,t,n){var i=n(11),r=n(12),o=n(29);e.exports=n(15)?Object.defineProperties:function(e,t){r(e);for(var n,a=o(t),s=a.length,u=0;s>u;)i.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var i=n(8).document;e.exports=i&&i.documentElement},function(e,t,n){var i=n(11).f,r=n(21),o=n(52)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{"configurable":!0,"value":t})}},function(e,t,n){var i=n(21),r=n(43),o=n(39)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){for(var i=n(68),r=n(29),o=n(20),a=n(8),s=n(10),u=n(60),c=n(52),l=c("iterator"),f=c("toStringTag"),d=u.Array,p={"CSSRuleList":!0,"CSSStyleDeclaration":!1,"CSSValueList":!1,"ClientRectList":!1,"DOMRectList":!1,"DOMStringList":!1,"DOMTokenList":!0,"DataTransferItemList":!1,"FileList":!1,"HTMLAllCollection":!1,"HTMLCollection":!1,"HTMLFormElement":!1,"HTMLSelectElement":!1,"MediaList":!0,"MimeTypeArray":!1,"NamedNodeMap":!1,"NodeList":!0,"PaintRequestList":!1,"Plugin":!1,"PluginArray":!1,"SVGLengthList":!1,"SVGNumberList":!1,"SVGPathSegList":!1,"SVGPointList":!1,"SVGStringList":!1,"SVGTransformList":!1,"SourceBufferList":!1,"StyleSheetList":!0,"TextTrackCueList":!1,"TextTrackList":!1,"TouchList":!1},h=r(p),g=0;g<h.length;g++){var m,v=h[g],y=p[v],b=a[v],T=b&&b.prototype;if(T&&(T[l]||s(T,l,d),T[f]||s(T,f,v),u[v]=d,y))for(m in i)T[m]||o(T,m,i[m],!0)}},function(e,t,n){"use strict";var i=n(69),r=n(70),o=n(60),a=n(31);e.exports=n(59)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):"keys"==t?r(0,n):"values"==t?r(0,e[n]):r(0,[n,e[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t,n){var i=n(52)("unscopables"),r=Array.prototype;void 0==r[i]&&n(10)(r,i,{}),e.exports=function(e){r[i][e]=!0}},function(e,t){e.exports=function(e,t){return{"value":t,"done":!!e}}},function(e,t,n){"use strict";var i=n(72),r=n(81),o="Map";e.exports=n(82)(o,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{"get":function(e){var t=i.getEntry(r(this,o),e);return t&&t.v},"set":function(e,t){return i.def(r(this,o),0===e?0:e,t)}},i,!0)},function(e,t,n){"use strict";var i=n(11).f,r=n(62),o=n(73),a=n(26),s=n(74),u=n(75),c=n(59),l=n(70),f=n(79),d=n(15),p=n(80).fastKey,h=n(81),g=d?"_s":"size",m=function(e,t){var n,i=p(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={"getConstructor":function(e,t,n,c){var l=e(function(e,i){s(e,l,t,"_i"),e._t=t,e._i=r(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=i&&u(i,n,e[c],e)});return o(l.prototype,{"clear":function(){for(var e=h(this,t),n=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];e._f=e._l=void 0,e[g]=0},"delete":function(e){var n=h(this,t),i=m(n,e);if(i){var r=i.n,o=i.p;delete n._i[i.i],i.r=!0,o&&(o.n=r),r&&(r.p=o),n._f==i&&(n._f=r),n._l==i&&(n._l=o),n[g]--}return!!i},"forEach":function(e){h(this,t);for(var n,i=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},"has":function(e){return!!m(h(this,t),e)}}),d&&i(l.prototype,"size",{"get":function(){return h(this,t)[g]}}),l},"def":function(e,t,n){var i,r,o=m(e,t);return o?o.v=n:(e._l=o={"i":r=p(t,!0),"k":t,"v":n,"p":i=e._l,"n":void 0,"r":!1},e._f||(e._f=o),i&&(i.n=o),e[g]++,"F"!==r&&(e._i[r]=o)),e},"getEntry":m,"setStrong":function(e,t,n){c(e,t,function(e,n){this._t=h(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?l(0,n.k):"values"==t?l(0,n.v):l(0,[n.k,n.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){var i=n(20);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var i=n(26),r=n(76),o=n(77),a=n(12),s=n(36),u=n(78),c={},l={},t=e.exports=function(e,t,n,f,d){var p,h,g,m,v=d?function(){return e}:u(e),y=i(n,f,t?2:1),b=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(p=s(e.length);p>b;b++)if(m=t?y(a(h=e[b])[0],h[1]):y(e[b]),m===c||m===l)return m}else for(g=v.call(e);!(h=g.next()).done;)if(m=r(g,y,h.value,t),m===c||m===l)return m};t.BREAK=c,t.RETURN=l},function(e,t,n){var i=n(12);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(o){var a=e["return"];throw void 0!==a&&i(a.call(e)),o}}},function(e,t,n){var i=n(60),r=n(52)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[r]===e)}},function(e,t,n){var i=n(56),r=n(52)("iterator"),o=n(60);e.exports=n(9).getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||o[i(e)]}},function(e,t,n){"use strict";var i=n(8),r=n(11),o=n(15),a=n(52)("species");e.exports=function(e){var t=i[e];o&&t&&!t[a]&&r.f(t,a,{"configurable":!0,"get":function(){return this}})}},function(e,t,n){var i=n(22)("meta"),r=n(13),o=n(21),a=n(11).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(16)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,i,{"value":{"i":"O"+ ++s,"w":{}}})},f=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[i].i},d=function(e,t){if(!o(e,i)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[i].w},p=function(e){return c&&h.NEED&&u(e)&&!o(e,i)&&l(e),e},h=e.exports={"KEY":i,"NEED":!1,"fastKey":f,"getWeak":d,"onFreeze":p}},function(e,t,n){var i=n(13);e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";var i=n(8),r=n(7),o=n(20),a=n(73),s=n(80),u=n(75),c=n(74),l=n(13),f=n(16),d=n(83),p=n(65),h=n(84);e.exports=function(e,t,n,g,m,v){var y=i[e],b=y,T=m?"set":"add",w=b&&b.prototype,S={},M=function(e){var t=w[e];o(w,e,"delete"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(v||w.forEach&&!f(function(){(new b).entries().next()}))){var E=new b,C=E[T](v?{}:-0,1)!=E,_=f(function(){E.has(1)}),x=d(function(e){new b(e)}),I=!v&&f(function(){for(var e=new b,t=5;t--;)e[T](t,t);return!e.has(-0)});x||(b=t(function(t,n){c(t,b,e);var i=h(new y,t,b);return void 0!=n&&u(n,m,i[T],i),i}),b.prototype=w,w.constructor=b),(_||I)&&(M("delete"),M("has"),m&&M("get")),(I||C)&&M(T),v&&w.clear&&delete w.clear}else b=g.getConstructor(t,e,m,T),a(b.prototype,n),s.NEED=!0;return p(b,e),S[e]=b,r(r.G+r.W+r.F*(b!=y),S),v||g.setStrong(b,e,m),b}},function(e,t,n){var i=n(52)("iterator"),r=!1;try{var o=[7][i]();o["return"]=function(){r=!0},Array.from(o,function(){throw 2})}catch(a){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{"done":n=!0}},o[i]=function(){return a},e(o)}catch(s){}return n}},function(e,t,n){var i=n(13),r=n(85).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&i(o)&&r&&r(e,o),e}},function(e,t,n){var i=n(13),r=n(12),o=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={"set":Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=n(26)(Function.call,n(86).f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),"check":o}},function(e,t,n){var i=n(42),r=n(19),o=n(31),a=n(18),s=n(21),u=n(14),c=Object.getOwnPropertyDescriptor;t.f=n(15)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(n){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},function(e,t,n){var i=n(7);i(i.P+i.R,"Map",{"toJSON":n(88)("Map")})},function(e,t,n){var i=n(56),r=n(89);e.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},function(e,t,n){var i=n(75);e.exports=function(e,t){var n=[];return i(e,!1,n.push,n,t),n}},function(e,t,n){n(91)("Map")},function(e,t,n){"use strict";var i=n(7);e.exports=function(e){i(i.S,e,{"of":function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(93)("Map")},function(e,t,n){"use strict";var i=n(7),r=n(27),o=n(26),a=n(75);e.exports=function(e){i(i.S,e,{"from":function(e){var t,n,i,s,u=arguments[1];return r(this),t=void 0!==u,t&&r(u),void 0==e?new this:(n=[],t?(i=0,s=o(u,arguments[2],2),a(e,!1,function(e){n.push(s(e,i++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){n(57),n(95),e.exports=n(9).Array.from},function(e,t,n){"use strict";var i=n(26),r=n(7),o=n(43),a=n(76),s=n(77),u=n(36),c=n(96),l=n(78);r(r.S+r.F*!n(83)(function(e){Array.from(e)}),"Array",{"from":function(e){var t,n,r,f,d=o(e),p="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,m=void 0!==g,v=0,y=l(d);if(m&&(g=i(g,h>2?arguments[2]:void 0,2)),void 0==y||p==Array&&s(y))for(t=u(d.length),n=new p(t);t>v;v++)c(n,v,m?g(d[v],v):d[v]);else for(f=y.call(d),n=new p;!(r=f.next()).done;v++)c(n,v,m?a(f,g,[r.value,v],!0):r.value);return n.length=v,n}})},function(e,t,n){"use strict";var i=n(11),r=n(19);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){n(98),e.exports=n(9).Array.filter},function(e,t,n){"use strict";var i=n(7),r=n(99)(2);i(i.P+i.F*!n(103)([].filter,!0),"Array",{"filter":function(e){return r(this,e,arguments[1])}})},function(e,t,n){var i=n(26),r=n(32),o=n(43),a=n(36),s=n(100);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,f=6==e,d=5==e||f,p=t||s;return function(t,s,h){for(var g,m,v=o(t),y=r(v),b=i(s,h,3),T=a(y.length),w=0,S=n?p(t,T):u?p(t,0):void 0;T>w;w++)if((d||w in y)&&(g=y[w],m=b(g,w,v),e))if(n)S[w]=m;else if(m)switch(e){case 3:return!0;case 5:return g;case 6:return w;case 2:S.push(g)}else if(l)return!1;return f?-1:c||l?l:S}}},function(e,t,n){var i=n(101);e.exports=function(e,t){return new(i(e))(t)}},function(e,t,n){var i=n(13),r=n(102),o=n(52)("species");e.exports=function(e){var t;return r(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}},function(e,t,n){var i=n(33);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){"use strict";var i=n(16);e.exports=function(e,t){return!!e&&i(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){n(105),e.exports=n(9).Array.findIndex},function(e,t,n){"use strict";var i=n(7),r=n(99)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),i(i.P+i.F*a,"Array",{"findIndex":function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(69)(o)},function(e,t,n){(function(t,i){!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function r(e){return"function"==typeof e}function o(e){$=e}function a(e){Q=e}function s(){return function(){return t.nextTick(d)}}function u(){return function(){W(d)}}function c(){var e=0,t=new Z(d),n=document.createTextNode("");return t.observe(n,{"characterData":!0}),function(){n.data=e=++e%2}}function l(){var e=new MessageChannel;return e.port1.onmessage=d,function(){return e.port2.postMessage(0)}}function f(){var e=setTimeout;return function(){return e(d,1)}}function d(){for(var e=0;e<Y;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}Y=0}function p(){try{var e=n(108);return W=e.runOnLoop||e.runOnContext,u()}catch(t){return f()}}function h(e,t){var n=arguments,i=this,r=new this.constructor(m);void 0===r[re]&&k(r);var o=i._state;return o?!function(){var e=n[o-1];Q(function(){return R(o,r,e,i._result)})}():I(i,r,e,t),r}function g(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(m);return E(n,e),n}function m(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(t){return ue.error=t,ue}}function T(e,t,n,i){try{e.call(t,n,i)}catch(r){return r}}function w(e,t,n){Q(function(e){var i=!1,r=T(n,t,function(n){i||(i=!0,t!==n?E(e,n):_(e,n))},function(t){i||(i=!0,x(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&r&&(i=!0,x(e,r))},e)}function S(e,t){t._state===ae?_(e,t._result):t._state===se?x(e,t._result):I(t,void 0,function(t){return E(e,t)},function(t){return x(e,t)})}function M(e,t,n){t.constructor===e.constructor&&n===h&&t.constructor.resolve===g?S(e,t):n===ue?x(e,ue.error):void 0===n?_(e,t):r(n)?w(e,t,n):_(e,t)}function E(t,n){t===n?x(t,v()):e(n)?M(t,n,b(n)):_(t,n)}function C(e){e._onerror&&e._onerror(e._result),N(e)}function _(e,t){e._state===oe&&(e._result=t,e._state=ae,0!==e._subscribers.length&&Q(N,e))}function x(e,t){e._state===oe&&(e._state=se,e._result=t,Q(C,e))}function I(e,t,n,i){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+ae]=n,r[o+se]=i,0===o&&e._state&&Q(N,e)}function N(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,r=void 0,o=e._result,a=0;a<t.length;a+=3)i=t[a],r=t[a+n],i?R(n,i,r,o):r(o);e._subscribers.length=0}}function O(){this.error=null}function A(e,t){try{return e(t)}catch(n){return ce.error=n,ce}}function R(e,t,n,i){var o=r(n),a=void 0,s=void 0,u=void 0,c=void 0;if(o){if(a=A(n,i),a===ce?(c=!0,s=a.error,a=null):u=!0,t===a)return void x(t,y())}else a=i,u=!0;t._state!==oe||(o&&u?E(t,a):c?x(t,s):e===ae?_(t,a):e===se&&x(t,a))}function D(e,t){try{t(function(t){E(e,t)},function(t){x(e,t)})}catch(n){x(e,n)}}function L(){return le++}function k(e){e[re]=le++,e._state=void 0,e._result=void 0,e._subscribers=[]}function U(e,t){this._instanceConstructor=e,this.promise=new e(m),this.promise[re]||k(this.promise),K(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?_(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&_(this.promise,this._result))):x(this.promise,P())}function P(){return new Error("Array Methods must be provided an Array")}function F(e){return new U(this,e).promise}function j(e){var t=this;return new t(K(e)?function(n,i){for(var r=e.length,o=0;o<r;o++)t.resolve(e[o]).then(n,i)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function G(e){var t=this,n=new t(m);return x(n,e),n}function V(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function H(e){this[re]=L(),this._result=this._state=void 0,this._subscribers=[],m!==e&&("function"!=typeof e&&V(),this instanceof H?D(this,e):B())}function q(){var e=void 0;if("undefined"!=typeof i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===r&&!n.cast)return}e.Promise=H}var z=void 0;z=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var K=z,Y=0,W=void 0,$=void 0,Q=function(e,t){ne[Y]=e,ne[Y+1]=t,Y+=2,2===Y&&($?$(d):ie())},J="undefined"!=typeof window?window:void 0,X=J||{},Z=X.MutationObserver||X.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3),ie=void 0;ie=ee?s():Z?c():te?l():void 0===J?p():f();var re=Math.random().toString(36).substring(16),oe=void 0,ae=1,se=2,ue=new O,ce=new O,le=0;return U.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===oe&&n<e;n++)this._eachEntry(t[n],n)},U.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===g){var r=b(e);if(r===h&&e._state!==oe)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===H){var o=new n(m);M(o,e,r),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},U.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===oe&&(this._remaining--,e===se?x(i,n):this._result[t]=n),0===this._remaining&&_(i,this._result)},U.prototype._willSettleAt=function(e,t){var n=this;I(e,void 0,function(e){return n._settledAt(ae,t,e)},function(e){return n._settledAt(se,t,e)})},H.all=F,H.race=j,H.resolve=g,H.reject=G,H._setScheduler=o,H._setAsap=a,H._asap=Q,H.prototype={"constructor":H,"then":h,"catch":function(e){return this.then(null,e)}},q(),H.polyfill=q,H.Promise=H,H})}).call(t,n(107),function(){return this}())},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){g&&p&&(g=!1,p.length?h=p.concat(h):m=-1,h.length&&s())}function s(){if(!g){var e=r(a);g=!0;for(var t=h.length;t;){for(p=h,h=[];++m<t;)p&&p[m].run();m=-1,t=h.length}p=null,g=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var p,h=[],g=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||g||r(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){},function(e,t){"use strict";!function(){function e(){this.xdr=null,this.withCredentials=!1,this.status="",this.readyState=0,this.responseType=null,this.responseText="",this.isXHR=!1}var t=!window.msPerformance&&window.XDomainRequest||null,n=window.XMLHttpRequest||function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(n){}throw new Error("This browser does not support XMLHttpRequest.")};return window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?void(window.XNHttpRequest=window.XMLHttpRequest):void(t&&(e.prototype.open=function(e,i,r){if(i&&"string"==typeof i){if(i.search(document.location.host)>-1)return this.xdr=new n,this.xdr.open(e,i,r),void(this.isXHR=!0);this.xdr=new t,this.xdr.open(e.toLowerCase(),i);var o=this;this.xdr.ontimeout=function(){o.readyState=2,o.responseText="Timeout",o.status=408,o.xdr.abort(),o.onreadystatechange()},this.xdr.onerror=function(){o.readyState=2,o.responseText="Error",o.status=500,o.xdr.abort(),o.onreadystatechange()},this.xdr.onprogress=function(){o.readyState=1},this.xdr.onload=function(){o.readyState=4,o.status=200,o.responseText=o.xdr.responseText,o.onreadystatechange()}}},e.prototype.send=function(e){var t=this;this.isXHR?(t.xdr.onreadystatechange=function(){4===t.xdr.readyState&&(t.readyState=t.xdr.readyState,t.status=t.xdr.status,t.responseText=t.xdr.responseText,t.onreadystatechange())},t.xdr.send(e)):setTimeout(function(){try{t.xdr.send(e)}catch(n){console.warn("XDomainRequest.send() ",n)}},0)},e.prototype.abort=function(){this.xdr.abort()},e.prototype.setRequestHeader=function(e,t){this.isXHR&&this.xdr.setRequestHeader(e,t)},e.prototype.getAllResponseHeaders=function(){return this.isXHR?this.xdr.getAllResponseHeaders():"'Content-Type': "+this.xdr.contentType},e.prototype.onreadystatechange=function(){},window.XDomainRequest?window.XNHttpRequest=e:window.XNHttpRequest=window.XMLHttpRequest))}()},function(e,t){"use strict";!function(t){function n(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function u(e,t){var n=new FileReader,i=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"",r=/charset\=[0-9a-zA-Z\-\_]*;?/,o=e.type.match(r)||i.match(r),s=[e];return o&&s.push(o[0].replace(/^charset\=/,"").replace(/;$/,"")),n.readAsText.apply(n,s),a(n)}function c(){return this.bodyUsed=!1,this._initBody=function(e,t){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(g.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e,this._options=t;else if(g.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText=""},g.blob?(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob,this._options);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=o(this);return e?e:Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=l(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n,t)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function p(e){var t=new r,n=e.getAllResponseHeaders().trim().split("\n");return n.forEach(function(e){var n=e.trim().split(":"),i=n.shift().trim(),r=n.join(":").trim();t.append(i,r)}),t}function h(e,t){t||(t={}),this._initBody(e,t),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof r?t.headers:new r(t.headers),this.url=t.url||""}if(t.__disableNativeFetch||!t.fetch){r.prototype.append=function(e,t){e=n(e),t=i(t);var r=this.map[e];r||(r=[],this.map[e]=r),r.push(t)},r.prototype["delete"]=function(e){delete this.map[n(e)]},r.prototype.get=function(e){
var t=this.map[n(e)];return t?t[0]:null},r.prototype.getAll=function(e){return this.map[n(e)]||[]},r.prototype.has=function(e){return this.map.hasOwnProperty(n(e))},r.prototype.set=function(e,t){this.map[n(e)]=[i(t)]},r.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(i){e.call(t,i,n,this)},this)},this)};var g={"blob":"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),"formData":"FormData"in t,"arrayBuffer":"ArrayBuffer"in t},m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},c.call(f.prototype),c.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{"status":this.status,"statusText":this.statusText,"headers":new r(this.headers),"url":this.url})},h.error=function(){var e=new h(null,{"status":0,"statusText":""});return e.type="error",e};var v=[301,302,303,307,308];h.redirect=function(e,t){if(v.indexOf(t)===-1)throw new RangeError("Invalid status code");return new h(null,{"status":t,"headers":{"location":e}})},t.Headers=r,t.Request=f,t.Response=h,t.fetch=function(e,t){return new Promise(function(n,i){function r(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}function o(){if(4===s.readyState){var e=1223===s.status?204:s.status;if(e<100||e>599){if(u)return;return u=!0,void i(new TypeError("Network request failed"))}var t={"status":e,"statusText":s.statusText,"headers":p(s),"url":r()},o="response"in s?s.response:s.responseText;u||(u=!0,n(new h(o,t)))}}var a;a=f.prototype.isPrototypeOf(e)&&!t?e:new f(e,t);var s=new XNHttpRequest,u=!1;s.onreadystatechange=o,s.onload=o,s.onerror=function(){u||(u=!0,i(new TypeError("Network request failed")))},s.open(a.method,a.url,!0);try{"include"===a.credentials&&("withCredentials"in s?s.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(c){console&&console.warn&&console.warn("set withCredentials error:"+c)}"responseType"in s&&g.blob&&(s.responseType="blob"),a.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send("undefined"==typeof a._bodyInit?null:a._bodyInit)})},t.fetch.polyfill=!0,"undefined"!=typeof e&&e.exports&&(e.exports=t.fetch)}}(window)},function(e,t,n){(function(e){"use strict";var t=n(113);n(117);e.httpURI=function(e){return t.Terminal.ielt9?(e.indexOf("haier.net")&&e.indexOf("8443")&&"http:"===document.location.protocol?e=e.replace(":8443",":8442"):e.indexOf("gzcb.com.cn")&&e.indexOf("8002")&&"http:"===document.location.protocol&&(e=e.replace(":8002",":8001")),e.replace("https://",document.location.protocol+"//")):e},e.formatIEUrl=function(e){return t.Terminal.ie?(e.indexOf("haier.net")&&e.indexOf("8443")&&"http:"===document.location.protocol&&(e=e.replace(":8443",":8442")),e.replace("https://","http://")):e},e.GET_SERVER=e.httpURI(e.GET_SERVER),e.sourceURI=e.httpURI(e.sourceURI)}).call(t,n(112))},function(e,t){"use strict";t.__esModule=!0;var n={"sourceURI":"https://visitor.ntalker.com/visitor/respack/","customUIAddress":"//view.ntalker.com/public/nt-ui.js","GET_SERVER":"https://bj-v4-n1-gateway.ntalker.com/client-init","socketServer":"wss://bj-v4-n1-gateway.ntalker.com:8084;ws://39.97.7.122:8083","getServerTimeout":"5000","getSettingTimeout":"20000","mqu":"ntguest","mqp":"xiaoneng123","RTC_Client_ADDRESS":"https://cdn.agora.io/sdk/web/AgoraRTCSDK-2.4.1.js","RTC_Client_APPID":"4cab3f3c0a1d4bbcb2bdf80319339c75"};n.SERVER={"NACCOUNT":{"httpServer":"gate"},"NPIGEON":{"httpServer":"pigeon"},"NDOLPHIN":{"httpServer":"dolphin"},"NSETTING":{"httpServer":"dolphinsetting"},"NSKYEYE":{"httpServer":"skyeye"},"NFILE":{"httpServer":"filestorage"},"NMagicServer":{"httpServer":"magicbox"},"NEagleServer":{"httpServer":"robot-agent"}};var i=n.socketServer,r=n.GET_SERVER,o=function(e){for(var t=r.replace(".ntalker.com","").replace("//init","").replace(/https?:/,""),n={},o=Object.keys(e),a=0,s=o.length;a<s;a+=1){var u=o[a],c=e[u].httpServer,l=""+c+t,f="ntalker.com",d=8083;if(n[u]={"httpServer":"https://"+l+"."+f},"NPIGEON"===u&&""===i){var p="mq"+t;n[u].socketServer="ws://"+p+"."+f+":"+d+";wss://"+p+"."+f+":"+(d+1)}}return n};if(n.useGateApi="false",n.SERVER.NApiGatewayServer={"httpServer":""},r.indexOf("//init")>-1)n.SERVER=o(n.SERVER);else{var a=r.replace("/client-init","");n.useGateApi="true",n.SERVER.NApiGatewayServer={"httpServer":a};var s=a.replace(/https?:/,"").replace("//","");if(""===i){var u=8083;n.SERVER.NPIGEON.socketServer="ws://"+s+":"+u+";wss://"+s+":"+(u+1)}}if(""!==i&&(n.SERVER.NPIGEON.socketServer=i),r.indexOf("init-base.ntalker.com")>-1){var c=Object.keys(n.SERVER);c.forEach(function(e){"NFILE"!==e&&(n.SERVER[e].httpServer=n.SERVER[e].httpServer.replace("-base","-release"))}),n.SERVER.NPIGEON.socketServer="ws://emq1-release.ntalker.com:8083;wss://emq1-release.ntalker.com:8084"}t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function i(){var e="PC";return s.mobile&&(e="Phone"),e}function r(){var e="web";return s.mobile&&(e="wap"),e}function o(){var e=0,t=0;try{if("ie"===a.browser.name){var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");n&&(e=1,t=n.GetVariable("$version"))}else if(navigator.plugins&&navigator.plugins.length>0){var n=navigator.plugins["Shockwave Flash"];n&&(e=1,t=n.description.split(" ")[2])}}catch(i){}return{"f":e,"v":t+""}}t.__esModule=!0,t.Terminal=void 0;var a=n(114),s={"system":a.os.name,"browser":a.browser.name+a.browser.version,"device":a.device.name,"screensize":screen.width+" * "+screen.height,"screenWidth":screen.width,"screenHeigth":screen.height,"language":(navigator.browserLanguage||navigator.language).toLowerCase(),"flashVersion":o().v,"mobile":"android"===a.os.name||"ios"===a.os.name||"wp"===a.os.name||"symbian"===a.os.name||"blackberry"===a.os.name||"yunos"===a.os.name,"wechat":"micromessenger"===a.browser.name,"uc":"uc"===a.browser.name,"safari":"safari"===a.browser.name,"ali":"ali-ap"===a.browser.name,"ie":"ie"===a.browser.name,"ie8":"ie"===a.browser.name&&8===document.documentMode,"ie9":"ie"===a.browser.name&&9===document.documentMode,"ielt9":"ie"===a.browser.name&&document.documentMode<=9,"firefox":"firefox"===a.browser.name,"chrome":"chrome"===a.browser.name,"AliApp":navigator.userAgent.indexOf("AliApp")>-1,"baiduboxapp":navigator.userAgent.indexOf("baiduboxapp")>-1,"Fanli":navigator.userAgent.indexOf("Fanli")>-1,"iosSmallVersion":navigator.userAgent.toLowerCase()},u=0;try{if("ios"===s.system){var c=navigator.userAgent.toLowerCase(),l=c.match(/cpu iphone os (.*?) like mac os/);l[1]&&(u=parseInt(l[1].split("_")[0],10))}}catch(f){u=0}s.device=i(),s.terminal=r(),s.isAbsolute="ios"===s.system&&s.AliApp&&12===u||s.baiduboxapp,t.Terminal=s},function(e,t,n){"use strict";function i(e){if(!a.re_msie.test(e))return null;var t=void 0,n=void 0,i=void 0,r=void 0,o=void 0;if(e.indexOf("trident/")!==-1&&(t=/\btrident\/([0-9.]+)/.exec(e),t&&t.length>=2)){i=t[1];var s=t[1].split(".");s[0]=parseInt(s[0],10)+4,o=s.join(".")}t=a.re_msie.exec(e),r=t[1];var u=t[1].split(".");return"undefined"==typeof o&&(o=r),u[0]=parseInt(u[0],10)-4,n=u.join("."),"undefined"==typeof i&&(i=n),{"browserVersion":o,"browserMode":r,"engineVersion":i,"engineMode":n,"compatible":i!==n}}function r(e){var t=f.parse(e),n=i(e);if(n){var r=t.engine.name,o=n.engineVersion||n.engineMode,a=parseFloat(o),s=n.engineMode;t.engine={"name":r,"version":a,"fullVersion":o,"mode":parseFloat(s),"fullMode":s,"compatible":!!n&&n.compatible},t.engine[t.engine.name]=a;var u=t.browser.name,c=t.browser.fullVersion;"ie"===u&&(c=n.browserVersion);var l=n.browserMode,d=parseFloat(c);t.browser={"name":u,"version":d,"fullVersion":c,"mode":parseFloat(l),"fullMode":l,"compatible":!!n&&n.compatible},t.browser[u]=d}return t}var o=n(115),a=n(116),s=navigator.userAgent||"",u=navigator.appVersion||"",c=navigator.vendor||"",l=s+" "+u+" "+c,f=new o(a),d=r(l);d.parse=r,e.exports=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return function(t){return Object.prototype.toString.call(t)==="[object "+e+"]"}}function r(e,t){for(var n=0,i=e.length;n<i&&t.call(e,e[n],n)!==!1;n++);}function o(e,t,n){var i=p(t)?t.call(null,n):t;if(!i)return null;var r={"name":e,"version":u,"codename":""};if(i===!0)return r;if(l(i)){if(n.indexOf(i)!==-1)return r}else{if(d(i))return i.hasOwnProperty("version")&&(r.version=i.version),r;if(f(i)){var o=i.exec(n);if(o)return o.length>=2&&o[1]?r.version=o[1].replace(/_/g,"."):r.version=u,r}}}function a(e,t,n,i){var a=c;r(t,function(t){var n=o(t[0],t[1],e);if(n)return a=n,!1}),n.call(i,a.name,a.version)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u="-1",c={"name":"na","version":u},l=i("String"),f=i("RegExp"),d=i("Object"),p=i("Function"),h=function(){function e(t){n(this,e),this._rules=t}return s(e,[{"key":"parse","value":function(e){e=(e||"").toLowerCase();var t={};a(e,this._rules.device,function(e,n){var i=parseFloat(n);t.device={"name":e,"version":i,"fullVersion":n},t.device[e]=i},t),a(e,this._rules.os,function(e,n){var i=parseFloat(n);t.os={"name":e,"version":i,"fullVersion":n},t.os[e]=i},t);var n=this.IEMode(e);return a(e,this._rules.engine,function(e,i){var r=i;n&&(i=n.engineVersion||n.engineMode,r=n.engineMode);var o=parseFloat(i);t.engine={"name":e,"version":o,"fullVersion":i,"mode":parseFloat(r),"fullMode":r,"compatible":!!n&&n.compatible},t.engine[e]=o},t),a(e,this._rules.browser,function(e,i){var r=i;n&&("ie"===e&&(i=n.browserVersion),r=n.browserMode);var o=parseFloat(i);t.browser={"name":e,"version":o,"fullVersion":i,"mode":parseFloat(r),"fullMode":r,"compatible":!!n&&n.compatible},t.browser[e]=o},t),t}},{"key":"IEMode","value":function(e){if(!this._rules.re_msie.test(e))return null;var t=void 0,n=void 0,i=void 0,r=void 0,o=void 0;if(e.indexOf("trident/")!==-1&&(t=/\btrident\/([0-9.]+)/.exec(e),t&&t.length>=2)){i=t[1];var a=t[1].split(".");a[0]=parseInt(a[0],10)+4,o=a.join(".")}t=this._rules.re_msie.exec(e),r=t[1];var s=t[1].split(".");return"undefined"==typeof o&&(o=r),s[0]=parseInt(s[0],10)-4,n=s.join("."),"undefined"==typeof i&&(i=n),{"browserVersion":o,"browserMode":r,"engineVersion":i,"engineMode":n,"compatible":i!==n}}}]),e}();e.exports=h},function(e,t){(function(t){"use strict";function n(e){if(r)try{var t=r.twGetRunPath.toLowerCase(),n=r.twGetSecurityID(i),o=r.twGetVersion(n);if(t&&t.indexOf(e)===-1)return!1;if(o)return{"version":o}}catch(a){}}var i="undefined"==typeof window?t:window,r=i.external,o=/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/,a=/\bbb10\b.+?\bversion\/([\d.]+)/,s=/\bblackberry\b.+\bversion\/([\d.]+)/,u=/\bblackberry\d+\/([\d.]+)/,c="-1",l=[["nokia",function(e){return e.indexOf("nokia ")!==-1?/\bnokia ([0-9]+)?/:/\bnokia([a-z0-9]+)?/}],["samsung",function(e){return e.indexOf("samsung")!==-1?/\bsamsung(?:[ \-](?:sgh|gt|sm))?-([a-z0-9]+)/:/\b(?:sgh|sch|gt|sm)-([a-z0-9]+)/}],["wp",function(e){return e.indexOf("windows phone ")!==-1||e.indexOf("xblwp")!==-1||e.indexOf("zunewp")!==-1||e.indexOf("windows ce")!==-1}],["pc","windows"],["ipad","ipad"],["ipod","ipod"],["iphone",/\biphone\b|\biph(\d)/],["mac","macintosh"],["mi",/\bmi[ \-]?([a-z0-9 ]+(?= build|\)))/],["hongmi",/\bhm[ \-]?([a-z0-9]+)/],["aliyun",/\baliyunos\b(?:[\-](\d+))?/],["meizu",function(e){return e.indexOf("meizu")>=0?/\bmeizu[\/ ]([a-z0-9]+)\b/:/\bm([0-9cx]{1,4})\b/}],["nexus",/\bnexus ([0-9s.]+)/],["huawei",function(e){var t=/\bmediapad (.+?)(?= build\/huaweimediapad\b)/;return e.indexOf("huawei-huawei")!==-1?/\bhuawei\-huawei\-([a-z0-9\-]+)/:t.test(e)?t:/\bhuawei[ _\-]?([a-z0-9]+)/}],["lenovo",function(e){return e.indexOf("lenovo-lenovo")!==-1?/\blenovo\-lenovo[ \-]([a-z0-9]+)/:/\blenovo[ \-]?([a-z0-9]+)/}],["zte",function(e){return/\bzte\-[tu]/.test(e)?/\bzte-[tu][ _\-]?([a-su-z0-9\+]+)/:/\bzte[ _\-]?([a-su-z0-9\+]+)/}],["vivo",/\bvivo(?: ([a-z0-9]+))?/],["htc",function(e){return/\bhtc[a-z0-9 _\-]+(?= build\b)/.test(e)?/\bhtc[ _\-]?([a-z0-9 ]+(?= build))/:/\bhtc[ _\-]?([a-z0-9 ]+)/}],["oppo",/\boppo[_]([a-z0-9]+)/],["konka",/\bkonka[_\-]([a-z0-9]+)/],["sonyericsson",/\bmt([a-z0-9]+)/],["coolpad",/\bcoolpad[_ ]?([a-z0-9]+)/],["lg",/\blg[\-]([a-z0-9]+)/],["android",/\bandroid\b|\badr\b/],["blackberry",function(e){return e.indexOf("blackberry")>=0?/\bblackberry\s?(\d+)/:"bb10"}]],f=[["wp",function(e){return e.indexOf("windows phone ")!==-1?/\bwindows phone (?:os )?([0-9.]+)/:e.indexOf("xblwp")!==-1?/\bxblwp([0-9.]+)/:e.indexOf("zunewp")!==-1?/\bzunewp([0-9.]+)/:"windows phone"}],["windows",/\bwindows nt ([0-9.]+)/],["macosx",/\bmac os x ([0-9._]+)/],["ios",function(e){return/\bcpu(?: iphone)? os /.test(e)?/\bcpu(?: iphone)? os ([0-9._]+)/:e.indexOf("iph os ")!==-1?/\biph os ([0-9_]+)/:/\bios\b/}],["yunos",/\baliyunos ([0-9.]+)/],["android",function(e){return e.indexOf("android")>=0?/\bandroid[ \/-]?([0-9.x]+)?/:e.indexOf("adr")>=0?e.indexOf("mqqbrowser")>=0?/\badr[ ]\(linux; u; ([0-9.]+)?/:/\badr(?:[ ]([0-9.]+))?/:"android"}],["chromeos",/\bcros i686 ([0-9.]+)/],["linux","linux"],["windowsce",/\bwindows ce(?: ([0-9.]+))?/],["symbian",/\bsymbian(?:os)?\/([0-9.]+)/],["blackberry",function(e){var t=e.match(a)||e.match(s)||e.match(u);return t?{"version":t[1]}:"blackberry"}]],d=[["edgehtml",/edge\/([0-9.]+)/],["trident",o],["blink",function(){return"chrome"in i&&"CSS"in i&&/\bapplewebkit[\/]?([0-9.+]+)/}],["webkit",/\bapplewebkit[\/]?([0-9.+]+)/],["gecko",function(e){var t=e.match(/\brv:([\d\w.]+).*\bgecko\/(\d+)/);if(t)return{"version":t[1]+"."+t[2]}}],["presto",/\bpresto\/([0-9.]+)/],["androidwebkit",/\bandroidwebkit\/([0-9.]+)/],["coolpadwebkit",/\bcoolpadwebkit\/([0-9.]+)/],["u2",/\bu2\/([0-9.]+)/],["u3",/\bu3\/([0-9.]+)/]],p=[["edge",/edge\/([0-9.]+)/],["sogou",function(e){return e.indexOf("sogoumobilebrowser")>=0?/sogoumobilebrowser\/([0-9.]+)/:e.indexOf("sogoumse")>=0||/ se ([0-9.x]+)/}],["theworld",function(){var e=n("theworld");return"undefined"!=typeof e?e:/theworld(?: ([\d.])+)?/}],["360",function(e){var t=n("360se");return"undefined"!=typeof t?t:e.indexOf("360 aphone browser")!==-1?/\b360 aphone browser \(([^\)]+)\)/:/\b360(?:se|ee|chrome|browser)\b/}],["maxthon",function(){try{if(r&&(r.mxVersion||r.max_version))return{"version":r.mxVersion||r.max_version}}catch(e){}return/\b(?:maxthon|mxbrowser)(?:[ \/]([0-9.]+))?/}],["micromessenger",/\bmicromessenger\/([\d.]+)/],["qq",/\bm?qqbrowser\/([0-9.]+)/],["green","greenbrowser"],["tt",/\btencenttraveler ([0-9.]+)/],["liebao",function(e){if(e.indexOf("liebaofast")>=0)return/\bliebaofast\/([0-9.]+)/;if(e.indexOf("lbbrowser")===-1)return!1;var t=void 0;try{r&&r.LiebaoGetVersion&&(t=r.LiebaoGetVersion())}catch(n){}return{"version":t||c}}],["tao",/\btaobrowser\/([0-9.]+)/],["coolnovo",/\bcoolnovo\/([0-9.]+)/],["saayaa","saayaa"],["baidu",/\b(?:ba?idubrowser|baiduhd)[ \/]([0-9.x]+)/],["ie",o],["mi",/\bmiuibrowser\/([0-9.]+)/],["opera",function(e){var t=/\bopera.+version\/([0-9.ab]+)/,n=/\bopr\/([0-9.]+)/;return t.test(e)?t:n}],["oupeng",/\boupeng\/([0-9.]+)/],["yandex",/yabrowser\/([0-9.]+)/],["ali-ap",function(e){return e.indexOf("aliapp")>0?/\baliapp\(ap\/([0-9.]+)\)/:/\balipayclient\/([0-9.]+)\b/}],["ali-ap-pd",/\baliapp\(ap-pd\/([0-9.]+)\)/],["ali-am",/\baliapp\(am\/([0-9.]+)\)/],["ali-tb",/\baliapp\(tb\/([0-9.]+)\)/],["ali-tb-pd",/\baliapp\(tb-pd\/([0-9.]+)\)/],["ali-tm",/\baliapp\(tm\/([0-9.]+)\)/],["ali-tm-pd",/\baliapp\(tm-pd\/([0-9.]+)\)/],["uc",function(e){return e.indexOf("ucbrowser/")>=0?/\bucbrowser\/([0-9.]+)/:e.indexOf("ubrowser/")>=0?/\bubrowser\/([0-9.]+)/:/\buc\/[0-9]/.test(e)?/\buc\/([0-9.]+)/:e.indexOf("ucweb")>=0?/\bucweb([0-9.]+)?/:/\b(?:ucbrowser|uc)\b/}],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["android",function(e){if(e.indexOf("android")!==-1)return/\bversion\/([0-9.]+(?: beta)?)/}],["blackberry",function(e){var t=e.match(a)||e.match(s)||e.match(u);return t?{"version":t[1]}:"blackberry"}],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//],["webview",/\bcpu(?: iphone)? os (?:[0-9._]+).+\bapplewebkit\b/],["firefox",/\bfirefox\/([0-9.ab]+)/],["nokia",/\bnokiabrowser\/([0-9.]+)/]];e.exports={"device":l,"os":f,"browser":p,"engine":d,"re_msie":o}}).call(t,function(){return this}())},function(e,t,n){(function(e){function i(e,n){var i={"seen":[],"stylize":o};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),h(n)?i.showHidden=n:n&&t._extend(i,n),T(i.showHidden)&&(i.showHidden=!1),T(i.depth)&&(i.depth=2),T(i.colors)&&(i.colors=!1),T(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=r),s(i,e,i.depth)}function r(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function o(e,t){return e}function a(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function s(e,n,i){if(e.customInspect&&n&&C(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,e);return y(r)||(r=s(e,r,i)),r}var o=u(e,n);if(o)return o;var h=Object.keys(n),g=a(h);if(e.showHidden&&(h=Object.getOwnPropertyNames(n)),E(n)&&(h.indexOf("message")>=0||h.indexOf("description")>=0))return c(n);if(0===h.length){if(C(n)){var m=n.name?": "+n.name:"";return e.stylize("[Function"+m+"]","special")}if(w(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(M(n))return e.stylize(Date.prototype.toString.call(n),"date");if(E(n))return c(n)}var v="",b=!1,T=["{","}"];if(p(n)&&(b=!0,T=["[","]"]),C(n)){var S=n.name?": "+n.name:"";v=" [Function"+S+"]"}if(w(n)&&(v=" "+RegExp.prototype.toString.call(n)),M(n)&&(v=" "+Date.prototype.toUTCString.call(n)),E(n)&&(v=" "+c(n)),0===h.length&&(!b||0==n.length))return T[0]+v+T[1];if(i<0)return w(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var _;return _=b?l(e,n,i,g,h):h.map(function(t){return f(e,n,i,g,t,b)}),e.seen.pop(),d(_,v,T)}function u(e,t){if(T(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return v(t)?e.stylize(""+t,"number"):h(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,i,r){for(var o=[],a=0,s=t.length;a<s;++a)O(t,String(a))?o.push(f(e,t,n,i,String(a),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(f(e,t,n,i,r,!0))}),o}function f(e,t,n,i,r,o){var a,u,c;if(c=Object.getOwnPropertyDescriptor(t,r)||{"value":t[r]},c.get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),O(i,r)||(a="["+r+"]"),u||(e.seen.indexOf(c.value)<0?(u=g(n)?s(e,c.value,null):s(e,c.value,n-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),T(a)){if(o&&r.match(/^\d+$/))return u;a=JSON.stringify(""+r),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function d(e,t,n){var i=0,r=e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function p(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function g(e){return null===e}function m(e){return null==e}function v(e){return"number"==typeof e}function y(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function T(e){return void 0===e}function w(e){return S(e)&&"[object RegExp]"===x(e)}function S(e){return"object"==typeof e&&null!==e}function M(e){return S(e)&&"[object Date]"===x(e)}function E(e){return S(e)&&("[object Error]"===x(e)||e instanceof Error)}function C(e){return"function"==typeof e}function _(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function x(e){return Object.prototype.toString.call(e)}function I(e){return e<10?"0"+e.toString(10):e.toString(10)}function N(){var e=new Date,t=[I(e.getHours()),I(e.getMinutes()),I(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function A(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}function R(t){function n(){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var r=n.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return r.apply(o,arguments)};t.apply(this,n).then(function(t){e.nextTick(a,null,t)},function(t){e.nextTick(A,t,a)})}if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,D(t)),n}var D=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++)n[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return n},L=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(e).replace(L,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),s=r[n];n<o;s=r[++n])a+=g(s)||!S(s)?" "+s:" "+i(s);return a},t.deprecate=function(n,i){function r(){if(!o){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}if("undefined"!=typeof e&&e.noDeprecation===!0)return n;if("undefined"==typeof e)return function(){return t.deprecate(n,i).apply(this,arguments)};var o=!1;return r};var k,U={};t.debuglog=function(n){if(T(k)&&(k=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!U[n])if(new RegExp("\\b"+n+"\\b","i").test(k)){var i=e.pid;U[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,i,e)}}else U[n]=function(){};return U[n]},t.inspect=i,i.colors={"bold":[1,22],"italic":[3,23],"underline":[4,24],"inverse":[7,27],"white":[37,39],"grey":[90,39],"black":[30,39],"blue":[34,39],"cyan":[36,39],"green":[32,39],"magenta":[35,39],"red":[31,39],"yellow":[33,39]},i.styles={"special":"cyan","number":"yellow","boolean":"yellow","undefined":"grey","null":"bold","string":"green","date":"magenta","regexp":"red"},t.isArray=p,t.isBoolean=h,t.isNull=g,t.isNullOrUndefined=m,t.isNumber=v,t.isString=y,t.isSymbol=b,t.isUndefined=T,t.isRegExp=w,t.isObject=S,t.isDate=M,t.isError=E,t.isFunction=C,t.isPrimitive=_,t.isBuffer=n(118);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",N(),t.format.apply(t,arguments))},t.inherits=n(119),t._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e};var F="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;t.promisify=function(e){function t(){for(var t,n,i=new Promise(function(e,i){t=e,n=i}),r=[],o=0;o<arguments.length;o++)r.push(arguments[o]);r.push(function(e,i){e?n(e):t(i)});try{e.apply(this,r)}catch(a){n(a)}return i}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(F&&e[F]){var t=e[F];if("function"!=typeof t)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,F,{"value":t,"enumerable":!1,"writable":!1,"configurable":!0}),t}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),F&&Object.defineProperty(t,F,{"value":t,"enumerable":!1,"writable":!1,"configurable":!0}),Object.defineProperties(t,D(e))},t.promisify.custom=F,t.callbackify=R}).call(t,n(107))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function e(){n(this,e),this.records={},this.outputTimeout=-1}return e.prototype.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.start=function(e){this.records[e]||(this.records[e]={}),this.records[e].start=(new Date).getTime(),this.records[e].show=!1},e.prototype.end=function(e){this.records[e]||(this.records[e]={}),this.records[e].end=(new Date).getTime(),this.records[e].show=!1},e.prototype.list=function(){var e=this;this.outputTimeout===-1&&(this.outputTimeout=setTimeout(function(){for(var t=Object.keys(e.records),n=0,i=t.length;n<i;n+=1){var r=t[n],o=e.records[r],a=o.start,s=o.end,u=o.show;u||console.log(r+": 耗时"+(s-a)/1e3+"秒"),e.records[r].show=!0}clearTimeout(e.outputTimeout),e.outputTimeout=-1},1e3))},e.prototype.report=function(){},e}(),r=i.prototype.getInstance();window.NT_TIMING=r,t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";n(122)},function(e,t,n){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function i(){try{K["default"].execute("loadScript"),window.singleChatPage&&NTKF.innerOpenChat(),NTKF.inited=!0}catch(e){NTKF.inited=!0}NT_TIMING.end("加载core脚本"),te.flag&&(NTKF.innerOpenChat(te.templateid),te={"flag":!1,"templateid":""})}n(123);var r=n(124),o=t(r),a=n(125),s=t(a),u=n(131),c=t(u),l=n(169),f=t(l),d=n(175),p=t(d),h=n(156),g=t(h),m=n(130),v=t(m),y=n(151),b=t(y),T=n(154),w=t(T),S=n(141),M=t(S),E=n(166),C=t(E),_=n(149),x=t(_),I=n(173),N=t(I),O=n(153),A=t(O),R=n(168),D=t(R),L=n(158),k=t(L),U=n(176),P=(t(U),n(171)),F=t(P),j=n(126),G=t(j),V=n(113),B=n(162),H=n(142),q=t(H),z=n(161),K=t(z),Y=n(177),W=t(Y);window.NT_LANG||(window.NT_LANG=n(181),window.NT_LANG_TYPE="zh-cn");var $=["kf_3004","kf_9015","kf_9051"],Q=1,J=2;setTimeout(function(){var t=c["default"].getSiteid();return t&&$.indexOf(t)>-1?(NTKF.stopAutoInit(),n(182)("./"+t+".js"),e.initLevel=e.initLevel||J,void NTKF.init()):void(NTKF.autoInit&&(e.initLevel=J,NTKF.init()))},0),(0,o["default"])("autoInit",!0),(0,o["default"])("stopAutoInit",function(){G["default"].trace("停止默认初始化",j.INFO),NTKF.autoInit=!1}),(0,o["default"])("setCustomerInfo",function(e){if(NTKF.inited)xn("im_updatePageInfo",e);else{window.NTKF_PARAM||(window.NTKF_PARAM={});var t=Object.keys(e);t.forEach(function(t){"exterinfo"===t?g["default"].setExternalInfo(e[t]):NTKF_PARAM[t]=e[t]})}}),(0,o["default"])("setLanguage",function(e){(0,W["default"])(e)});var X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments[1];return v["default"].init(),c["default"].init().then(function(){b["default"].request().then(function(){Promise.all([x["default"].init(),N["default"].init()])}).then(function(){A["default"].init()}).then(function(){return i()}).then(function(){return e(t)})})["catch"](function(e){G["default"].trace(e,j.ERROR)})};(0,o["default"])("login",function(e,t){X(e,t)}),(0,o["default"])("init",function(){c["default"].init().then(f["default"].init()).then(p["default"].init()).then(g["default"].init()).then(D["default"].init())["catch"](function(e){G["default"].trace(e,j.ERROR)}),e.initLevel!==Q&&X()}),(0,o["default"])("setCallback",function(e){K["default"].set(e)}),(0,o["default"])("setWapTheme",function(e){window.NT_WAP_THEME=e}),setTimeout(function(){V.Terminal.ielt9&&(NTKF.inited=!0)},2e3);var Z=e.customUIAddress,ee=!1,te={"flag":!1,"templateid":""};window.NTKF.innerOpenChat=function(e){if(NT_TIMING.start("打开聊窗"),!NTKF.inited)return te.flag=!0,void(te.templateid=e);if(C["default"]&&C["default"].isCalling())return void alert("正在音视频通话，请结束通话后再次请求！");if(!v["default"].enable_chat)return void K["default"].execute("identityAuth",[v["default"].chat_toast]);if(!NTKF.clickTooQuick){NTKF.clickTooQuick=!0,setTimeout(function(){NTKF.clickTooQuick=!1},2e3),G["default"].trace("base: 正在执行打开聊窗方法! ",j.INFO),!e&&window.NTKF_PARAM&&(e=window.NTKF_PARAM.settingid||""),c["default"].set("templateid",e);try{f["default"].remove(l.CARRY_CHAT_INFO)}catch(t){}var n=function(){var t=function i(){return A["default"].inited?(G["default"].trace("聊天窗口初始化完毕",j.INFO),NT_TIMING.end("加载设置"),M["default"].receiveOpenChatEvent(k["default"].get("autoconnect"),e),void K["default"].execute("openChat")):void setTimeout(function(){i()},100)},n=function(){s["default"].handleSettingFail("加载失败，请检查您的网络后重试!")};NT_TIMING.start("加载设置"),k["default"].init(t,n)};if(V.Terminal.mobile)k["default"].init(function(){(0,B.LoadScript)("ntapp",function(){NT_UI.render("init",n)})});else{var i=B.LoadCDNScript;Z||(i=B.LoadScript,Z="ntui"),NT_TIMING.start("加载ui脚本");var r=function(){s["default"].init(),ee=!0,G["default"].trace("base: 聊天窗口初始化",j.INFO),NT_UI.render("init",n),G["default"].trace("base: 自定义ui加载完毕，地址："+Z,j.INFO),NT_TIMING.end("加载ui脚本")};window.NT_UI?r():i(Z,function(){K["default"].execute("loadUIScript"),r()})}}},(0,o["default"])("setCustomMinChat",function(e){k["default"].set("customMinChat",e)}),(0,o["default"])("setStaffserviceConfig",function(e){k["default"].set("setStaffserviceConfig",e)}),(0,o["default"])("im_openInPageChat",function(t){G["default"].trace("base: 用户调用打开聊窗方法, 请求模板为"+t,j.INFO),e.initLevel===Q?X(NTKF.innerOpenChat,t):NTKF.innerOpenChat(t)}),(0,o["default"])("setCustomUIAddress",function(e){Z=e,ee&&NT_UI.render("Close")}),(0,o["default"])("im_updatePageInfo",function(e){var t={},n=["settingid","uid","uname","userlevel","orderid","orderprice","itemid","itemparam","ntalkerparam","erpparam","appname","system","ip","country","province","city","ref","trailurl","trailtitle","startpage","exterinfo","encryption","sign"],i=new Promise(function(i,r){var o=function(i){var r=!1;n.forEach(function(n){if(n==i)return r=!0,void(t[i]=e[i])}),r||G["default"].trace("目前不允许修改的参数: "+i,j.WARN)};for(var a in e)o(a);"{}"!=JSON.stringify(t)&&i(t)});e.exterinfo&&g["default"].setExternalInfo(e.exterinfo),e.uid&&(c["default"].set("login",e.uid),c["default"].set("uid",e.uid),x["default"].set("loginid",e.uid));var r=x["default"].getNTID();A["default"].inited=!1,i.then(function(){return c["default"].setParams(t)}).then(function(){return b["default"].request()}).then(function(){Promise.all([x["default"].init(),N["default"].init()])}).then(function(){r!==x["default"].getNTID()?(A["default"].destroy(),A["default"].init(!0)):A["default"].inited=!0}).then(function(){M["default"].conversationList.forEach(function(e){e.isMemberActive(r)&&e.isValid()&&(r!==x["default"].getNTID()?(e.rebuild(!1),e.request()):e.enter(r,!0))})})["catch"](function(e){console.log(e)})}),(0,o["default"])("openChat",function(t){NT_TIMING.start("打开聊窗"),NT_TIMING.start("加载core脚本"),e.initLevel===Q?X(NTKF.innerOpenChat,t):NTKF.innerOpenChat(t)}),(0,o["default"])("chatBtn",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{"bottom":"30px","right":"30px"},n=t.bottom,i=t.right,r=new Image;r.id="nt-ui-chatBtn",r.src=e.sourceURI+"/images/min/chatBtn.png",r.style="position:fixed;bottom:"+n+";right:"+i+";z-index:66647;cursor:pointer",r.onclick=function(){return xn("openChat")},document.body.appendChild(r)});var ne={};(0,o["default"])("config",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.hideDisconnectMessage&&(w["default"].addAutoDisconnectMessage=function(){}),
e.mui&&(ne.hideMinChat=e.mui.hideMinChat)}),(0,o["default"])("muiConfig",function(){return ne}),setTimeout(function(){window.NT_UI||V.Terminal.mobile||(0,B.LoadCDNScript)(Z,function(){K["default"].execute("loadUIScript")})},2e3),window.xn&&window.xn.todoList&&window.xn.todoList.forEach(function(e){1===e.length?NTKF[e[0]]?NTKF[e[0]]():G["default"].trace("亲，您使用的方法："+e[0]+", 小能暂时没有提供哦！",j.ERROR):2===e.length&&(NTKF[e[0]]?NTKF[e[0]](e[1]):G["default"].trace("亲，您使用的方法："+e[0]+", 小能暂时没有提供哦！",j.ERROR))}),window.xn=function(e,t){return NTKF[e]?"setCallback"===e?NTKF[e].apply(this,[t]):NTKF[e].apply(this,t&&t instanceof Array?t:[t]):void G["default"].trace("亲，您使用的方法：, 小能暂时没有提供哦！",j.ERROR)},window.NT_CORE={"PageManage":p["default"],"MessagePool":w["default"],"ConversationPool":M["default"],"RTCManage":C["default"],"Enterprise":g["default"],"ServerConfig":v["default"],"SettingConfig":k["default"],"NTParam":c["default"],"Visitor":x["default"],"PubSub":q["default"],"IM":A["default"],"AutoDisconnect":F["default"]}}).call(t,n(112))},function(e,t,n){(function(e){"use strict";var t=window._customization_xn_siteid_||"";t.indexOf("zz_")>-1?(e.themeConfig={"primaryColor":"#ff4646","secondaryColor":"#ffdcdc"},e.resourcePath=e.sourceURI+"/images/red/"):"kf_20100"===t?(e.themeConfig={"primaryColor":"#0a83d6","secondaryColor":"#3a9cde"},e.resourcePath=e.sourceURI+"/images/suoni/"):"kf_20132"===t?(e.themeConfig={"primaryColor":"#FE5F5C","secondaryColor":"#FE7F7C"},e.resourcePath=e.sourceURI+"/images/20132/"):(e.themeConfig={"primaryColor":"#06a9f4","secondaryColor":"#e5effd"},e.resourcePath=e.sourceURI+"/images/blue/")}).call(t,n(112))},function(e,t){"use strict";t.__esModule=!0;var n=function(e,t){window.NTKF||(window.NTKF={}),window.NTKF[e]=t};t["default"]=n,e.exports=t["default"]},function(e,t,n){(function(i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var a=n(126),s=r(a),u=n(127),c=r(u),l=n(128),f=n(129),d=r(f),p=n(130),h=r(p),g=n(140),m=r(g),v=n(156),y=r(v),b=n(141),T=r(b),w=n(131),S=r(w),M=n(154),E=r(M),C=n(166),_=r(C),x=n(124),I=r(x),N=n(172),O=n(158),A=r(O),R=n(171),D=r(R),L=n(113),k=n(139),U=r(k),P=n(161),F=r(P),j=n(173),G=r(j),V=c["default"].MESSAGE_DOCUMENT_TXT,B=c["default"].MESSAGE_DOCUMENT_IMAGE,H=c["default"].MESSAGE_DOCUMENT_FILE,q=c["default"].MESSAGE_DOCUMENT_VIDEO,z=c["default"].MESSAGE_DOCUMENT_AUDIO,K=function(){function e(){o(this,e)}return e.prototype.getInstance=function(){if(!this.instance){var t=this,n=new e;Object.keys(Object.getPrototypeOf(n)).forEach(function(e){"function"==typeof n[e]&&"getInstance"!==e&&(n["do"+e]=n[e],n[e]=function(){for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];return window.NT_UI&&NT_UI.isCustom?n["do"+e].apply(t,r):null})}),this.instance=n,this.minimumHover=!1,this.tool=[],this.alreadyListen=!1,this.initPosition={},this.firstTimeSetPosition=!0,this.lastPredictMessage="我想说..."}return this.instance},e.prototype.init=function(){(0,I["default"])("closeChat",this.closeChat.bind(this)),(0,I["default"])("openMinimum",this.openMinimum.bind(this)),(0,I["default"])("resizeChat",this.resizeChat.bind(this)),(0,I["default"])("setConversationIndex",this.setConversationIndex.bind(this)),(0,I["default"])("faqMessage",this.faqMessage.bind(this)),(0,I["default"])("getHistoryData",this.getHistoryData.bind(this)),(0,I["default"])("handleToStaffService",this.handleToStaffService.bind(this)),(0,I["default"])("upload",this.upload),(0,I["default"])("sendMessage",this.sendMessage.bind(this)),(0,I["default"])("sendTextMessage",this.sendTextMessage.bind(this)),(0,I["default"])("sendImageMessage",this.sendImageMessage.bind(this)),(0,I["default"])("sendFileMessage",this.sendFileMessage.bind(this)),(0,I["default"])("sendVideoMessage",this.sendVideoMessage.bind(this)),(0,I["default"])("sendSystemMessage",this.sendSystemMessage.bind(this)),(0,I["default"])("sendMagicMessage",this.sendMagicMessage.bind(this)),(0,I["default"])("evaluate",this.evaluate.bind(this)),(0,I["default"])("showEvaluate",this.showEvaluate.bind(this)),(0,I["default"])("hideEvaluate",this.hideEvaluate.bind(this)),(0,I["default"])("updateEvaluate",this.updateEvaluate.bind(this)),(0,I["default"])("submitEvaluate",this.submitEvaluate.bind(this)),(0,I["default"])("closeEvaluate",this.closeEvaluate.bind(this)),(0,I["default"])("ChangeToMessage",this.leaveMessage.bind(this)),(0,I["default"])("submitLeaveMessageSuccess",this.submitLeaveMessageSuccess.bind(this)),(0,I["default"])("magicSubmitLeaveMessage",this.magicSubmitLeaveMessage.bind(this)),(0,I["default"])("pasteImageMessage",this.pasteImageMessage.bind(this)),(0,I["default"])("acceptRTCInvite",_["default"].acceptInvite.bind(_["default"])),(0,I["default"])("refuseRTCInvite",_["default"].refuseInvite.bind(_["default"])),(0,I["default"])("createRTCView",_["default"].createRTCView.bind(_["default"])),(0,I["default"])("RTCViewClose",_["default"].RTCViewClose.bind(_["default"])),(0,I["default"])("RTCTypeChange",_["default"].RTCTypeChange.bind(_["default"])),(0,I["default"])("MicrophoneChange",_["default"].RTCMicrophoneChange.bind(_["default"])),(0,I["default"])("setVolume",_["default"].setVolume.bind(_["default"])),(0,I["default"])("RTCViewMin",_["default"].renderViewMin.bind(_["default"])),(0,I["default"])("CameraInvite",_["default"].sponsorInvite.bind(_["default"])),(0,I["default"])("RTCViewOpen",_["default"].RTCViewOpen.bind(_["default"])),(0,I["default"])("sendMessageChange",this.sendMessageChange.bind(this)),this.listenMagicMessage(),this.alreadyListen=!0},e.prototype.listenMagicMessage=function(){var e=this;if(!this.alreadyListen){var t=function(t){switch(t.method){case"scrollHeight":NT_UI.scrollMessageBoxByMagic(t.value);break;case"windowHeight":NT_UI.publish("magic"+t.msg.uri,{"height":t.msg.heightSe}),NT_UI.scrollMessageBoxBottom(t.msg.heightSe);break;case"SendMessage":e.sendMessage(""+t.msg[2],V);break;case"OpenWebUrl":window.open(y["default"].executeUrlReplaceRule(""+t.url))}};L.Terminal.ielt9?window.attachEvent("onmessage",function(e){var n=JSON.parse(e.data);t(n)}):window.addEventListener&&window.addEventListener("message",function(e){var n=e.data;t(n)})}},e.prototype.sendMessageChange=function(){var e=this;clearTimeout(this.sendPredictMessageTimeout),clearTimeout(this.listenTextTimeout),this.listenTextTimeout=setTimeout(function(){var t=document.getElementById("nt-ui-send-message-textarea"),n=m["default"].getCurrentConverid(),i=T["default"].findConversationByConverid(n);if(t&&n){var r=NT_UI.initValueManage["chat-mainsection-textarea-placeholder"],o=t.innerHTML||"";o===r&&(o=""),e.sendPredictMessageTimeout=setTimeout(function(){e.sendPredictMessage(o)},800),o=o.replace(/<\/?[^>]*>/g,""),o?i.getAssistList(o).then(function(e){NT_UI.setRobotAssistList(e)})["catch"](function(){}):NT_UI.setCustomStyle("chat-mainsection","toolbar-robotassist",{"display":"none"})}},500)},e.prototype.pasteImageMessage=function(){E["default"].addSystemMessage({"sysMsgType":"failure","msg":NT_LANG.pasteMultiPictureSystemMessage})},e.prototype.leaveMessage=function(){var e=m["default"].getCurrentConverid();if(e){var t=T["default"].findConversationByConverid(e);this.showLeaveMessage(t.converid)}NT_UI.render("ChatLeaveMessage")},e.prototype.submitLeaveMessageSuccess=function(e){var t=h["default"].get("leaveUrl"),n=m["default"].getCurrentConverid();if(n){var i=T["default"].findConversationByConverid(n),r=i.getLeaveMessageKfid(),o=i.getForbidden(),a={"siteid":i.waitersiteid||S["default"].get("siteid"),"kfid":r||"","templateid":S["default"].get("templateid"),"content":e.content,"guestid":NT_CORE.Visitor.get("userid"),"guestname":e.name||NT_CORE.Visitor.get("username"),"email":e.email,"phone":e.phone,"start_page_url":window.location.href,"start_page_titl":document.title,"terminal":L.Terminal.terminal,"forbidden":o};(0,U["default"])(t,{"method":"POST","headers":{"content-type":"application/json"},"body":JSON.stringify(a)}).then(function(e){e.success?(NT_UI.render("ChatLeaveMessageSuccess"),NT_UI.setCustomData("leaveMessageSuccess-successContent",NT_LANG.leaveMessageSuccessToast)):window.alert(NT_LANG.leaveMessageFailureToast)})}},e.prototype.magicSubmitLeaveMessage=function(e){var t=h["default"].get("leaveUrl"),n=m["default"].getCurrentConverid();if(n){var i=T["default"].findConversationByConverid(n),r=e.kfid||i.getLeaveMessageKfid(),o=i.getForbidden(),a={"siteid":S["default"].get("siteid"),"kfid":r||"","templateid":S["default"].get("templateid"),"content":e.content,"guestid":NT_CORE.Visitor.get("userid"),"guestname":e.name||NT_CORE.Visitor.get("username"),"email":e.email,"phone":e.phone,"start_page_url":window.location.href,"start_page_titl":document.title,"terminal":L.Terminal.terminal,"forbidden":o};(0,U["default"])(t,{"method":"POST","headers":{"content-type":"application/json"},"body":JSON.stringify(a)})}},e.prototype.refreshIndex=function(){NT_UI.setChatInfosListIndex(m["default"].getIndex())},e.prototype.closeChat=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m["default"].getIndex(),n=void 0;if(n="number"==typeof t?T["default"].conversationList[t]:"string"==typeof t?T["default"].findConversationByConverid(t):t,!n)return void NT_UI.render("Close");var i=n.converid,r=m["default"].getIndexByConverid(i);n.isBusy()&&NTKF.exitQueue({"converid":""+n.converid,"templateid":""+n.requestTemplateid,"headto":0},!1);var o=function(){r===m["default"].getIndex()&&(m["default"].refreshIndex(),e.refreshIndex(),e.handleConversationData(),e.updateMessageData(m["default"].getCurrentConverid()))};return n.enforcementUseable?void A["default"].getEvaluateData(function(t){if(e.verifyEvaluateData(t)){var n=m["default"].getIndexByConverid(i);e.setConversationIndex(n),e.refreshIndex(),e.handleEvaluateData(t,l.ENFORCEMENT_EVALUATE,i)}else T["default"].receiveCloseChatEvent(i,o)}):(_["default"].isCalling()&&_["default"].RTCViewClose(),void T["default"].receiveCloseChatEvent(i,o))},e.prototype.setPosition=function(){if(this.firstTimeSetPosition){this.setInitPosition(A["default"].get("position"));var e=this.getInitPosition();NT_UI.setPosition(e),this.firstTimeSetPosition=!1}},e.prototype.setInitPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{"type":8},t=NT_UI.getCustomStyle("chat-wrapper").width,n=NT_UI.getCustomStyle("chat-wrapper").height;if(this.initPosition="",e.selector){var i=document.querySelector(e.selector);i&&"fixed"===i.style.position?(this.initPosition.top=parseInt(i.style.top,10),this.initPosition.left=parseInt(i.style.left,10)):e.type=8}var r=window.innerWidth||document.documentElement.clientWidth,o=window.innerHeight||document.documentElement.clientHeight,a=parseInt(t,10),s=parseInt(n,10),u=(r-a)/2>0?(r-a)/2:0,c=(o-s)/2>0?(o-s)/2:0;switch(e.type){case"0":this.initPosition={"left":0,"top":0};break;case"1":this.initPosition={"left":u,"top":0};break;case"2":this.initPosition={"left":r-a,"top":0};break;case"3":this.initPosition={"left":0,"top":c};break;case"4":this.initPosition={"left":u,"top":c};break;case"5":this.initPosition={"left":r-a,"top":c};break;case"6":this.initPosition={"left":0,"top":o-s};break;case"7":this.initPosition={"left":u,"top":o-s};break;default:this.initPosition={"left":r-a,"top":o-s}}if(e.offset&&e.offset instanceof Array)for(var l=["top","right","bottom","left"],f=0,d=e.offset.length;f<d;f+=1){var p=e.offset[f],h=l[f];null!=this.initPosition[h]&&p&&("string"==typeof this.initPosition[h]&&(this.initPosition[h]=parseInt(this.initPosition[h].replace("px",""),10)),"string"==typeof p&&(p=parseInt(p.replace("px",""),10)),this.initPosition[h]=this.initPosition[h]+p)}},e.prototype.getInitPosition=function(){return this.initPosition},e.prototype.openMinimum=function(){var e=m["default"].getCurrentConversationInfo(),t=e.kefuName,n=e.kefuLogo;A["default"].get("customMinChat")&&NT_UI.setValue("chat-mainsection-custom-minimum",A["default"].get("customMinChat")),NT_UI.setCustomData("minimum-kefuName",t),NT_UI.setCustomData("minimum-kefuLogo",n),F["default"].execute("openMinimum")},e.prototype.resizeChat=function(){var e=this;NT_UI.render("Chat",function(){var t=m["default"].getCurrentConverid(),n=m["default"].getIndexByConverid(t);e.setConversationIndex(n),e.refreshIndex(),"undefined"!=typeof NT_UI.setMagicMessages&&NT_UI.setMagicMessages instanceof Function&&NT_UI.setMagicMessages([]),NT_UI.setCustomStyle("minimum-miniMessage-wrapper","",{"display":"none"});var i=T["default"].findConversationByConverid(t);clearInterval(e.inner),i.chatwindowstatus="open",i.clearUnreadMessageCount(),NT_UI.scrollMessageBoxBottom()})},e.prototype.getHistoryData=function(){NT_CORE.MessagePool.requestHistoryMessage(m["default"].getCurrentConverid())},e.prototype.faqMessage=function(e){var t=void 0;t="string"==typeof e.answer?{"message":{"title":e.title,"content":e.answer},"msgtype":"faq","converid":m["default"].getCurrentConverid()}:{"message":"","msgtype":e.answer.msgtype,"position":e.answer.position,"params":e.answer.params,"converid":m["default"].getCurrentConverid()},E["default"].addMessage(t,!1),D["default"].refresh(m["default"].getCurrentConverid())},e.prototype.sendMagicMessage=function(e){var t={"message":"访客端超媒体","msgtype":15,"position":3,"params":e,"converid":m["default"].getCurrentConverid()};E["default"].addMessage(t,!0),D["default"].refresh(m["default"].getCurrentConverid())},e.prototype.addProductMessage=function(){this.lastPrid&&this.lastPrid===S["default"].get("prid")||(this.lastPrid=S["default"].get("prid"),G["default"].getProductInfo(function(e){var t={"converid":m["default"].getCurrentConverid(),"createat":(new Date).getTime(),"msgtype":"ntproduct","message":e};E["default"].addMessage(t,!1)}))},e.prototype.setConversationIndex=function(e){m["default"].setIndex(e),this.handleConversationData(),this.updateMessageData(m["default"].getCurrentConverid())},e.prototype.upload=function(e){var t=e.files,n=e.type,i=t[0],r=this,o=20971520,u=void 0,c=[];n===H?(u="/file/all",c=[".jpg",".jpeg",".bmp",".png",".gif",".pdf",".doc",".docx",".ppt",".pptx",".xls",".xlsx",".csv",".txt",".rar",".zip"]):(u="/file/image",c=[".jpg",".jpeg",".png",".gif",".bmp"]);try{for(var l=new window.FormData,f=!1,d=!1,p="",g=i.name.substring(i.name.lastIndexOf(".")).toLowerCase(),m=0;m<c.length;m+=1)if(c[m]===g){f=!0;break}if(f||(p=17===n?NT_LANG.uploadFileTypeErrorMessage:NT_LANG.uploadImageTypeErrorMessage),i.size<o&&(d=!0),d||(p=NT_LANG.uploadMaxSizeErrorMessage),p)return void this.sendSystemMessage({"sysMsgType":"failure","msg":p});var v=function(e){if("success"===e.status){var t=n===B?r.sendImageMessage:r.sendFileMessage;t({"url":e.url,"sourceurl":e.sourceurl,"name":i.name,"size":i.size,"downloadurl":h["default"].get("fileServer")+"/file/download?key="+e.key})}};l.append("file",i),l.append("path","/guest");try{(0,N.uploadFile)(h["default"].get("fileServer")+u,l,v)}catch(y){s["default"].trace("上传图片失败, "+y.getMessage(),a.ERROR)}}catch(y){s["default"].trace("浏览器不支持FormData",a.ERROR)}},e.prototype.uploadBase64=function(e){var t=this,n="/file/image";try{var i=new window.FormData,r=function(e){if("success"===e.status){var n={"url":e.url,"sourceurl":e.sourceurl,"name":"截图"+Date.parse(new Date),"downloadurl":h["default"].get("fileServer")+"/file/download?key="+e.key};t.sendImageMessage(n)}};i.append("base64String",e),i.append("path","/guest");try{(0,N.uploadFile)(h["default"].get("fileServer")+n,i,r)}catch(o){s["default"].trace("上传截图失败, "+o.getMessage(),a.ERROR)}}catch(o){s["default"].trace("浏览器不支持FormData",a.ERROR)}},e.prototype.sendTextMessage=function(){var e=this,t=document.getElementById("nt-ui-send-message-textarea"),n="chat-mainsection-textarea-placeholder",r=t.innerHTML,o=NT_UI.initValueManage[n],u=A["default"].get("setStaffserviceConfig")||{"custom":!0,"text":"转人工"};if(r!==o){if(r&&(r=r.replace(/<img.+?data-src=.+?>/g,function(e){var t=e.match(/(?=1f).+?(?=\.png)/g);return t&&1===t.length?"["+i.emojiRule[t[0]]+"]":e.indexOf("3297.png")>-1?"["+i.emojiRule["3297"]+"]":e}).replace(/&nbsp;/g," "),r=r.replace(/<img.+?src=.+?>/g,function(t){var n=/src=['"]?([^'"]*)['"]?/i;return e.uploadBase64(t.match(n)[1]),""}).replace(/&nbsp;/g," ")),r&&/<br>$/.test(r.trim())&&(r=r.substring(0,r.length-4)),/s*/g.test(r)&&(r=r.replace(/(^\s+)|(\s+$)/g,"")),!r)return void(t.innerHTML="");if(!u.custom||r!==u.text&&"人工"!==r&&"转人工"!==r)s["default"].trace("发送的内容是:"+r,a.INFO),this.sendMessage(r,V);else{var c=m["default"].getCurrentConverid(),l=T["default"].findConversationByConverid(c);l.isRobot()?this.handleToStaffService():this.sendMessage(r,V)}L.Terminal.ie8?t.value="":document.activeElement.id===t.id?t.innerHTML="":NT_UI.setCustomData(n,o),NT_UI.resetUploadImageList()}},e.prototype.sendImageMessage=function(e){this.sendMessage(e,B)},e.prototype.sendFileMessage=function(e){this.sendMessage(e,H)},e.prototype.sendVideoMessage=function(e){this.sendMessage(e,q)},e.prototype.sendSystemMessage=function(e){return E["default"].addSystemMessage(e)},e.prototype.sendMessage=function(e,t){E["default"].receiveSendMessageEvent(this.generateMessage(e,t)),D["default"].refresh(m["default"].getCurrentConverid())},e.prototype.generateMessage=function(e,t){var n=void 0;switch(t){case B:n={"uploadid":e.uploadid,"uploadstatus":e.uploadstatus,"message":e.name,"url":e.url,"sourceurl":e.sourceurl,"size":e.size,"downloadurl":e.downloadurl};break;case H:case q:case z:n={"message":e.name,"url":e.url,"size":e.size,"downloadurl":e.downloadurl};break;default:n={"message":e}}return Object.assign({"converid":m["default"].getCurrentConverid(),"msgtype":t},n)},e.prototype.sendPredictMessage=function(e){var t=this,n=e;n&&(n=n.replace(/<img.+?data-src=.+?>/g,function(e){var n=e.match(/(?=1f).+?(?=\.png)/g);return n&&1===n.length?"["+i.emojiRule[n[0]]+"]":e.indexOf("3297.png")>-1?"["+i.emojiRule["3297"]+"]":(t.pasteImageFlag=!0,"")}).replace(/&nbsp;/g," ")),n&&/<br>$/.test(n.trim())&&(n=n.substring(0,n.length-4)),/s*/g.test(n)&&(n=n.replace(/(^\s+)|(\s+$)/g,""));var r=this.lastPredictMessage;n!==r&&(this.lastPredictMessage=n,T["default"].receiveSendPredictMessageEvent(m["default"].getCurrentConverid(),n||""))},e.prototype.handleToStaffService=function(e){T["default"].receiveStaffserviceEvent(m["default"].getCurrentConverid(),e)},e.prototype.handleChatMessage=function(e){NT_UI.setChatMessage(NT_UI.CHATMESSAGE_KEY.item,e?{"display":"block"}:{"display":"none"})},e.prototype.handleScrollMessageBoxBottom=function(){NT_UI.scrollMessageBoxBottom()},e.prototype.handleChatToolbar=function(e,t){NT_UI.setChatToolbar(""+e,1===t?{"display":"inline-block"}:{"display":"none"}),this.tool.push(e)},e.prototype.handleConversationData=function(){var e=this,t=m["default"].getCurrentConverid(),n=m["default"].getCurrentConversationInfo(),i=n.kefuName,r=n.kefuLogo,o=n.kefuSignature;NT_UI.setCustomData("chat-header-kefuName",i),NT_UI.setCustomData("chat-header-kefuLogo",r),NT_UI.setCustomData("chat-header-kefuSignature",o);var u=T["default"].findConversationByConverid(t);A["default"].setToolbar(u.isRobot()),u.isLeaveMessage()?NT_UI.render("ChatLeaveMessage",function(){e.setPosition(e.getInitPosition()),e.showLeaveMessage(u.converid),NT_TIMING.end("打开聊窗")}):(s["default"].trace("chat组件开始渲染",a.INFO),NT_UI.setPredictData(u.predictMessage),NT_TIMING.start("聊窗渲染"),"Minimum"!==NT_UI.getViewState&&NT_UI.render("Chat",function(){e.setPosition(e.getInitPosition()),e.handleScrollMessageBoxBottom(),"undefined"!=typeof NT_UI.setMagicMessages&&NT_UI.setMagicMessages instanceof Function&&NT_UI.setMagicMessages([]),NT_TIMING.end("聊窗渲染"),NT_TIMING.end("打开聊窗")})),u.isSend()?this.tool.forEach(function(e){"staffservice"===e?NT_UI.setChatToolbar(""+e,{"color":"#06a9f4"}):NT_UI.setChatToolbar(""+e,{"color":"#777"}),NT_UI.setChatToolbar(""+e,{"hoverColor":"#111"}),NT_UI.publish("busy",!1),NT_UI.disabled&&(NT_UI.setChatToolbar("evaluate",{"color":"#DDD"}),NT_UI.setChatToolbar("evaluate",{"hoverColor":"#DDD"}))}):this.tool.forEach(function(e){NT_UI.setChatToolbar(""+e,{"color":"#DDD"}),NT_UI.setChatToolbar(""+e,{"hoverColor":"#DDD"}),NT_UI.publish("busy",!0),NT_UI.setMainsectionBusy(NT_LANG.waitToast)}),u.isEvaluateHide()||this.showEvaluate()},e.prototype.handleMessageData=function(e){var t=this,n=T["default"].findConversationByConverid(e);if(n){if("Minimum"===NT_UI.getViewState){clearInterval(this.inner),this.minimumHover=!1;var i=m["default"].getLastMessageByConverid(e);return n.allowAddUnReadMessageCount(!0),n.addUnreadMessageCount(),NT_UI.setCustomStyle("minimum-miniMessage-wrapper","",{"display":"block"}),NT_UI.setCustomData("minimum-miniMessage",i),NT_UI.setCustomData("minimum-kefuLogo",n.getLogo()),NT_UI.setCustomData("minimum-kefuName",""+NT_LANG.unreadMessageToast+n.unreadMessageCount+NT_LANG.unreadMessageToast2),A["default"].get("customMinChat")&&NT_UI.setValue("minimum-unreadMessageCount",n.unreadMessageCount),void(this.inner=setInterval(function(){t.minimumHover=!t.minimumHover,NT_UI.publish("minimumHover",t.minimumHover)},1e3))}if("close"!==n.chatwindowstatus)this.updateMessageData(e);else if(0!==A["default"].get("messageTips")&&m["default"].isAllChatClose())1===A["default"].get("messageTips")&&(NT_UI.render("Minimum"),this.handleMessageData(e));else{n.chatwindowstatus="open";var r=m["default"].getIndexByConverid(e);m["default"].setIndex(r),this.refreshIndex(),this.handleConversations(T["default"].conversationList),this.updateMessageData(e)}}},e.prototype.clearMinUnReadMessage=function(){if(A["default"].get("customMinChat")){var e=A["default"].get("customMinChat"),t=e.className,n=document.getElementsByClassName(t)[0];n&&document.querySelector(".nt-custom-minchat-wrapper")&&(n.removeChild(document.querySelector(".nt-custom-minchat-wrapper")),NT_UI.setValue("minimum-unreadMessageCount",0))}},e.prototype.updateMessageData=function(e){if(T["default"].conversationList.length>1&&NT_UI.setChatInfos(m["default"].getConversationListInfo()),e===m["default"].getCurrentConverid()){var t=E["default"].getMessagesByConverid(e).sort(M.sortMessageByCreateAt),n=[],i=[],r=[],o=[],u=0,c=!1,l=!1;t.forEach(function(e){var t=e.getNTUIMessage();12===t.msgtype&&(e.imageIndex=u,u+=1,r.push(t)),10===e.position?(i.push(e),window.sessionStorage.setItem("xn_magic_message_p10",JSON.stringify(e)),c=!0):11===e.position?o.indexOf(e.messageid)<0?(o.push(e.messageid),i.push(e),l=!0):l=!1:n.push(e)}),s["default"].trace("LogicService: 会话id为"+e+"的消息传递到UI层",a.INFO),NT_UI.setMessages(n,r),c||l||!window.sessionStorage.getItem("xn_magic_message_p10")||i.push(JSON.parse(window.sessionStorage.getItem("xn_magic_message_p10"))),i.length>0&&"undefined"!=typeof NT_UI.setMagicMessages&&NT_UI.setMagicMessages instanceof Function&&(window.sessionStorage.setItem("xn_magic_message",JSON.stringify(i[i.length-1])),NT_UI.setMagicMessages(i))}},e.prototype.handleFaqData=function(e){NT_UI.setFaqData(e)},e.prototype.verifyEvaluateData=function(e){return!!(e&&200===e.code&&e.data&&Array.isArray(e.data.conversationEvaluationItems))},e.prototype.evaluate=function(){var e=this;A["default"].getEvaluateData(function(t){e.handleEvaluateData(t,l.EVALUATE)})},e.prototype.getEvaluateData=function(){return NT_UI.getEvaluateData()},e.prototype.handleEvaluateData=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m["default"].getCurrentConverid();if(this.verifyEvaluateData(e)){var i=T["default"].findConversationByConverid(n),r=e.data.conversationEvaluationItems,o=e.data.evaluationButton,a=new d["default"](r,o);i.setEvaluateViewModel(a),i.setEvaluateSubmitType(t),this.showEvaluate()}},e.prototype.updateEvaluate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m["default"].getCurrentConverid(),n=T["default"].findConversationByConverid(t),i=n.getEvaluateViewModel();i.updateViewData(e),n.setEvaluateViewModel(i),this.showEvaluate()},e.prototype.showEvaluate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m["default"].getCurrentConverid(),t=T["default"].findConversationByConverid(e);t.setEvaluateHide(!1)},e.prototype.hideEvaluate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m["default"].getCurrentConverid(),t=T["default"].findConversationByConverid(e);t.setEvaluateHide(!0)},e.prototype.handleEvaluateResult=function(e){for(var t=this,n=e.converid,i=T["default"].conversationList,r=function(e,r){var o=i[e];o.converid!==n&&o.lastConverid!==n||o.getEvaluateSubmitType()===l.ENFORCEMENT_EVALUATE&&(o.enforcementUseable=!1,setTimeout(function(){t.closeChat(o.converid)},200))},o=0,a=i.length;o<a;o+=1)r(o,a)},e.prototype.closeEvaluate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m["default"].getCurrentConverid(),t=T["default"].findConversationByConverid(e);t.initiativeUseable=!1,t.enforcementUseable=!1},e.prototype.setToolBarDisabled=function(e,t){0===t?(NT_UI.setChatToolbar(""+e,{"color":"#DDD"}),NT_UI.setChatToolbar(""+e,{"hoverColor":"#DDD"}),NT_UI.disabled=!0,NT_UI.key=e):(NT_UI.setChatToolbar(""+e,{"color":"#777"}),NT_UI.setChatToolbar(""+e,{"hoverColor":"#111"}),NT_UI.disabled=!1)},e.prototype.submitEvaluate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m["default"].getCurrentConverid(),n=T["default"].findConversationByConverid(t);n.submitEvaluate(e)},e.prototype.handleLogoData=function(e){NT_UI.setLogoData(e&&"null"!==e?i.httpURI(e):"")},e.prototype.handleTabData=function(e){return NT_UI.setTabData(e)},e.prototype.handleTabPanelData=function(e){NT_UI.setTabPanelData(e)},e.prototype.handlePredictMessage=function(e,t){var n=T["default"].findConversationByConverid(t);n&&n.setPredictMessage(e),t===m["default"].getCurrentConverid()?(NT_UI.setPredictData(e),NT_UI.setCustomStyle("chat-supportIcon","",{"display":"inline-block"})):NT_UI.setCustomStyle("chat-supportIcon","",{"display":"none"})},e.prototype.clearPredictMessage=function(e){var t=T["default"].findConversationByConverid(e);t&&(t.clearPredictMessage(),NT_UI.setCustomStyle("chat-supportIcon","",{"display":"none"}),NT_UI.setPredictData(t.predictMessage))},e.prototype.handleAutoExpansion=function(e){1===e&&NT_UI.UIEvent.isHide("chat-sidebar","wrapper")&&NT_UI.UIEvent.show("chat-sidebar","wrapper",NT_UI.toggleSideBar.call(NT_UI,1)),0===e&&(NT_UI.option=!1,NT_UI.UIEvent.isHide("chat-sidebar","wrapper")||NT_UI.UIEvent.show("chat-sidebar","wrapper",NT_UI.toggleSideBar.call(NT_UI,-1)))},e.prototype.handleCloseMore=function(){NT_UI.setCustomStyle("chat-mainsection-toolbar","more",{"display":"none"})},e.prototype.getLeaveMessageData=function(){return NT_UI.getLeaveMessageData()},e.prototype.showLeaveMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m["default"].getCurrentConverid(),t=T["default"].findConversationByConverid(e);t.leaveMessage(),t.setLeaveMessageHide(!1),NT_UI.setCustomData("chat-header-kefuName",t.getName()),NT_UI.setCustomData("chat-header-kefuLogo",t.getLogo()),NT_UI.setCustomData("chat-header-kefuSignature",t.getSignature())},e.prototype.updateLeaveMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m["default"].getCurrentConverid(),n=T["default"].findConversationByConverid(t),i=n.getLeaveMessageViewModel();i.updateViewData(e),n.setLeaveMessageViewModel(i),this.showLeaveMessage()},e.prototype.submitLeaveMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m["default"].getCurrentConverid(),t=T["default"].findConversationByConverid(e);t.submitLeaveMessageSuccess()},e.prototype.handleSettingFail=function(e){NT_UI.render("SettingFail",function(){NT_UI.setCustomStyle("chat-header","min",{"display":"none"}),NT_UI.setCustomStyle("chat-header","kefuLogo",{"display":"none"}),NT_UI.setCustomData("chat-settingFail-text",e)})},e.prototype.handleSettingLoading=function(){var e=this;L.Terminal.ie8||NT_UI.render("ChatLoadingSetting",function(){e.setPosition()})},e.prototype.handleConversations=function(e){for(var t=[],n=0,i=e.length;n<i;n+=1){var r=e[n];("open"===r.chatwindowstatus||r.isVisitorActive()||r.isLeaveMessage())&&t.push(r)}if(0===t.length)s["default"].trace("LogicService: 所有会话均被关闭",a.INFO),NT_UI.render("Close");else if(1===t.length)s["default"].trace("LogicService: 有1个活跃会话，会话id为："+t[0].converid,a.INFO),NT_UI.setCloseChatInfos(),"Chat"===NT_UI.getViewState&&this.handleMessageData(t[0].converid),this.handleConversationData();else if(t.length>1){s["default"].trace("LogicService: 有多个活跃会话，打开左侧会话列表，会话id为："+t.map(function(e){return e.converid}).join(","),a.INFO);var o=m["default"].getConversationListInfo();NT_UI.setChatInfos(o),NT_UI.setOpenChatInfos(),this.handleConversationData()}},e.prototype.handleRTCView=function(e){NT_UI.renderRTC(e)},e.prototype.handleRTCKfName=function(){var e=m["default"].getCurrentConversationInfo(),t=e.kefuName;NT_UI.setCustomData("rtc-acceptedview-call-kfName",t)},e}();t["default"]=K.prototype.getInstance(),e.exports=t["default"]}).call(t,n(112))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return o(e,2)}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=""+Math.abs(e),r=t-i.length,o=e>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}t.__esModule=!0,t.NO_SITEID_ERROR=t.LANG_IMSTATUS=t.ERROR=t.WARN=t.DEBUG=t.INFO=void 0;var a,s=n(113),u=1,c=2,l=3,f=4,d={"init":"初始化","connect":"正在连接","discconnect":"断开连接","success":"连接成功","failure":"连接失败","handshake":"握手成功"},p=(a={},a[u]="green",a[l]="orange",a[f]="red",a),h=function(){function e(){i(this,e);var t=window.location.href,n=t.indexOf("xndebug=all")>-1||t.indexOf("xndebug=core")>-1;this.debugLevel=n?0:3}return e.prototype.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.trace=function(e,t){t>this.debugLevel&&(s.Terminal.chrome?console.log("%c"+this.time()+" "+e,"color: "+p[t]):console.log(this.time()+" "+e))},e.prototype.debug=function(){this.debuglevel=0},e.prototype.submit=function(e){},e.prototype.time=function(){var e=new Date,t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+r(e.getHours())+"-"+r(e.getMinutes())+"-"+r(e.getSeconds())+"-"+r(e.getMilliseconds(),!0);return t},e}();t["default"]=h.prototype.getInstance(),t.INFO=u,t.DEBUG=c,t.WARN=l,t.ERROR=f,t.LANG_IMSTATUS=d;t.NO_SITEID_ERROR="错误：未集成企业id(siteid)"},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i,r,o=(r=i=function a(){n(this,a)},i.NETWORK_MESSAGE=-1,i.MESSAGE_HANDSHAKE=0,i.MESSAGE_KEEPALIVE=1,i.MESSAGE_DISCONNECT=2,i.MESSAGE_INVALID=3,i.MESSAGE_QUEST=4,i.MESSAGE_ORDER=5,i.MESSAGE_DOCUMENT=6,i.MESSAGE_EVENT=7,i.MESSAGE_RESULT=8,i.MESSAGE_SYNCH=9,i.MESSAGE_REQUEST=10,i.MESSAGE_DOCUMENT_TXT=11,i.MESSAGE_DOCUMENT_IMAGE=12,i.MESSAGE_DOCUMENT_AUDIO=13,i.MESSAGE_DOCUMENT_VIDEO=14,i.MESSAGE_DOCUMENT_SYSTEM=19,i.MESSAGE_DOCUMENT_MAGIC=15,i.MESSAGE_DOCUMENT_FILE=17,i.MESSAGE_DOCUMENT_RICH_MEDIA=18,i.MESSAGE_DOCUMENT_COMMAND=19,i.MESSAGE_DOCUMENT_SEPARATION=20,i.STATUS_USER_OFFLINE=21,i.STATUS_USER_ONLINE=22,i.STATUS_SESSION_BUSY=23,i.STATUS_SESSION_AWAY=24,i.STATUS_SESSION_HIDE=25,i.STATUS_CONVERSATION_CREATE=31,i.STATUS_CONVERSATION_DESTROY=32,i.STATUS_CONVERSATION_FORZEN=33,i.STATUS_CONVERSATION_MEMBER_JOIN=34,i.STATUS_CONVERSATION_MEMBER_LEAVE=35,i.STATUS_CONVERSATION_MEMBER_FORZEN=36,i.STATUS_CONVERSATION_MEMBER_FREE=37,i.STATUS_MESSAGE_SEND_SENT=41,i.STATUS_MESSAGE_SEND_FAILED=42,i.STATUS_MESSAGE_SEND_RECEIVED=43,i.STATUS_MESSAGE_SEND_READ=44,i.STATUS_MESSAGE_SEND_DOWNLOAD=45,i.STATUS_MESSAGE_SEND_CANCEL=46,i.STATUS_MESSAGE_RECEIVE_MULTIPLE=47,i.STATUS_MESSAGE_RECEIVE_READ=48,i.STATUS_MESSAGE_RECEIVE_LISTENED=49,i.RESULT_MESSAGE_HANDLESHAKE=61,i.RESULT_MESSAGE_DISCONNECT=62,i.RESULT_MESSAGE_KEEPLIVE=63,i.REQUEST_MESSAGE_HISTORY=71,r);t.MESSAGE_DOCUMENT_PRODUCT="ntproduct",t.MESSAGE_DOCUMENT_SYSTEM="ntsystem",t.MESSAGE_DOCUMENT_NTCOMMONQUESTION="faq",t.MESSAGE_DOCUMENT_LOGO="logo",t.MESSAGE_STATUS_LIST={
"SENDING":"sending","COMPLETE":1,"FAILURE":"failure"},t.SYSTEM_MESSAGE_TYPE={"BUSY":"busy","AUTODISCONNECT":"autoconnect","SWITCHART":"switchart","SWITCHARTFAILURE":"switchartfailure"};t["default"]=o},function(e,t){"use strict";t.__esModule=!0;t.EVALUATE=0,t.INVITE_EVALUATE=1,t.ENFORCEMENT_EVALUATE=2},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function e(t,i){n(this,e),this._evaluationItems=t,this._evaluationButton=i,this._viewData={},this.setViewData()}return e.prototype.setViewData=function(){var e=this;this._viewData.evaluationItems=this._evaluationItems.map(function(t,n){if(0===t.userable)return null;var i=t.content;if(0===n){var r=t.option.filter(function(e){return 1===e.useable});e._viewData.starSubmitData=t,e._viewData.starSubmitData.option=r;var o="Star",a="starCount",s=t.option.filter(function(e){return 1===e.useable}),u=s.length,c=s.findIndex(function(e){return 1===e.isDefault}),l=u-c,f=s[c].content;return{"viewType":o,"submitKey":a,"title":i,"option":s,"allStarCount":u,"starCount":l,"starText":f}}if(1===n){var d=t.option.filter(function(e){return 1===e.useable});e._viewData.solveProblemSubmitData=t,e._viewData.solveProblemSubmitData.option=d;var p=["resolved","follow","unsolved"];t.option.forEach(function(e,t){e.iconName=p[t]});var h="List",g="solveProblemIndex",m=t.option.filter(function(e){return 1===e.useable}),v=m.findIndex(function(e){return 1===e.isDefault});return{"viewType":h,"submitKey":g,"title":i,"option":m,"selectedIndex":v}}if(2===n){e._viewData.evaluateContentSubmitData=t;var y="TextArea",b="evaluateContent",T="",w=t.option[0].content||"此刻的想法";return{"viewType":y,"submitKey":b,"title":i,"placeholder":w,"content":T}}return null}).filter(function(e){return null!=e}),this._viewData.evaluationButton=this._evaluationButton},e.prototype.updateStarCount=function(){},e.prototype.updateSolveProblemSelectedIndex=function(){},e.prototype.updateTextAreaContent=function(){},e.prototype.updateViewData=function(e){var t=this;Object.keys(e).forEach(function(n){switch(n){case"starCount":t._viewData.evaluationItems[0].starCount=e.starCount.starCount,t._viewData.evaluationItems[0].starText=e.starCount.starText;break;case"solveProblemIndex":t._viewData.evaluationItems[1].selectedIndex=e.solveProblemIndex;break;case"evaluateContent":t._viewData.evaluationItems[2].content=e.evaluateContent}})},e.prototype.getViewData=function(){return this._viewData},e.prototype.getStarSubmitData=function(e){var t={},n=this._viewData.starSubmitData,i=n.option.length;return t.itemid=n.itemId,t.title=n.title,t.content=n.content,t.rank=n.rank,t.optiontype=n.optionType,t.result=n.option[i-e].optionId,t.option=n.option.filter(function(t,n){return n===i-e}),t},e.prototype.getSolveProblemSubmitData=function(e){var t={},n=this._viewData.solveProblemSubmitData;return t.itemid=n.itemId,t.title=n.title,t.content=n.content,t.rank=n.rank,t.optiontype=n.optionType,t.result=n.option[e].optionId,t.option=n.option.filter(function(t,n){return n===e}),t},e.prototype.getEvaluateContentSubmitData=function(e){var t={},n=this._viewData.evaluateContentSubmitData;return t.itemid=n.itemId,t.title=n.title,t.content=n.content,t.rank=n.rank,t.optiontype=n.optionType,t.result=e,t.option=[],t},e}();t["default"]=i,e.exports=t["default"]},function(e,t,n){(function(i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var a=n(131),s=r(a),u=n(139),c=r(u),l=n(126),f=r(l),d=n(113),p={"serverAddr":{"gatewayServer":i.SERVER.NApiGatewayServer,"accountServer":i.SERVER.NACCOUNT,"pigeonServer":i.SERVER.NPIGEON,"dolphinServer":i.SERVER.NDOLPHIN,"settingServer":i.SERVER.NSETTING,"skyEyeServer":i.SERVER.NSKYEYE,"fileServer":i.SERVER.NFILE,"magicServer":i.SERVER.NMagicServer,"eagleServer":i.SERVER.NEagleServer},"commonConfig":{"WindowOpenMode":0}};i.timedifference=0;var h=function(){function e(t){o(this,e),this.useGateApi="true"===i.useGateApi,this.urlExp=/(wss?:)\/\/(.*?):(\d+)\/(\w+)/gi,this.getServerTimeout=parseInt(i.getServerTimeout,10),this.checkTime=!1,this.enable_chat=!0,this.chat_toast="",this.config=t}return e.prototype.init=function(){f["default"].trace("ServerConfig: 服务器配置开始初始化",l.INFO),f["default"].trace("ServerConfig: 网关已"+(this.useGateApi?"开启":"关闭"),l.INFO);var e=this.config.serverAddr;e.gatewayServer&&this.useGateApi&&(this.useGateApi=!0,Object.keys(e).forEach(function(t){e[t].httpServer=e.gatewayServer.httpServer})),this.setParam(e),f["default"].trace("ServerConfig: 服务器地址初始化完毕",l.INFO)},e.prototype.setParam=function(e){var t=e.accountServer,n=e.pigeonServer,i=e.skyEyeServer,r=e.fileServer,o=e.settingServer,a=e.dolphinServer,s=e.magicServer,u=e.eagleServer;t&&this.NAccountInit(t),o&&this.NSettingInit(o),n&&this.NPigeonInit(n),i&&this.NSkyEyeInit(i),r&&this.NFileInit(r),a&&this.NDolphinInit(a),s&&this.NMagicInit(s),u&&this.NEagleInit(u),this.inited=!0},e.prototype.requestServer=function(){var e=this;(0,c["default"])(i.GET_SERVER+"/api/gate/visitant/"+s["default"].get("siteid"),{"method":"get"},this.getServerTimeout).then(function(t){t.err?"timeout"===t.err?f["default"].trace("code: 7001, get serverAddr timeout, use default config",7):f["default"].trace("error: "+t.err+", get serverAddr error, use default config",7):(e.config.commonConfig=t.commonConfig||e.config.commonConfig,t.serverTime&&(e.checkTime=!0,i.timedifference=t.serverTime-(new Date).getTime()))})},e.prototype.getInstance=function(t){return this.instance||(this.instance=new e(t)),this.instance},e.prototype.NAccountInit=function(e){var t=e.httpServer,n=this.useGateApi?"/gate":"";this.setUrl("AccountCenterUrl",""+t+n+"/guest/")},e.prototype.NSettingInit=function(e){var t=e.httpServer,n=this.useGateApi?"/setting":"",i=s["default"].get("siteid");this.setUrl("leaveUrl",""+t+n+"/leaveMsg/addLeaveMsg/"+i),this.setUrl("SettingUrl",""+t+n+"/webChat/"+i+"/web"),this.setUrl("EvaluateUrl",""+t+n+"/evaluation/"+i+"?item=8&terminal="+(d.Terminal.mobile?"wap":"web")),this.setUrl("FastQuestionUrl",""+t+n+"/fastQuestion/web/"+i)},e.prototype.NPigeonInit=function(e){for(var t=void 0,n=void 0,r=e.socketServer.split(";"),o=e.httpServer,a=this.useGateApi?"/pigeon":"",u=0,c=r.length;u<c;u+=1){var l=d.Terminal.firefox?"https:":window.location.protocol,f=window.location.href;if((f.indexOf("localhost")>-1||f.indexOf("192.168")>-1)&&(l="https:"),n=r[u],"http:"===l&&n.indexOf("ws:")>-1)break;if("https:"===l&&n.indexOf("wss:")>-1)break}t=this.urlExp.exec(n),t&&t.length||(t=n.replace(/(wss?|tcp):\/\//gi,",$1,").replace(/:(\d+)/gi,",$1").replace(/\//gi,",").split(","),t&&t.length||i.Log("url:"+n+", math:"+t,2)),this.set("IMToUser",s["default"].get("siteid")+":NDolphin"),this.setUrl("IMHttpUrl",""+o+a+"/app/"+s["default"].get("siteid")),this.set("IMProtocol",t[1]||"ws:"),this.set("IMSSL","wss"===this.get("IMProtocol")),this.set("IMHost",t[2]),this.set("IMPort",Number(t[3])||(this.get("IMSSL")?443:80)),this.set("IMPath",t[4]||"mqtt")},e.prototype.NSkyEyeInit=function(e){var t=e?e.httpServer:"",n=s["default"].get("siteid"),i=this.useGateApi?"/skyeye":"";"kf_20096"!==n&&"kf_20118"!==n&&"kf_20119"!==n||(i="/skyeyetg"),this.set("TrailEnable",this.config.commonConfig.TrailEnabled||!0),this.set("TrailEventLevel",this.config.commonConfig.TrailEventLevel||2),this.setUrl("TrailCollectorUrl",""+t+i+"/enterprises/"+n+"/collector/handler"),this.setUrl("ProductUrl",t+"/setting/enterprises/"+n+"/navigations/Product/")},e.prototype.NFileInit=function(e){var t=e.httpServer,n=this.useGateApi?"/filestorage":"";this.setUrl("fileServer",""+t+n)},e.prototype.NDolphinInit=function(e){var t=e.httpServer,n=this.useGateApi?"/dolphin":"";this.setUrl("dolphinServer",""+t+n)},e.prototype.NMagicInit=function(e){var t=e.httpServer,n=this.useGateApi?"/magicbox":"";this.setUrl("magicServer",""+t+n),this.setUrl("magicServerUrl",""+t+n+"/magicbox/index?")},e.prototype.NEagleInit=function(e){var t=e.httpServer,n=this.useGateApi?"/eagle":"";this.setUrl("eagleServer",""+t+n),this.setUrl("eagleAssistServer",""+t+n+"/guide")},e.prototype.setUrl=function(e,t){this[e]=i.httpURI(t)},e.prototype.set=function(e,t){this[e]=t},e.prototype.get=function(e){return this[e]},e}();t["default"]=h.prototype.getInstance(p),e.exports=t["default"]}).call(t,n(112))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=n(132),a=i(o),s=n(137),u=n(138),c=i(u),l=n(126),f=n(124),d=i(f),p=function(){function e(){r(this,e),this.enterpriseInfoKeys=["siteid","exterinfo"],this.visitorInfoKeys=["username","phoneNumber","email","wechat","login","qq","weiboId"],this.trailCollectorInfo=["siteid","sid","uname","ulevel","oname","nt","login","qq","wechat","cookie","phone","email","imei","url","ttl","lev","pgid","lng","lat","country","provice","city","an","fl","dv","tml","lang","scs","prid","pn","mp","sp","iu","ca","br","oi","op","ip","ref"],this.NTVersion6={"siteid":"siteid","settingid":"templateid","uid":"login","uname":"uname","isvip":"ulevel","userlevel":"ulevel","erpparam":"","itemid":"prid","itemparam":"","orderid":"oi","orderprice":"op"},this.itemNtalkerparam={"id":"prid","name":"pn","url":"","imageurl":"iu","currency":"","siteprice":"sp","marketprice":"mp","category":"ca","brand":"br"}}return e.prototype.init=function(e){var t=this;return new Promise(function(n,i){window.NTKF_PARAM||(window.NTKF_PARAM={});var r=t.getSiteid();r&&(window.NTKF_PARAM.siteid=r),t.params=Object.assign({},e,NTKF_PARAM||{},a["default"].parse(location.search.substr(1).replace(/\+/g,"%2B")||"")),t.params.erpparam&&(t.params.exterinfo=Object.assign({},t.params.exterinfo||{},{"erpparam":t.params.erpparam})),t.params.siteid||i(l.NO_SITEID_ERROR),t.setDvid(),(0,d["default"])("NTParam",t),n()})},e.prototype.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.getSiteid=function(){if(window.NTKF_PARAM&&window.NTKF_PARAM.siteid)return window.NTKF_PARAM.siteid;var e=document.getElementById("xiaonengjs");if(!e){for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n+=1){var i=t[n];if(i.src&&i.src.indexOf("?siteid=")>-1){var r=i.src.substring(i.src.indexOf("?siteid=")+8);return r.indexOf("&")>-1?r.substring(0,r.indexOf("&")):r}}return""}var o=e.src,a=function(e,t){var n=e.match(new RegExp("[?&]"+t+"=([^&]*)(&?)","i"));return(n?n[1]:null==n)?n?n[1]:n:null};return a(o,"siteid")},e.prototype.get=function(e){return this.params[e]},e.prototype.set=function(e,t){this.params||(this.params={}),"string"==typeof e&&"string"==typeof t&&(this.params[e]=t)},e.prototype.setParams=function(e){var t=this;this.params||(this.params={}),Object.keys(e).forEach(function(n){t.params[n]=e[n]});var n=this.NTVersion6,i=Object.keys(this.NTVersion6);i.forEach(function(i){n[i]&&e[i]&&(t.params[n[i]]=e[i]),"uid"!==i&&"uname"!==i||""!==e[i]&&null!==e[i]&&"undefined"!=typeof e[i]||(t.params[n[i]]=""),"uid"===i&&0===e[i]&&(t.params[n[i]]="")})},e.prototype.getVistorInfo=function(){var e=this.generateInfo(this.visitorInfoKeys);return this.params.uname&&(e.username=this.params.uname),e},e.prototype.getEnterpriseInfo=function(){return this.generateInfo(this.enterpriseInfoKeys)},e.prototype.getTrailCollectorInfo=function(){var e=this,t=this.params,n=this.NTVersion6,i=Object.keys(this.NTVersion6);if(i.forEach(function(i){n[i]&&t[i]&&(e.params[n[i]]=t[i])}),t.ntalkerparam&&t.ntalkerparam.item){var r=this.itemNtalkerparam,o=Object.keys(this.itemNtalkerparam);o.forEach(function(n){r[n]&&(e.params[r[n]]=t.ntalkerparam.item[n])})}return this.generateInfo(this.trailCollectorInfo)},e.prototype.getCurrentSiteId=function(){return this.params.siteid},e.prototype.getAccountNtidRequestParam=function(){var e=this,t="",n=function(n){for(var i="",r=0,o=n.length;r<o;r+=1)e.get(n[r])&&(i=e.get(n[r]),t=n[r]);return i},i=n(["cookie","email","qq","wechat","phone","uid","login"]),r={"cookie":0,"wechat":1,"qq":2,"phone":3,"email":4,"uid":5,"login":5}[t],o=this.get("siteid"),a=this.get("cookie"),s=this.get("uname")||i,u=this.getEncryption(),c=this.get("sign");return this.set("loginid",i),Object.assign({"loginid":i,"type":r,"siteid":o,"encryption":u,"sign":c},0===r?{}:{"guestid":a,"username":s})},e.prototype.generateInfo=function(e){var t=this,n={};return e.forEach(function(e){t.params[e]&&(n[e]=t.params[e])}),n},e.prototype.setDvid=function(){var e=c["default"].get("xn_dvid_"+this.get("siteid"));e||(e=""+[(0,s.randomChar)(6),(0,s.randomChar)(8),(0,s.randomChar)(4),(0,s.randomChar)(4),(0,s.randomChar)(4),(0,s.getTime)().toString(16).toUpperCase().substr(-8)+(0,s.randomChar)(4)].join("-"),c["default"].set("xn_dvid_"+this.get("siteid"),e,63072e6)),this.params.cookie=e},e.prototype.getEncryption=function(){var e=parseInt(this.get("encryption"),10)||0;return isNaN(e)?0:e},e}();t["default"]=p.prototype.getInstance(),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(133),r=n(136),o=n(135);e.exports={"formats":o,"parse":r,"stringify":i}},function(e,t,n){"use strict";var i=n(134),r=n(135),o=Object.prototype.hasOwnProperty,a={"brackets":function(e){return e+"[]"},"comma":"comma","indices":function(e,t){return e+"["+t+"]"},"repeat":function(e){return e}},s=Array.isArray,u=Array.prototype.push,c=function(e,t){u.apply(e,s(t)?t:[t])},l=Date.prototype.toISOString,f={"addQueryPrefix":!1,"allowDots":!1,"charset":"utf-8","charsetSentinel":!1,"delimiter":"&","encode":!0,"encoder":i.encode,"encodeValuesOnly":!1,"formatter":r.formatters[r["default"]],"indices":!1,"serializeDate":function(e){return l.call(e)},"skipNulls":!1,"strictNullHandling":!1},d=function h(e,t,n,r,o,a,u,l,d,p,g,m,v){var y=e;if("function"==typeof u?y=u(t,y):y instanceof Date?y=p(y):"comma"===n&&s(y)&&(y=y.join(",")),null===y){if(r)return a&&!m?a(t,f.encoder,v):t;y=""}if("string"==typeof y||"number"==typeof y||"boolean"==typeof y||i.isBuffer(y)){if(a){var b=m?t:a(t,f.encoder,v);return[g(b)+"="+g(a(y,f.encoder,v))]}return[g(t)+"="+g(String(y))]}var T=[];if("undefined"==typeof y)return T;var w;if(s(u))w=u;else{var S=Object.keys(y);w=l?S.sort(l):S}for(var M=0;M<w.length;++M){var E=w[M];o&&null===y[E]||(s(y)?c(T,h(y[E],"function"==typeof n?n(t,E):t,n,r,o,a,u,l,d,p,g,m,v)):c(T,h(y[E],t+(d?"."+E:"["+E+"]"),n,r,o,a,u,l,d,p,g,m,v)))}return T},p=function(e){if(!e)return f;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if("undefined"!=typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=r["default"];if("undefined"!=typeof e.format){if(!o.call(r.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=r.formatters[n],a=f.filter;return("function"==typeof e.filter||s(e.filter))&&(a=e.filter),{"addQueryPrefix":"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,"allowDots":"undefined"==typeof e.allowDots?f.allowDots:!!e.allowDots,"charset":t,"charsetSentinel":"boolean"==typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,"delimiter":"undefined"==typeof e.delimiter?f.delimiter:e.delimiter,"encode":"boolean"==typeof e.encode?e.encode:f.encode,"encoder":"function"==typeof e.encoder?e.encoder:f.encoder,"encodeValuesOnly":"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,"filter":a,"formatter":i,"serializeDate":"function"==typeof e.serializeDate?e.serializeDate:f.serializeDate,"skipNulls":"boolean"==typeof e.skipNulls?e.skipNulls:f.skipNulls,"sort":"function"==typeof e.sort?e.sort:null,"strictNullHandling":"boolean"==typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}};e.exports=function(e,t){var n,i,r=e,o=p(t);"function"==typeof o.filter?(i=o.filter,r=i("",r)):s(o.filter)&&(i=o.filter,n=i);var u=[];if("object"!=typeof r||null===r)return"";var l;l=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var f=a[l];n||(n=Object.keys(r)),o.sort&&n.sort(o.sort);for(var h=0;h<n.length;++h){var g=n[h];o.skipNulls&&null===r[g]||c(u,d(r[g],g,f,o.strictNullHandling,o.skipNulls,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.formatter,o.encodeValuesOnly,o.charset))}var m=u.join(o.delimiter),v=o.addQueryPrefix===!0?"?":"";return o.charsetSentinel&&(v+="iso-8859-1"===o.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),m.length>0?v+m:""}},function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,i=Array.isArray,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(i(n)){for(var r=[],o=0;o<n.length;++o)"undefined"!=typeof n[o]&&r.push(n[o]);t.obj[t.prop]=r}}},a=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)"undefined"!=typeof e[i]&&(n[i]=e[i]);return n},s=function g(e,t,r){if(!t)return e;if("object"!=typeof t){if(i(e))e.push(t);else{if(!e||"object"!=typeof e)return[e,t];(r&&(r.plainObjects||r.allowPrototypes)||!n.call(Object.prototype,t))&&(e[t]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(t);var o=e;return i(e)&&!i(t)&&(o=a(e,r)),i(e)&&i(t)?(t.forEach(function(t,i){if(n.call(e,i)){var o=e[i];o&&"object"==typeof o&&t&&"object"==typeof t?e[i]=g(o,t,r):e.push(t)}else e[i]=t}),e):Object.keys(t).reduce(function(e,i){var o=t[i];return n.call(e,i)?e[i]=g(e[i],o,r):e[i]=o,e},o)},u=function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},c=function(e,t,n){var i=e.replace(/\+/g," ");if("iso-8859-1"===n)return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch(r){return i}},l=function(e,t,n){if(0===e.length)return e;var i="string"==typeof e?e:String(e);if("iso-8859-1"===n)return escape(i).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var o="",a=0;a<i.length;++a){var s=i.charCodeAt(a);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?o+=i.charAt(a):s<128?o+=r[s]:s<2048?o+=r[192|s>>6]+r[128|63&s]:s<55296||s>=57344?o+=r[224|s>>12]+r[128|s>>6&63]+r[128|63&s]:(a+=1,s=65536+((1023&s)<<10|1023&i.charCodeAt(a)),o+=r[240|s>>18]+r[128|s>>12&63]+r[128|s>>6&63]+r[128|63&s])}return o},f=function(e){for(var t=[{"obj":{"o":e},"prop":"o"}],n=[],i=0;i<t.length;++i)for(var r=t[i],a=r.obj[r.prop],s=Object.keys(a),u=0;u<s.length;++u){var c=s[u],l=a[c];"object"==typeof l&&null!==l&&n.indexOf(l)===-1&&(t.push({"obj":a,"prop":c}),n.push(l))}return o(t),e},d=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},p=function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},h=function(e,t){return[].concat(e,t)};e.exports={"arrayToObject":a,"assign":u,"combine":h,"compact":f,"decode":c,"encode":l,"isBuffer":p,"isRegExp":d,"merge":s}},function(e,t){"use strict";var n=String.prototype.replace,i=/%20/g;e.exports={"default":"RFC3986","formatters":{"RFC1738":function(e){return n.call(e,i,"+")},"RFC3986":function(e){return e}},"RFC1738":"RFC1738","RFC3986":"RFC3986"}},function(e,t,n){"use strict";var i=n(134),r=Object.prototype.hasOwnProperty,o={"allowDots":!1,"allowPrototypes":!1,"arrayLimit":20,"charset":"utf-8","charsetSentinel":!1,"comma":!1,"decoder":i.decode,"delimiter":"&","depth":5,"ignoreQueryPrefix":!1,"interpretNumericEntities":!1,"parameterLimit":1e3,"parseArrays":!0,"plainObjects":!1,"strictNullHandling":!1},a=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},s="utf8=%26%2310003%3B",u="utf8=%E2%9C%93",c=function(e,t){var n,c={},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,f=t.parameterLimit===1/0?void 0:t.parameterLimit,d=l.split(t.delimiter,f),p=-1,h=t.charset;if(t.charsetSentinel)for(n=0;n<d.length;++n)0===d[n].indexOf("utf8=")&&(d[n]===u?h="utf-8":d[n]===s&&(h="iso-8859-1"),p=n,n=d.length);for(n=0;n<d.length;++n)if(n!==p){var g,m,v=d[n],y=v.indexOf("]="),b=y===-1?v.indexOf("="):y+1;b===-1?(g=t.decoder(v,o.decoder,h),m=t.strictNullHandling?null:""):(g=t.decoder(v.slice(0,b),o.decoder,h),m=t.decoder(v.slice(b+1),o.decoder,h)),m&&t.interpretNumericEntities&&"iso-8859-1"===h&&(m=a(m)),m&&t.comma&&m.indexOf(",")>-1&&(m=m.split(",")),r.call(c,g)?c[g]=i.combine(c[g],m):c[g]=m}return c},l=function(e,t,n){for(var i=t,r=e.length-1;r>=0;--r){var o,a=e[r];if("[]"===a&&n.parseArrays)o=[].concat(i);else{o=n.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(s,10);n.parseArrays||""!==s?!isNaN(u)&&a!==s&&String(u)===s&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(o=[],o[u]=i):o[s]=i:o={"0":i}}i=o}return i},f=function(e,t,n){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,s=o.exec(i),u=s?i.slice(0,s.index):i,c=[];if(u){if(!n.plainObjects&&r.call(Object.prototype,u)&&!n.allowPrototypes)return;c.push(u)}for(var f=0;null!==(s=a.exec(i))&&f<n.depth;){if(f+=1,!n.plainObjects&&r.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+i.slice(s.index)+"]"),l(c,t,n)}},d=function(e){if(!e)return o;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!=typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t="undefined"==typeof e.charset?o.charset:e.charset;return{"allowDots":"undefined"==typeof e.allowDots?o.allowDots:!!e.allowDots,"allowPrototypes":"boolean"==typeof e.allowPrototypes?e.allowPrototypes:o.allowPrototypes,"arrayLimit":"number"==typeof e.arrayLimit?e.arrayLimit:o.arrayLimit,"charset":t,"charsetSentinel":"boolean"==typeof e.charsetSentinel?e.charsetSentinel:o.charsetSentinel,"comma":"boolean"==typeof e.comma?e.comma:o.comma,"decoder":"function"==typeof e.decoder?e.decoder:o.decoder,"delimiter":"string"==typeof e.delimiter||i.isRegExp(e.delimiter)?e.delimiter:o.delimiter,"depth":"number"==typeof e.depth?e.depth:o.depth,"ignoreQueryPrefix":e.ignoreQueryPrefix===!0,"interpretNumericEntities":"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:o.interpretNumericEntities,"parameterLimit":"number"==typeof e.parameterLimit?e.parameterLimit:o.parameterLimit,"parseArrays":e.parseArrays!==!1,"plainObjects":"boolean"==typeof e.plainObjects?e.plainObjects:o.plainObjects,"strictNullHandling":"boolean"==typeof e.strictNullHandling?e.strictNullHandling:o.strictNullHandling}};e.exports=function(e,t){var n=d(t);if(""===e||null===e||"undefined"==typeof e)return n.plainObjects?Object.create(null):{};for(var r="string"==typeof e?c(e,n):e,o=n.plainObjects?Object.create(null):{},a=Object.keys(r),s=0;s<a.length;++s){var u=a[s],l=f(u,r[u],n);o=i.merge(o,l,n)}return i.compact(o)}},function(e,t,n){"use strict";function i(e){return""!==e&&void 0!==e&&null!==e}function r(e,t){Object.defineProperty(this,e,{"value":t,"writeable":"false"})}function o(e){return e.split("").reduce(function(e,t){return e=(e<<5)-e+t.charCodeAt(0),e&e},0)}function a(e){var t=(new Date).getTime(),n=1e3*Math.random();switch(n=s(Math.floor(n),3),e){case 2:return t.toString()+n;case 1:return t+n;default:return t}}function s(e,t){for(var n="",i=1,r=t||2;i<=r;i++)n+="0";return n+=e||"",n.substr(n.length-r)}function u(e,t){for(var n="",i=e||8,r=10==t?"0123456789":"0123456789ABCDEF",o=0;o<i;o++)n+=r.charAt(Math.round(Math.random()*(r.length-1)));return n}function c(e){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}function l(e){if(!e)return!1;if(e.length&&(e=e[0]),9===e.nodeType)return!1;if("html"===e.localName)return"html";for(var t,n=[];"html"!==e.localName&&!O.isUnique(t);){var i=O.getSelector(e);n.unshift({"node":e,"separator":" ","selector":i}),t=O.getSpecificity(n),e=e&&e.parentNode}return O.isUnique(t)||O.applyDirectChildSeparator(n),O.isUnique(t)||O.applyMixed(n),O.isUnique(t)||O.applyNth(n),{"ep":O.selectorFromPath(n),"ei":O.index||""}}function f(e){return e.childNodes.length>0?e.childNodes[0].data:"A"===e.tagName?e.href:"IMG"===e.tagName?e.title||e.alt||e.src:"INPUT"===e.tagName?e.value:void 0}function d(e){e=e||"";try{return e.toString().replace(/[^\x00-\xFF]/g,"**").length}catch(t){console.log(t,3)}}function p(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function h(){return"undefined"!=typeof FormData}function g(e){return e.toDateString()===(new Date).toDateString()}function m(e){var t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),i=new Date(n-864e5).getTime();return e.getTime()<n&&i<=e.getTime()}function v(e,t){var n,i=new Date;return n=1==t?new Date(i.getTime()-24*e*60*60*1e3):new Date(i.getTime()+24*e*60*60*1e3)}function y(e){e=e.toDateString();var t=new Date(e.replace(/-/g,"/")),n=new Date,i=n.getDay(),r=v(i,1),o=v(7-i,2);return!(t.getTime()<r.getTime()||t.getTime()>o.getTime())}function b(e){var t=new Date;return t.getFullYear()!==e.getFullYear()||t.getFullYear()!==e.getFullYear()&&void 0}function T(e){var t=I.Terminal.mobile?"hh:mm":"hh:mm:ss";if(e=new Date(e),g(e))return w(e,t);if(m(e))return"昨天 "+w(e,t);if(y(e)){var n=new Array("一","二","三","四","五","六","日"),i=n[new Date(e).getDay()-1];return"星期"+i+" "+w(e,t)}return b(e)?w(e,"yyyy-MM-dd  "+t):y(e)?void 0:w(e,"MM-dd "+t)}function w(e,t){"number"==typeof e&&(e=new Date(e));var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S":e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t}function S(e){var t=new Date(e),n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());return n.getTime()}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.assign({},N,e,t,n)}function E(e){return JSON.parse(JSON.stringify(e))}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"color:#0a8cd2";return e||(e=""),/<[^>]+>/g.test(e)&&e.indexOf("<a")>-1?_(e):e.toLowerCase().indexOf("<img")>-1?e:/http[s]{0,1}/.test(e)?e.toString().replace(/((http|https):\/\/)([\w-]+\.)?([\w-]+\.)?([\w-]+\.)([a-zA-Z\-_\.]+)([^$\s,\uFF0C\u3002\"\u4E00-\u9FA5]*)?/gi,function(e,n,i,r,o,a,s,u){var c=((n||"http://")+(r||"")+(o||"")+(a||"")+(s||"")+(u||"")).replace(/(^\s+)|(\s+$)/gi,"").replace(/<\/?[^>]*>/g,"");return c=NT_CORE.Enterprise.executeUrlReplaceRule(c),'<a href="'+c.replace(/(^\s+)|(\s+$)/gi,"")+'" target='+(I.Terminal.mobile?'"_self"':'"_blank"')+'style="'+(t||"")+'">'+(n||"")+(r||"")+(o||"")+(a||"")+(s||"")+(u||"")+"</a>"}):e.toString()}function _(e){for(var t=["a","span","font","b","u","i","h1","h2","h3","h4","h5","h6","p","li","ul","table","div"],n=0;n<t.length;n++){var i=0,r=0,o=new RegExp("\\<"+t[n]+"( [^\\<\\>]+|)\\>","ig"),a=e.match(o);null!=a&&(i=a.length),o=new RegExp("\\<\\/"+t[n]+"\\>","ig"),a=e.match(o),null!=a&&(r=a.length);for(var s=0;s<i-r;s++)e+="</"+t[n]+">"}return e}t.__esModule=!0,t.mobilePageInStyle=void 0;var x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isValid=i,t.readonly=r,t.hashCode=o,t.getTime=a,t.randomChar=u,t.addPageStyle=c,t.cssPath=l,t.nodeMessage=f,t.enLength=d,t.isEmptyObject=p,t.useFormData=h,t.messageTime=T,t.formatData=w,t.getMinuteStampByTimeStamp=S,t.getStyle=M,t.clone=E,t.linkFilter=C,t.closeHTML=_;var I=n(113),N={"margin":0,"padding":0,"border":"none","float":"none","width":"auto","height":"auto","minWidth":"none","minHeight":"none","maxWidth":"none","maxHeight":"none","clear":"none","position":"static","left":"auto","top":"auto","right":"auto","bottom":"auto","textAlign":"left","boxSizing":"content-box","backgroundColor":"transparent","fontFamily":"Microsoft YaHei, Arial","fontWeight":"normal"},O=(t.mobilePageInStyle="\n  full-html,.full-body{\n    width: 100% !important;\n    height: 100% !important;\n    margin: 0 !important;\n    padding: 0;\n    overflow: hidden !important;\n  }\n\n  .full-body *{\n    display: none;\n  }\n\n  .nt-mobile, .nt-mobile *{\n    display: block;\n    z-index: 2147483645;\n    margin: 0;\n    padding: 0;\n  }\n\n  .nt-mobile, .nt-mobile img {\n    max-width: 100%;\n  }\n",{});O.selectorFromPath=function(e){var t=e.map(function(e){return e.selector.value+e.separator}).join(" ");return t.trim()},O.getSpecificity=function(e){var t,n=0;if("object"===("undefined"==typeof e?"undefined":x(e))&&e.length?t=O.selectorFromPath(e):e&&e.length&&(t=e),t)try{n=document.querySelectorAll(t).length}catch(i){}return n},O.isUnique=function(e){return 1===e},O.getSelector=function(e){var t,n=function(){return{"type":"id","value":"#"+e.id}},i=function(){var t="."+e.className.split("\n").filter(Boolean).join(" ").split(" ").filter(Boolean).join(".");return{"type":"class","value":t}},r=function(){return{"type":"name","value":e.localName}};return e&&(t=""!==e.id?n(e):""!==e.className&&"object"!==x(e.className)?i(e):r(e)),t},O.applyNth=function(e){for(var t,n=0;n<e.length;n++){var i=e[n].node.parentNode,r=e[n];if(i&&i.children.length>1){var o=Array.prototype.indexOf.call(i.children,r.node)+1;this.index=o}t=O.getSpecificity(e)}for(var n=0;n<e.length;n++){var r=e[n],a=r.selector.value,o=r.selector.value.indexOf(":nth");o>-1&&(r.selector.value=r.selector.value.slice(0,o)),t=O.getSpecificity(e),O.isUnique(t)||(r.selector.value=a)}},O.applyMixed=function(e){for(var t=0;t<e.length;t++){var n=e[t];"name"!==n.selector.type&&("class"===n.selector.type?(n.selector.value=n.node.localName+n.selector.value,n.selector.type="mixed"):"id"===n.selector.type&&(n.selector.value=n.node.localName+n.selector.value,n.selector.type="mixed"));var i=O.getSpecificity(e);if(O.isUnique(i))break}},O.applyDirectChildSeparator=function(e){for(var t=0;t<e.length-1;t++){var n=e[t];n.separator;n.separator=" > ";var i=O.getSpecificity(e);if(O.isUnique(i))break}}},function(e,t){"use strict";t.__esModule=!0;var n={"value":document.cookie,"set":function(e,t,n,i){if(0===n)return document.cookie=e+"="+escape(t),void(this.value=document.cookie);var r=new Date;r.setTime(r.getTime()+n);var i="",o="";if(i)i="domain="+i+"; ",o="path=/; ";else{var a=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;i=a.test(document.domain)?document.domain:document.domain.indexOf(".com.cn")>-1?document.domain.split(".").reverse().splice(0,3).reverse().join("."):document.domain.split(".").reverse().splice(0,2).reverse().join("."),document.domain&&"string"==typeof document.domain&&(i=";domain="+i+";",o="path=/; ")}document.cookie=e+"="+escape(t)+";expires="+r.toGMTString()+i+o,this.value=document.cookie},"get":function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=this.value.match(n))?unescape(t[2]):null},"getAll":function(){return this.value},"remove":function(e){this.set(e,"",-1)}};t["default"]=n,e.exports=t["default"]},function(e,t){"use strict";function n(e){return e.json()}function i(e){return e.text()}function r(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.state);throw t.response=e,t}function o(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8e3,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=fetch(e,t),u=new Promise(function(e,t){setTimeout(function(){t("timeout")},o)}),c=Promise.race([s,u]);
return c.then(r).then(a?n:i).then(function(e){return e})["catch"](function(e){return{"err":e}})}t.__esModule=!0,t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=n(141),a=i(o),s=n(154),u=i(s),c=n(125),l=i(c),f=function(){function e(){r(this,e),this.index=0}return e.prototype.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.setIndex=function(e){var t=a["default"].findConversationByConverid(this.getCurrentConverid());if(t&&!t.isEvaluateHide()){var n=l["default"].getEvaluateData();t.evaluateViewModel.updateViewData(n)}if(t&&t.isLeaveMessage()){var i=l["default"].getLeaveMessageData();t.LeaveMessageViewModel.updateViewData(i)}this.index=e},e.prototype.getIndex=function(){return this.index},e.prototype.isAllChatClose=function(){for(var e=0;e<a["default"].conversationList.length;e+=1){var t=a["default"].conversationList[e];if("open"===t.chatwindowstatus||t.isLeaveMessage())return!1}return!0},e.prototype.getIndexByConverid=function(e){for(var t=0;t<a["default"].conversationList.length;t+=1){var n=a["default"].conversationList[t];if(n.isSameConverid(e))return t}return 0},e.prototype.setIndexByConverid=function(e){for(var t=0;t<a["default"].conversationList.length;t+=1){var n=a["default"].conversationList[t];if(n.isSameConverid(e))return t}return 0},e.prototype.getCurrentConverid=function(){var e=a["default"].conversationList[this.index];return e?e.converid:""},e.prototype.getCurrentConversationInfo=function(){var e=a["default"].conversationList[this.index];return{"kefuName":e.getName(),"kefuLogo":e.getLogo(),"kefuSignature":e.getSignature()}},e.prototype.getCurrentConversationMessages=function(){var e=[];return e=u["default"].getMessagesByConverid(this.getCurrentConverid())},e.prototype.getLastMessageByConverid=function(e){var t=a["default"].findConversationByConverid(e);return t?t.isLeaveMessage()?"":u["default"].lastMessageList[e]:""},e.prototype.getConversationListInfo=function(){var e=this,t=[],n=a["default"].conversationList;return n.forEach(function(n){var i="none";("open"===n.chatwindowstatus||n.isVisitorActive()||n.isLeaveMessage())&&(i="block"),t.push({"display":i,"kefuName":n.getName(),"kefuLogo":n.getLogo(),"kefuSignature":n.getSignature(),"lastMessage":e.getLastMessageByConverid(n.converid)})}),t},e.prototype.refreshIndex=function(){for(var e=this.getIndex(),t=a["default"].conversationList,n=!1,i=0,r=e;r<t.length;r+=1){var o=t[r];if("open"===o.chatwindowstatus||o.isVisitorActive()){n=!0,i=r;break}}if(!n)for(var s=e;s>=0;s-=1){var u=t[s];if("open"===u.chatwindowstatus||u.isVisitorActive()){i=s;break}}this.setIndex(i)},e}();t["default"]=f.prototype.getInstance(),e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,t.STATUS_LIST=void 0;var o=n(142),a=i(o),s=n(126),u=i(s),c=n(143),l=i(c),f=n(149),d=i(f),p=n(153),h=i(p),g=n(156),m=i(g),v=n(152),y=i(v),b=n(158),T=i(b),w=n(150),S=n(154),M=i(S),E=n(124),C=i(E),_=n(171),x=i(_),I=n(113),N=n(125),O=i(N),A=n(140),R=i(A),D=n(161),L=i(D),k={"ERROR":{"LOADINGTIMEOUT":0,"IMCONNECTFAILURE":1}},U=t.STATUS_LIST={"CLOSE":"close","LOADING":"loading","ALREADY":"already","ERROR":"error","CHAT":"chat","MULTICHAT":"multiChat","LEAVEMESSAGE":"leaveMessage","MINIMUM":"minimum","EVALUATE":"evaluate","TIP":"tip","BIGPIC":"bigPicture","LEAVEMESSAGEFORURL":"leavemessageforurl","LEAVEMESSAGESUCCESS":"leavemessagesuccess","CLOSELEAVEMESSAGE":"closeLeaveMessage"},P=function(){function e(){r(this,e),this.conversationList=[],this.openChatCount=0,this.waitAddConversationList=[],this.addConversationTimeout=1e4,this.addTimeoutList={},this.imConnectTimeout=200,this.imPendingTime=0,this.maxLoadngTime=3e4,this.maxLoadingTimeout=null,this.clearReceivePredictMessageTimeout=2e3,(0,C["default"])("ConversationPool",this),(0,C["default"])("receiveConversationInfo",this.receiveConversationInfo.bind(this)),(0,C["default"])("notifyUIPredictMessage",this.notifyUIPredictMessage.bind(this))}return e.prototype.getInstance=function(){var t=this.instance;return t||(t=new e),t},e.prototype.add=function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.conversationList,r=!0;n&&i.forEach(function(n){n.isSameConverid(e)&&(t.notifyUIOpenChatResult(U.ALREADY,n),r=!1)}),n&&!r||(0!==i.length&&I.Terminal.mobile&&(i[0].leave(d["default"].getNTID()),i.shift()),i.push(e),R["default"].setIndex(i.length-1),O["default"].refreshIndex())},e.prototype.remove=function(e){for(var t=this.conversationList,n=0,i=t.length;n<i;n+=1){var r=t[n];if(r.isSameConverid(e)){t.splice(n,1);break}}},e.prototype.removeConversationByRequestId=function(e,t){for(var n=this.conversationList,i=0,r=n.length;i<r;i+=1){var o=n[i];if(o.isSameRequestid(e)){n.splice(i,1);var a=R["default"].getIndexByConverid(t.converid);R["default"].setIndex(a),O["default"].refreshIndex();break}}},e.prototype.requestHistory=function(e){var t=this.findConversationByConverid(e);t&&t.requestHistory()},e.prototype.findConversation=function(e,t){for(var n=this.conversationList,i=0,r=n.length;i<r;i+=1){var o=n[i];if("exterinfo"===t){if(o.isSameExterinfo(e))return o}else if(o.isSame(e,t))return o}return null},e.prototype.findConversationByConverid=function(e){return this.findConversation(e,"converid")},e.prototype.findConversationByRequestid=function(e){return this.findConversation(e,"requestid")},e.prototype.findConversationByExterinfo=function(e){return this.findConversation(e,"exterinfo")},e.prototype.findConversationByTemplateid=function(e){return this.findConversation(e,"templateid")},e.prototype.findConversationByRequestTemplateid=function(e){return this.findConversation(e,"requestTemplateid")||this.findConversation(e,"templateid")},e.prototype.setStatus=function(){for(var e=this.conversationList,t=[],n=0,i=e.length;n<i;n+=1){var r=e[n];("open"===r.chatwindowstatus||r.isVisitorActive()||r.isLeaveMessage())&&t.push(r)}switch(t.length){case 0:this.notifyUICloseChat();break;case 1:this.notifyUIOpenChatResult(U.CHAT,t);break;default:this.notifyUIOpenChatResult(U.MULTICHAT,t)}O["default"].handleConversations(e),O["default"].addProductMessage()},e.prototype.clearMaxLoadingTimer=function(){this.maxLoadingTimeout&&clearTimeout(this.maxLoadingTimeout)},e.prototype.notifyUIOpenChatLoading=function(){var e=this;this.maxLoadingTimeout=setTimeout(function(){e.notifyUIOpenChatResult(U.ERROR,k.ERROR.LOADINGTIMEOUT),O["default"].handleSettingFail(NT_LANG.serverConnectFailMessage),"handshake"===h["default"].getStatus()?u["default"].trace("ConversationPool: 请求会话无响应，待客云故障将导致无法会话，请及时处理! ",s.ERROR):"success"===h["default"].getStatus()?u["default"].trace("ConversationPool: 请求会话无响应，IM故障将导致无法会话，请及时处理! ",s.ERROR):u["default"].trace("ConversationPool: 请求会话无响应，mqtt服务故障将导致无法会话，请及时处理! ",s.ERROR)},this.maxLoadngTime),a["default"].publish("UIStateChange",{"status":U.LOADING})},e.prototype.notifyUIOpenChatResult=function(e,t){this.clearMaxLoadingTimer(),a["default"].publish("UIStateChange",{"status":e,"notifyInfo":t})},e.prototype.notifyUICloseChat=function(){a["default"].publish("UIStateChange",{"status":U.CLOSE})},e.prototype.notifyUIPredictMessage=function(e){var t=e.predictMessageContent,n=e.predictMessageConverid;this.clearReceivePredictMessage&&clearTimeout(this.clearReceivePredictMessage),a["default"].publish("UIStateChange",e),O["default"].handlePredictMessage(t,n),this.clearReceivePredictMessage=setTimeout(function(){a["default"].publish("UIStateChange",{"predictMessageConverid":null,"predictMessageUsername":null}),O["default"].clearPredictMessage(n)},this.clearReceivePredictMessageTimeout)},e.prototype.receiveOpenChatEvent=function(e,t){var n=e;this.maxLoadingTimeout||this.notifyUIOpenChatLoading();var i=h["default"].getStatus();"init"!==i&&"disconnect"!==i||h["default"].connect();var r=m["default"].getExternalInfo(),o=this.findConversationByRequestTemplateid(t);if(o){if(this.clearUnreadMessageCount(o.getConverid()),!o.isVisitorActive())if(o.isValid())o.enter(d["default"].getNTID()),o.chatwindowstatus="open";else{var a=o.getConverid();o.exterinfo=r,(M["default"].hasValidMessage(a)||n)&&o.request(!0),o.chatwindowstatus="open"}var s=R["default"].getIndexByConverid(o.converid);if(R["default"].setIndex(s),O["default"].refreshIndex(s),o.forbidden)return;return o.isLeaveMessage()&&I.Terminal.mobile&&(o.request(!0),o.chatwindowstatus="open"),void this.setStatus()}o=new l["default"](n,r,t),this.add(o),o.chatwindowstatus="open",this.setStatus()},e.prototype.receiveAutoDisconnectEvent=function(e){var t=this;this.conversationList.forEach(function(n){n.isSameConverid(e)&&(M["default"].addAutoDisconnectMessage(e),n.leave(d["default"].getNTID()),n.rebuild(),n.chatwindowstatus="open",t.setStatus())}),x["default"].clear(e)},e.prototype.receiveCloseChatEvent=function(e,t){this.conversationList.forEach(function(t){t.isSameConverid(e)&&(t.isValid()&&x["default"].clear(t.converid),u["default"].trace("receiveCloseChatEvent: ",t),t.leave(d["default"].getNTID()),t.chatwindowstatus="close")}),"function"==typeof t&&t(),this.setStatus(),L["default"].execute("closeChat")},e.prototype.receiveSendPredictMessageEvent=function(e,t){this.conversationList.forEach(function(n){n.isSameConverid(e)&&n.converid&&n.sendPredictMessage(t)})},e.prototype.receiveEvaluateResult=function(e,t){this.conversationList.forEach(function(n){n.isSameConverid(e)&&n.sendEvaluateResult(t)})},e.prototype.receiveStaffserviceEvent=function(e,t){this.conversationList.forEach(function(n){n.isSameConverid(e)&&n.staffservice(t)})},e.prototype.receiveAddFailure=function(e){for(var t=this.waitAddConversationList,n=0,i=t.length;n<i;n+=1){var r=t[n];if(r.isSameConverid(e)){t.splice(n,1);break}}},e.prototype.receiveConversationInfo=function(e){for(var t=this,n=this.conversationList,i=e.type,r=e.conversationInfo,o=void 0,a=0,s=n.length;a<s;a+=1)if(o=n[a],o.isSameRequestid(r)||o.isSameConverid(r)){x["default"].start(r.converid,function(e){t.receiveAutoDisconnectEvent(e)}),o.setDetailInfo(i,r);var u=this.findConversationByRequestid(r.requestid);return u&&u.converid!==o.getConverid()&&(u.converid=o.getConverid(),this.removeConversationByRequestId(u,o),o.chatwindowstatus="open"),void this.setStatus()}},e.prototype.receiveMemberInfo=function(e){for(var t=this.conversationList,n=e.converid,i=e.member,r=0,o=t.length;r<o;r+=1){var a=t[r];a.isSameConverid(n)&&(a.setMember(i.userid,"chatstatus",i.chatstatus),O["default"].handleConversations(t),i&&i.type===w.USER_TYPE.VISITOR&&i.chatstatus===c.MEMBER_STATUS.LEAVE&&(a.chatwindowstatus="close",x["default"].clear(a.converid),this.setStatus()))}if(i&&i.type===w.USER_TYPE.KEFU&&i.chatstatus===c.MEMBER_STATUS.OFFLINE)for(var s=0,u=t.length;s<u;s+=1){var l=t[s];l.isSameConverid(n)&&(this.kefuLeaveConversationMessageid&&M["default"].deleteMessage(this.kefuLeaveConversationMessageid,l.converid),this.kefuLeaveConversationMessageid=M["default"].addSystemMessage({"converid":l.converid,"sysMsgType":"none","msg":NT_LANG.offlineCustomeServiceMessage}),l.rebuild(),this.setStatus())}},e.prototype.receiveRemoteAddMessage=function(e){var t=this;if(I.Terminal.mobile)return this.creating?void setTimeout(function(){t.receiveRemoteAddMessage(e)},300):void(e.converid&&this.conversationList.forEach(function(t){t.isSameConverid(e.converid)&&(t.addUnreadMessageCount(),a["default"].publish("UIStateChange",{"unreadMessageCount":t.unreadMessageCount}))}))},e.prototype.receiveConversationLeaveMessage=function(e,t){var n=this.findConversationByRequestid(e);this.clearMaxLoadingTimer(),n&&(e&&e.content&&T["default"].setLeaveMessage(e.content),n.leaveMessage(),e&&(e.siteid?n.setWaitersiteid(e.siteid):n.setWaitersiteid("")),e&&e.waiterid&&n.setLeaveMessageKfid(e.waiterid),e&&e.waitername&&n.setWaiterName(e.waitername),t&&n.setForbidden(1),L["default"].execute("leaveMessage")),I.Terminal.mobile||this.setStatus()},e.prototype.receiveConversationBusy=function(e){var t=this.findConversationByRequestid(e)||this.findConversationByTemplateid(e);t&&(t.busy(),e&&e.waiterid&&t.setLeaveMessageKfid(e.waiterid),e&&e.waitername&&t.setWaiterName(e.waitername),e&&e.templateid&&(t.templateid=e.templateid),M["default"].receiveAddBusyMessage(e,t.converid,t.templateid),L["default"].execute("connectKf",[{"kfid":t.getLeaveMessageKfid(e.waiterid),"kfName":t.getWaiterName(e.waitername)}])),this.setStatus()},e.prototype.receiveRobotSwitchArtiFail=function(e){var t=this.findConversationByTemplateid(e)||this.findConversationByConverid(e);t&&(e&&e.content&&T["default"].setLeaveMessage(e.content),e&&e.waiterid&&t.setLeaveMessageKfid(e.waiterid),e&&e.waitername&&t.setWaiterName(e.waitername),L["default"].execute("robotSwitchArtiFail",[d["default"].get("loginid"),d["default"].get("username"),t.converid,M["default"].getMessagesByConverid(t.converid)]),M["default"].addRobotSwitchArtiFailMessage(e,t.converid))},e.prototype.receiveRobotSwitchArtiAlarm=function(e){var t=this.findConversationByTemplateid(e);t&&L["default"].execute("robotSwitchArtiFail",[d["default"].get("loginid"),d["default"].get("username"),t.converid,M["default"].getMessagesByConverid(t.converid)])},e.prototype.clearUnreadMessageCount=function(e){this.conversationList.forEach(function(t){t.isSameConverid(e)&&(t.clearUnreadMessageCount(),a["default"].publish("UIStateChange",{"unreadMessageCount":t.unreadMessageCount}))}),O["default"].clearMinUnReadMessage()},e.prototype.receiveAddPredictMessage=function(e){if(e.fromuser){var t=y["default"].getUserByUserId(e.fromuser);if(t){var n="";t.showname?n=t.showname:t.nickname?n=t.nickname:t.username&&(n=t.username),this.notifyUIPredictMessage({"predictMessageUsername":n,"predictMessageConverid":e.converid,"predictMessageContent":"客服"+n+" "+e.message+"..."})}}},e.prototype.receiveInviteConversationEvaluation=function(e){for(var t=this.conversationList,n=e.converid,i=0,r=t.length;i<r;i+=1){var o=t[i];o.isSameConverid(n)&&(I.Terminal.mobile?a["default"].publish("UIStateChange",{"evaluate":"invite"}):T["default"].getEvaluateData(function(e){if(O["default"].verifyEvaluateData(e)){var t=R["default"].getIndexByConverid(n);O["default"].setConversationIndex(t),O["default"].refreshIndex(),O["default"].handleEvaluateData(e,1,n)}}))}},e.prototype.handleSystemMessage=function(e){if(e&&1===e.msgtype&&3===e.errortype){var t=this.findConversationByConverid(e.converid);t&&t.rebuild()}},e.prototype.createLeaveMessageConversation=function(){var e=new l["default"];e.leaveMessage(),this.add(e),this.setStatus()},e.prototype.receiveConversationTerminated=function(e){for(var t=this.conversationList,n=0,i=t.length;n<i;n+=1){var r=t[n];r.converid!==e.converid&&r.lastConverid!==e.converid||r.terminated()}},e}();t["default"]=P.prototype.getInstance()},function(e,t){"use strict";function n(e){var t;for(t in e)if(e.hasOwnProperty(t))return!0;return!1}function i(e){return function(){}}function r(e,t,n){try{e(t,n)}catch(r){setTimeout(i(r),0)}}function o(e,t,n){e(t,n)}function a(e,t,n,i){var a,s=f[t],u=i?o:r;if(f.hasOwnProperty(t))for(a in s)s.hasOwnProperty(a)&&u(s[a],e,n)}function s(e,t,n){return function(){var i=String(e),r=i.lastIndexOf(".");for(a(e,e,t,n);r!==-1;)i=i.substr(0,r),r=i.lastIndexOf("."),a(e,i,t,n)}}function u(e){for(var t=String(e),i=Boolean(f.hasOwnProperty(t)&&n(f[t])),r=t.lastIndexOf(".");!i&&r!==-1;)t=t.substr(0,r),r=t.lastIndexOf("."),i=Boolean(f.hasOwnProperty(t)&&n(f[t]));return i}function c(e,t,n,i){var r=s(e,t,i),o=u(e);return!!o&&(n===!0?r():setTimeout(r,0),!0)}t.__esModule=!0;var l={};l.immediateExceptions=!0;var f={},d=-1;l.publish=function(e,t){return c(e,t,!1,l.immediateExceptions)},l.publishSync=function(e,t){return c(e,t,!0,l.immediateExceptions)},l.subscribe=function(e,t){if("function"!=typeof t)return!1;f.hasOwnProperty(e)||(f[e]={});var n="uid_"+String(++d);return f[e][n]=t,n},l.clearAllSubscriptions=function(){f={}},l.clearSubscriptions=function(e){var t;for(t in f)f.hasOwnProperty(t)&&0===t.indexOf(e)&&delete f[t]},l.unsubscribe=function(e){var t,n,i,r="string"==typeof e&&f.hasOwnProperty(e),o=!r&&"string"==typeof e,a="function"==typeof e,s=!1;if(r)return void delete f[e];for(t in f)if(f.hasOwnProperty(t)){if(n=f[t],o&&n[e]){delete n[e],s=e;break}if(a)for(i in n)n.hasOwnProperty(i)&&n[i]===e&&(delete n[i],s=!0)}return s},t["default"]=l,e.exports=t["default"]},function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=0;return k.Terminal.mobile&&(t=1),!!(1===e.useable&&e.terminal&&e.terminal.indexOf(t)>-1)}function a(){return{"userid":g["default"].getNTID(),"userinfo":{"loginid":g["default"].get("loginid"),"username":g["default"].get("username"),"level":S["default"].get("ulevel")||"0"},"isvip":parseInt(S["default"].get("ulevel")||"0",10),"chatstatus":K.CHAT,"type":T.USER_TYPE.VISITOR,"startpage":{"url":window.location.href,"pagetitle":document.title,"prid":S["default"].get("prid")}}}t.__esModule=!0,t["default"]=t.HISTORY_CONFIG=t.CONVERSATION_TYPE=t.CONVERSATION_STATUS=t.CONVERSATION_AVATAR=t.DETAIL_TYPE=t.MEMBER_STATUS=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(144),c=i(u),l=n(132),f=i(l),d=n(126),p=i(d),h=n(149),g=i(h),m=n(153),v=i(m),y=n(152),b=i(y),T=n(150),w=n(131),S=i(w),M=n(154),E=i(M),C=n(168),_=i(C),x=n(158),I=i(x),N=n(130),O=i(N),A=n(139),R=i(A),D=n(138),L=i(D),k=n(113),U=n(167),P=i(U),F=n(125),j=i(F),G=n(170),V=i(G),B=n(171),H=i(B),q=n(161),z=i(q),K=t.MEMBER_STATUS={"INIT":0,"CHAT":1,"LEAVE":2,"EXIT":3,"BUSY":4,"OFFLINE":5},Y=t.DETAIL_TYPE={"ALL":0,"BASE":1,"MEMBER":2},W=t.CONVERSATION_AVATAR={"SINGLE":0,"MULTI":1},$=t.CONVERSATION_STATUS={"IDLE":1,"READY":2,"TALK":3,"SLEEP":4,"DESTROY":5,"BUSY":8001,"LEAVEMESSAGE":8002,"LEAVEMESSAGECLOSE":8003},Q=t.CONVERSATION_TYPE={"SINGLE":0,"INVITE":1,"OUT":2,"IN":3,"ROBOT":4},J=(t.HISTORY_CONFIG={"page":1,"rp":5},function(){function t(e,n,i){r(this,t),this.converid="JS"+c["default"].v4(),this.exterinfo=n,this.requestid="JS"+c["default"].v4(),this.requesttime=0,this.requestTemplateid=i,this.hasCurrentConversationHistorymessage=!0,this.hasHistoryConversationList=!1,this.historyConversationList="",this.historyMessagePage=1,this.unreadMessageCount=0,this.hasHistoryMessage=!1,this.chatwindowstatus="init",this.sendTooQuick=!1,this.requestidArr=[],this.kfCount=0,this.allowAdd=!0,this.forbidden=0,this._evaluateHide=!0,this._leaveMessageHide=!0,this.predictMessage="",this.lastRobotid="",this.fromuser=a(),this.setMembers([this.fromuser]),this.firstTimeConnectKf=!0,e&&this.request()}return t.prototype.isValid=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e||this.converid;return t.indexOf("JS")===-1},t.prototype.request=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(p["default"].trace("Conversation: 开始请求会话资源",d.INFO),p["default"].trace("Conversation: 请求id, "+this.requestid,d.INFO),p["default"].trace("Conversation: 请求模板id, "+this.requestTemplateid,d.INFO),!this.sendTooQuick||t){this.sendTooQuick=!0,P["default"].setRequestid(this.requestid);var n=this.requestid+"_"+this.requesttime;this.requesttime+=1,this.fromuser=a(),v["default"].remoteRequestChat({"templateid":this.requestTemplateid,"requestid":n,"type":1,"exterinfo":this.exterinfo,"fromuser":this.fromuser,"encryption":S["default"].getEncryption(),"sid":L["default"].get("xn_sid_"+S["default"].get("siteid"))}),setTimeout(function(){e.sendTooQuick=!1},5e3)}},t.prototype.rebuild=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.converid,n="JS"+c["default"].v4();e&&E["default"].cloneMessage(t,n),this.lastConverid=t,this.converid=n,this.firstTimeConnectKf=!0},t.prototype.requestHistory=function(){this.historyMessagePage>20||(this.hasHistoryConversationList?this.requestOldConversationHistorymessage():this.requestOldConversationList())},t.prototype.requestOldConversationHistorymessage=function(){var e=this,t=S["default"].get("siteid"),n=O["default"].get("dolphinServer"),i=this.converid;(0,R["default"])(n+"/evs/"+t+"/storage/conversationstorage?a=gcm&converid="+this.historyConversationList+"&page="+this.historyMessagePage+"&per_page=20&order=0").then(function(t){t.length<20?(E["default"].addHistoryMessage(i,t),e.hasHistoryMessage=!1):(E["default"].addHistoryMessage(i,t),e.hasHistoryMessage=!0),e.historyMessagePage+=1,j["default"].handleChatMessage(e.hasHistoryMessage)})},t.prototype.requestOldConversationList=function(){var e=S["default"].get("siteid"),t=g["default"].get("userid"),n=O["default"].get("dolphinServer"),i=this;this.historyConversationList?this.requestOldConversationHistorymessage():(0,R["default"])(n+"/evs/"+e+"/storage/conversationstorage?a=gcc&customerid="+t+"&count=10").then(function(e){e&&e.converids&&e.converids.length>=1&&(i.historyConversationList=i.filterConverids(e.converids),i.historyConversationList&&(i.hasHistoryMessage=!0,i.hasOldConversationList=!0,i.requestOldConversationHistorymessage()))})},t.prototype.filterConverids=function(e){var t=this,n=e.filter(function(e){var n=e.split("_").slice(0,-1).join("_");return n===t.templateid});return n.toString()},t.prototype.enter=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.sendTooQuick||(this.setMember(e,"chatstatus",K.CHAT),e===g["default"].getNTID()&&(P["default"].setTemplateid(this.templateid),this.fromuser=a(),t&&v["default"].remoteEnterConversation({"converid":this.converid,"fromuser":this.fromuser,"usertype":T.USER_TYPE.VISITOR})))},t.prototype.leave=function(e){this.setMember(e,"chatstatus",K.LEAVE),this.fromuser.chatstatus=K.LEAVE,e===g["default"].getNTID()&&this.isValid()&&(_["default"].changeCarry(!1,this.converid),this.fromuser.chatstatus=K.LEAVE,v["default"].remoteLeaveConversation({"converid":this.converid}),this.chatwindowstatus="close"),e===g["default"].getNTID()&&this.status===$.LEAVEMESSAGE&&(this.status=$.LEAVEMESSAGECLOSE)},t.prototype.staffservice=function(e){return e?(this.rebuild(),this.requestTemplateid=e,void this.request(!0)):void v["default"].remoteRobotSwitchArtificial({"converid":this.converid,"customerid":g["default"].getNTID(),"templateid":e||this.templateid})},t.prototype.busy=function(){this.status=$.BUSY},t.prototype.leaveMessage=function(){this.status=$.LEAVEMESSAGE;var e=new V["default"](I["default"].get("leaveMessage"));this.setLeaveMessageViewModel(e),this.enforcementUseable=!1,window.NT_UI&&!window.NT_UI.isCustom&&"function"==typeof NTKF.ChangeToMessage&&NTKF.ChangeToMessage()},t.prototype.talk=function(){this.status=$.TALK},t.prototype.sendPredictMessage=function(e){v["default"].remoteOnPredictMessage({"converid":this.converid,"fromuser":this.fromuser,"message":e})},t.prototype.sendEvaluateResult=function(e){var t=this.converid||"";t&&!this.isValid()&&this.lastConverid&&(t=this.lastConverid),v["default"].remoteEvaluationConverstion({"converid":t,"type":e.type,"evaluation":e.evaluation,"remark":""})},t.prototype.isMemberActive=function(e){var t=this.getMember(e);return!(!t||t.chatstatus!==K.CHAT)},t.prototype.isVisitorActive=function(){return this.isMemberActive(g["default"].getNTID())},t.prototype.isSend=function(){for(var e=!1,t=0;t<this.members.length;t+=1){var n=this.members[t];n.userid!==g["default"].getNTID()&&(e=!0)}return I["default"].get("autoconnect")||this.isValid()||this.isBusy()||(e=!0),e},t.prototype.setDetailInfo=function(t,n){p["default"].trace("Conversation: 接收到会话详细信息",d.INFO);var i=n.converid,r=n.convertype,o=n.name,a=n.logo,s=n.members,u=n.status,c=n.evaluatemethod,l=n.forbiddend,f=n.servertime,h=n.signature,g=n.externalname;switch(O["default"].get("checkTime")||(e.timedifference=f-(new Date).getTime()),t){case Y.ALL:this.setConverid(i),this.setConverType(r),this.setName(o),this.setLogo(a),this.setMembers(s),this.setStatus(u),this.setEvaluate(c),this.setForbidden(l),this.setLastRobotid(),this.setSignature(h),this.setExternalname(g);break;case Y.BASE:this.setConverid(i),this.setName(o),this.setMembers(s);break;case Y.MEMBER:}p["default"].trace("Conversation: 会话详细信息设置完毕",d.INFO),p["default"].trace("Conversation: 会话id, "+this.converid,d.INFO),this.firstTimeConnectKf&&(z["default"].execute("connectKf",[{"kfid":this.getkfid(),"kfName":this.getName()}]),this.firstTimeConnectKf=!1)},t.prototype.setConverid=function(e){return this.converid===e?void E["default"].sendStashMessage(this.converid,e):(this.isValid()||this.converid===e||(E["default"].sendStashMessage(this.converid,e),this.converid=e,this.requestHistory()),void(this.isValid(e)&&(this.templateid||(this.templateid=e.substring(0,e.lastIndexOf("_"))),_["default"].changeCarry(!0,this.converid,this.templateid))))},t.prototype.getConverid=function(){return this.converid},t.prototype.getRequestid=function(){return this.requestid},t.prototype.setConverType=function(e){this.convertype=e},t.prototype.setName=function(e){this.name=e},t.prototype.getName=function(){var e=I["default"].get("header").name;if(this.externalname)return this.externalname;if(!this.isSend()||this.isLeaveMessage())return this.waitername||e;if(this.kfCount>1)return NT_LANG.multiSession;var t=this.getMember(this.kfid);return t.showname?e=t.showname:t.nickname?e=t.nickname:t.username&&(e=t.username),e},t.prototype.setWaitersiteid=function(e){this.waitersiteid=e},t.prototype.setWaiterName=function(e){this.waitername=e},t.prototype.getWaiterName=function(){return this.waitername},t.prototype.setLogo=function(e){this.logo=e},t.prototype.getLogo=function(){return this.logo?this.logo:this.kfCount>1?e.resource.defaultMultDestLogo:this.getMember(this.kfid)?this.getMember(this.kfid).logo?this.getMember(this.kfid).logo:e.resource.defaultDestLogo:I["default"].get("header").logo&&"null"!==I["default"].get("header").logo?I["default"].get("header").logo:e.resource.defaultDestLogo},t.prototype.setSignature=function(e){this.signature=e},t.prototype.getSignature=function(){return this.signature?this.signature:this.getMember(this.kfid)&&this.getMember(this.kfid).signature?this.getMember(this.kfid).signature:""},t.prototype.setExternalname=function(e){this.externalname=e},t.prototype.updateKfCount=function(){var e=this,t=!1;this.kfCount=0,this.members&&2===this.members.length&&(t=!0),this.members.forEach(function(n){n.logo=n.portrait,n.type!==T.USER_TYPE.KEFU&&n.type!==T.USER_TYPE.ROBOT||(t&&(e.kfid=n.userid),n.chatstatus===K.CHAT&&(e.kfid=n.userid,e.kfCount+=1))}),0===this.kfCount&&this.rebuild()},t.prototype.setMembers=function(e){this.members=e,this.updateKfCount(),b["default"].addMembers(e)},t.prototype.getMembers=function(){return this.members},t.prototype.getkfid=function(){return this.kfid},t.prototype.setLeaveMessageKfid=function(e){NTKF.leaveMessageKfid=e,this.leaveMessageKfid=e},t.prototype.getLeaveMessageKfid=function(){return this.leaveMessageKfid||NTKF.leaveMessageKfid||this.kfid},t.prototype.setMember=function(e,t,n){var i=this.getMember(e);i&&(i[t]=n),this.updateKfCount()},t.prototype.getMember=function(e){var t="";return this.members.forEach(function(n){n.userid===e&&(t=n)}),t},t.prototype.isTalk=function(){return this.status===$.TALK},t.prototype.isBusy=function(){return this.status===$.BUSY},t.prototype.isLeaveMessage=function(){return this.status===$.LEAVEMESSAGE},t.prototype.isRobot=function(){return this.convertype===Q.ROBOT},t.prototype.setPredictMessage=function(e){this.predictMessage=e},t.prototype.clearPredictMessage=function(){this.predictMessage=""},t.prototype.setEvaluate=function(e){if(e){if(e.initiative){var t=e.initiative;this.initiativeUseable=o(t)}else this.initiativeUseable=!1;if(e.enforcement){var n=e.enforcement;this.enforcementUseable=o(n)}else this.enforcementUseable=!1;"{}"===JSON.stringify(e)&&(this.initiativeUseable=!1,this.enforcementUseable=!1)}I["default"].setToolStatus("evaluate",this.initiativeUseable?1:0)},t.prototype.setEvaluateSubmitType=function(e){this._evaluateSubmitType=e},t.prototype.getEvaluateSubmitType=function(){return this._evaluateSubmitType},t.prototype.submitEvaluate=function(e){var t=this.converid||"";t&&!this.isValid()&&this.lastConverid&&(t=this.lastConverid);var n=this.generateSubmitEvaluateData(e);v["default"].remoteEvaluationConverstion({"converid":t,"type":this._evaluateSubmitType,"evaluation":n,"remark":""}),z["default"].execute("submitEvaluate",[g["default"].get("loginid"),g["default"].get("username"),this.converid,E["default"].getMessagesByConverid(this.converid),n]),this.setEvaluateHide(!0)},t.prototype.generateSubmitEvaluateData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=this.evaluateViewModel;return Object.keys(e).forEach(function(i){switch(i){case"starCount":t.push(n.getStarSubmitData(e.starCount.starCount));break;case"solveProblemIndex":t.push(n.getSolveProblemSubmitData(e.solveProblemIndex));break;case"evaluateContent":t.push(n.getEvaluateContentSubmitData(e.evaluateContent));break;default:p["default"].trace("未知的评价表单提交key值："+i,d.WARN)}}),t.sort(function(e,t){return e.rank-t.rank}),t},t.prototype.setEvaluateViewModel=function(e){this.evaluateViewModel=e},t.prototype.getEvaluateViewModel=function(){return this.evaluateViewModel},t.prototype.setEvaluateHide=function(e){this._evaluateHide=e,e?NT_UI.hideEvaluate():(NT_UI.setEvaluateData(this.evaluateViewModel.getViewData()),NT_UI.showEvaluate())},t.prototype.setLeaveMessageHide=function(e){this._leaveMessageHide=e,e||NT_UI.setLeaveMessageData(this.LeaveMessageViewModel.getViewData())},t.prototype.isEvaluateHide=function(){return this._evaluateHide},t.prototype.setLeaveMessageViewModel=function(e){this.LeaveMessageViewModel=e},t.prototype.getLeaveMessageViewModel=function(){return this.LeaveMessageViewModel},t.prototype.isLeaveMessageHide=function(){return this._leaveMessageHide},t.prototype.setStatus=function(e){var t=$.TALK;switch(e){case t:I["default"].setAllToolStatus(1),this.isRobot()||E["default"].deleteBusyMessage(this.converid),E["default"].deleteAutoDisconnectMessage(this.converid)}this.status=e},t.prototype.updateMember=function(e){b["default"].update(e)},t.prototype.getConversationAvatar=function(){for(var e=0,t=void 0,n=0,i=this.members.length;n<i;n+=1){var r=this.members[n];g["default"].getNTID()!==r.userid&&(e+=1,t=r.logo)}switch(e){case 0:return W.SINGLE;case 1:return t||W.SINGLE;default:return W.MULTI}},t.prototype.allowAddUnReadMessageCount=function(e){this.allowAdd=e},t.prototype.addUnreadMessageCount=function(){this.allowAdd?this.unreadMessageCount+=1:this.clearUnreadMessageCount()},t.prototype.clearUnreadMessageCount=function(){this.unreadMessageCount=0},t.prototype.setForbidden=function(e){this.forbidden=e,1===e&&(this.leave(g["default"].getNTID()),this.status=$.LEAVEMESSAGE,this.enforcementUseable=!1,H["default"].clear(this.converid),P["default"].clear(this.templateid,this.requestid),this.rebuild(),window.NT_UI&&!window.NT_UI.isCustom&&"function"==typeof NTKF.ChangeToMessage&&NTKF.ChangeToMessage())},t.prototype.getForbidden=function(){return this.forbidden},t.prototype.terminated=function(){this.initiativeUseable=!1,this.enforcementUseable=!1},t.prototype.setLastRobotid=function(){this.isRobot()&&(this.lastRobotid=this.kfid)},t.prototype.getAssistList=function(e){var t=this;return new Promise(function(n,i){if(!t.lastRobotid||!e)return void i();var r={"siteid":S["default"].get("siteid"),"question":e,"robotId":t.lastRobotid,"sessionId":t.converid,"senderId":g["default"].getNTID()};(0,R["default"])(O["default"].get("eagleAssistServer")+"?"+f["default"].stringify(r)).then(function(t){if(t.data&&t.data.guideList){var i=t.data.guideList.map(function(t){var n=t.question.replace(e,"<span>"+e+"</span>");return{
"name":n}});n(i)}})})},t.prototype.isSame=function(e,t){var n=e;return"object"===("undefined"==typeof e?"undefined":s(e))&&e[t]&&(n=e[t]),this[t]===n},t.prototype.isSameRequestid=function(e){return this.isSame(e,"requestid")},t.prototype.isSameConverid=function(e){return this.isSame(e,"converid")},t.prototype.isSameExterinfo=function(e){return JSON.stringify(this.exterinfo)===JSON.stringify(e)},t.prototype.isSameTemplateid=function(e){return this.isSame(e,"templateid")},t}());t["default"]=J}).call(t,n(112))},function(e,t,n){var i=n(145),r=n(148),o=r;o.v1=i,o.v4=r,e.exports=o},function(e,t,n){function i(e,t,n){var i=t&&n||0,l=t||[];e=e||{};var f=e.node||r,d=void 0!==e.clockseq?e.clockseq:o;if(null==f||null==d){var p=a();null==f&&(f=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=o=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:c+1,m=h-u+(g-c)/1e4;if(m<0&&void 0===e.clockseq&&(d=d+1&16383),(m<0||h>u)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=h,c=g,o=d,h+=122192928e5;var v=(1e4*(268435455&h)+g)%4294967296;l[i++]=v>>>24&255,l[i++]=v>>>16&255,l[i++]=v>>>8&255,l[i++]=255&v;var y=h/4294967296*1e4&268435455;l[i++]=y>>>8&255,l[i++]=255&y,l[i++]=y>>>24&15|16,l[i++]=y>>>16&255,l[i++]=d>>>8|128,l[i++]=255&d;for(var b=0;b<6;++b)l[i+b]=f[b];return t?t:s(l)}var r,o,a=n(146),s=n(147),u=0,c=0;e.exports=i},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function(){return n(i),i}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e,t){function n(e,t){var n=t||0,r=i;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}for(var i=[],r=0;r<256;++r)i[r]=(r+256).toString(16).substr(1);e.exports=n},function(e,t,n){function i(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}var r=n(146),o=n(147);e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(150),u=i(s),c=n(131),l=i(c),f=n(151),d=i(f),p=n(152),h=i(p),g=function(e){function t(){r(this,t);var n=o(this,e.call(this));return n.conversationInfoRule=["userid","username"],n.hasHistoryConversationFlag=!0,n}return a(t,e),t.prototype.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.init=function(){this.defaultName=""+NT_LANG.visitor;var e=l["default"].getVistorInfo();Object.assign(this,e),this.set("token",d["default"].getToken()),this.set("ntid",d["default"].getNTID()),this.set("userid",d["default"].getNTID()),this.set("loginid",d["default"].getLoginid()),h["default"].add({"userid":this.get("userid"),"username":this.get("username")})},t.prototype.getVisitorConversationInfo=function(){var e=this,t={};return this.conversationInfoRule.forEach(function(n){t[n]=e.get(n)}),t},t.prototype.set=function(e,t){this[e]=t},t.prototype.get=function(e){if("username"===e&&!this.username)try{return""+this.defaultName+this.userid.substring(this.userid.length-6)}catch(t){return this.defaultName}return"userid"!==e||this.userid?this[e]:l["default"].get("loginid")},t.prototype.getNTID=function(){return this.ntid},t.prototype.isLogin=function(){return!(!this.get("userid")&&this.get("username")===this.defaultName)},t.prototype.hasHistoryConversation=function(){return this.hasHistoryConversationFlag},t}(u["default"]);t["default"]=g.prototype.getInstance(),e.exports=t["default"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=(t.USER_TYPE={"KEFU":1,"VISITOR":2,"ROBOT":3},function(){function e(t){n(this,e);var i=t;t&&t.userinfo&&(i=t.userinfo,i.logo=t.userinfo.portrait),Object.assign(this,i)}return e.prototype.update=function(e){Object.assign(this,e)},e.prototype.isSameUserId=function(e){var t=e;return"object"===("undefined"==typeof e?"undefined":i(e))&&(t=e.userid),this.userid===t},e.prototype.setUserid=function(e){this.userid=e},e.prototype.getUserid=function(){return this.userid},e.prototype.setUsername=function(e){this.username=e},e.prototype.getUsername=function(){return this.username},e.prototype.setAccount=function(e){this.account=e},e.prototype.getAccount=function(){return this.account},e.prototype.setLogo=function(e){this.logo=e},e.prototype.getLogo=function(){return this.logo},e.prototype.setNickname=function(e){this.nickname=e},e.prototype.getNickname=function(){return this.nickname},e.prototype.setShowname=function(e){this.showname=e},e.prototype.getShowname=function(){return this.showname},e.prototype.setStatus=function(e){this.status=e},e.prototype.getStatus=function(){return this.status},e}());t["default"]=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=n(126),a=i(o),s=n(131),u=i(s),c=n(130),l=i(c),f=n(139),d=i(f),p=n(149),h=i(p),g=n(124),m=i(g),v=72e5,y=function(){function e(){r(this,e),(0,m["default"])("AccountCenter",this),this.ntidExpires=v}return e.prototype.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.request=function(){var e=this;this.ntidParam=u["default"].getAccountNtidRequestParam(),this.AccountCenterUrl=l["default"].get("AccountCenterUrl"),this.setToken("bnRpZDpkNWY4OWQzOS1mZGU2LTQ5MmQtYmRiNi1jNWQ0YWRjNzJmZDM=");var t=this.getNTIDFromStorage();return t&&t.ntid&&t.username?new Promise(function(n){a["default"].trace("AccountCenter: 采用缓存id，"+t.ntid+"，缓存访客名称："+t.username,o.INFO),e.setNTID(t.ntid,t.username),h["default"].set("username",t.username),n()}):this.requestNTID().then(function(t){if(401===t.code)return l["default"].enable_chat=!1,void(l["default"].chat_toast="当前智能客服正在内测阶段，请耐心等待，预计开放时间：2018年10月8日。");if(403===t.code)return l["default"].enable_chat=!1,void(l["default"].chat_toast="请求客服授权失败，请刷新后再试！");if(t.data&&t.data.expires&&(e.ntidExpires=t.data.expires),t.data&&t.data.ntid&&t.data.ntid.indexOf("[")===-1&&t.data.username)a["default"].trace("AccountCenter: 小能id已分配成功分配，"+t.data.ntid,o.INFO),e.setNTID(t.data.ntid,t.data.username,!0),h["default"].set("username",t.data.username);else{a["default"].trace("AccountCenter: 小能id分配失败，采用本地id，"+(e.ntidParam.guestid||e.ntidParam.loginid),o.WARN);var n=e.ntidParam.guestid,i="";if(e.ntidParam.loginid)n=e.ntidParam.siteid+"_"+e.ntidParam.loginid,i=e.ntidParam.username;else try{i=""+NT_LANG.visitor+n.substring(n.length-6)}catch(r){i=""+NT_LANG.visitor}e.setNTID(n,i),h["default"].set("username",i)}})},e.prototype.requestToken=function(){return(0,d["default"])(this.AccountCenterUrl+"token",{"method":"get","headers":{"Content-Type":"application/json"}})},e.prototype.requestNTID=function(){return a["default"].trace("AccountCenter: 开始请求小能id",o.INFO),(0,d["default"])(this.AccountCenterUrl+"ntid",{"method":"POST","headers":{"Content-Type":"application/json","token":this.token},"body":JSON.stringify(this.ntidParam)},1e4)},e.prototype.setNTID=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.ntid=e,n&&this.setNTIDIntoStorage(e,t)},e.prototype.setToken=function(e){this.token=e,l["default"].set("NTSkyEyeToken",e),l["default"].set("NPigeonToken",e),l["default"].set("NDolphinToken",e),l["default"].set("NAccCenToken",e)},e.prototype.getNTID=function(){return this.ntid?this.ntid:this.ntidParam.guestid||this.ntidParam.loginid},e.prototype.getLoginid=function(){var e=this.ntidParam.guestid;return e?this.ntidParam.loginid:""},e.prototype.getToken=function(){return this.token},e.prototype.getNTIDFromStorage=function(){var e=this.ntidParam.guestid||"",t=this.ntidParam.loginid;try{var n=window.localStorage.getItem("xn_ntid_"+u["default"].get("siteid")),i=JSON.parse(n);if(i.key===e+t&&(new Date).getTime()-i.date<this.ntidExpires)return{"ntid":i.ntid,"username":i.username}}catch(r){return!1}return!1},e.prototype.setNTIDIntoStorage=function(e,t){var n=this.ntidParam.guestid||"",i=this.ntidParam.loginid;try{window.localStorage.setItem("xn_ntid_"+u["default"].get("siteid"),JSON.stringify({"key":n+i,"ntid":e,"username":t,"date":(new Date).getTime()}))}catch(r){return!1}return!0},e}();t["default"]=y.prototype.getInstance(),e.exports=t["default"]},function(e,t,n){(function(i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var a=n(149),s=r(a),u=n(150),c=r(u),l=function(){function e(){o(this,e),this.userList=[]}return e.prototype.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.add=function(e){for(var t=!0,n=this.userList,i=0,r=n.length;i<r;i+=1)if(n[i].isSameUserId(e)){t=!1;break}t&&this.userList.push(new c["default"](e))},e.prototype.update=function(e){for(var t=this.userList,n=0,i=t.length;n<i;n+=1){var r=t[n];r.isSameUserId(e)&&r.update(e)}},e.prototype.addMembers=function(e){var t=this;e.forEach(function(e){t.add(e)})},e.prototype.getUserByUserId=function(e){for(var t=this.userList,n=0,i=t.length;n<i;n+=1){var r=t[n];if(r.getUserid()===e)return r}return null},e.prototype.getIconByUserId=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t)for(var n=this.userList,r=0,o=n.length;r<o;r+=1){var a=n[r];if(a.getUserid()===e&&a.getLogo())return a.getLogo()}return e===s["default"].getNTID()?i.resource.defaultVisitorLogo:i.resource.defaultDestLogo},e.prototype.getNameByUserId=function(e){for(var t="",n=this.userList,i=0,r=n.length;i<r;i+=1){var o=n[i];o.getUserid()===e&&(t=o.getUsername())}return t},e}();t["default"]=l.prototype.getInstance(),e.exports=t["default"]}).call(t,n(112))},function(e,t,n){(function(i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var a=n(127),s=r(a),u=n(113),c=n(149),l=r(c),f=n(131),d=r(f),p=n(130),h=r(p),g=n(126),m=r(g),v=n(124),y=r(v),b=n(141),T=r(b),w=n(154),S=r(w),M=n(162),E=void 0,C=void 0,_=void 0,x=void 0,I=void 0,N=void 0,O=void 0,A=void 0,R=void 0,D=void 0,L=void 0,k=void 0,U=void 0,P=void 0,F=void 0,j=void 0,G=void 0,V=void 0,B=void 0,H=function(){function e(){o(this,e),this.MQTT={},this.inited=!1,this.status="",this.callbackidList=[],this.sendTooQuick=!1,this.isLoading=!1,this.stashMessage=[],this.isSendingStashMessage=!1}return e.prototype.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.setMQTTConfig=function(){var e=new E;return e.appId=d["default"].get("siteid"),e.userId=this.ntid,e.userName=this.username,e.token=h["default"].get("NPigeonToken"),e.synMessageUrl=h["default"].get("IMHttpUrl"),e.device='{\n      "id":"'+this.ntid+'",\n      "deviceType": "'+(u.Terminal.mobile?"wap":"web")+'",\n      "os":"'+u.Terminal.system+'",\n      "deviceModel":"null",\n      "browse":"'+u.Terminal.browser+'"\n    }',e.deviceType=u.Terminal.mobile?"WAP":"WEB",e.sessionId="s_"+this.ntid,e.useSSL=h["default"].get("IMSSL"),e.hosts=[h["default"].get("IMHost")],e.ports=[h["default"].get("IMPort")],e.mqu=i.mqu,e.mqp=i.mqp,e},e.prototype.init=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isLoading){var t=this,i="ntimsdk";window.WebSocket||(i="ntimsdkie9");var r=function(){var i;t.isLoading=!1,E=NT_IMSDK.NIMClientConfig,C=NT_IMSDK.NIMClient,G=NT_IMSDK.MessageACK,NTKF.MQTTClient=NT_IMSDK.Client,NTKF.MQTTMessage=NT_IMSDK.Message,_=n(164),x=n(165),I=x.remoteRequestChat,N=x.remoteEnterConversation,O=x.remoteLeaveConversation,A=x.remoteGetUserHistoryConversations,R=x.remoteSendMessage,D=x.remoteOnPredictMessage,L=x.remoteEvaluationConverstion,k=x.remoteRobotSwitchArtificial,U=x.remoteExitQueue,P=x.remoteCallBackStreamMedia,F=x.remoteLeaveStreamMedia,j=x.remoteStreamMedia,V=2,i={},i[I]=V,i[N]=V,i[O]=V,i[A]=0,i[R]=V,i[D]=0,i[L]=V,i[k]=V,i[U]=V,i[P]=0,i[F]=0,i[j]=0,B=i,(0,y["default"])("exitQueue",t.remoteExitQueue.bind(t)),m["default"].trace("IM: 通讯能力库开始初始化",g.INFO),t.ntid=l["default"].get("ntid"),t.username=l["default"].get("username"),t.feedbackMessageList={};var r=new C,o=t.setMQTTConfig();t.callBack||(t.callBack=new _),r.init(o,t.callBack),t.MQTT={"nimClient":r,"config":o,"callback":t.callBack},t.setStatus("init"),t.inited=!0,e&&t.connect()};window.NT_IMSDK?r():(this.isLoading=!0,(0,M.LoadScript)(i,r))}},e.prototype.getHead=function(){return{"m":"","t":h["default"].get("NDolphinToken"),"e":d["default"].get("siteid"),"v":"","u":this.ntid,"l":window.NT_LANG_TYPE}},e.prototype.connect=function(){var e=this.MQTT.nimClient;e.connect(),this.setStatus("connect")},e.prototype.disconnect=function(){var e=this.MQTT.nimClient;e.doDisconnect(),this.setStatus("disconnect")},e.prototype.destroy=function(){var e=this.MQTT.nimClient;e&&e.destroy(),this.setStatus("disconnect")},e.prototype.reconnect=function(){},e.prototype.send=function(e){this.publish(R,e,11,B[R])},e.prototype.receive=function(e){this.callback.receive.call(this,e.body.content,e.body.msgtype)},e.prototype.publish=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];m["default"].trace(""+(JSON.stringify(e)+": "+JSON.stringify(t)+JSON.stringify(n)),g.INFO);var o=t.converid,a=this.getHead();if(a.m=e,3003===e&&t.templateid)try{a.e=t.templateid.toLowerCase().match(/[a-z]+_[0-9]+/g)[0]}catch(s){m["default"].trace("templateid截取siteid异常",g.INFO)}o&&(a.e=o.split("_").filter(function(e,t){return t<2}).join("_"));var u=this.MQTT.nimClient,c=JSON.stringify({"head":a,"body":t});if(!u){var l=this;return void new Promise(function(){l.connect()}).then(function(){l.publish(e,t,n,i,r)})}r?u.publish(c,n,i,o,h["default"].get("IMToUser"),12):u.publish(c,n,i,o,h["default"].get("IMToUser")),e===N?u.startMQTTPullMessage():e===O&&u.stopMQTTPullMessage()},e.prototype.setStatus=function(e){m["default"].trace("IM: 通讯能力库"+g.LANG_IMSTATUS[e],g.INFO),this.status=e,"handshake"!==e&&"success"!==e||this.inited&&this.sendStashMessage()},e.prototype.getStatus=function(){return this.status},e.prototype.canSend=function(e,t){return!(!this.inited||"handshake"!==this.status&&"success"!==this.status)||(this.stashMessage.push({"func":e,"msg":t}),!1)},e.prototype.sendStashMessage=function(){if(!this.isSendingStashMessage){this.isSendingStashMessage=!0;for(var e=0,t=this.stashMessage.length;e<t;e+=1){var n=this.stashMessage[e],i=n.func,r=n.msg;this[i](r)}this.stashMessage=[],this.isSendingStashMessage=!1}},e.prototype.remoteRequestChat=function(e){this.canSend("remoteRequestChat",e)&&this.publish(I,e,11,B[I],!0)},e.prototype.remoteEnterConversation=function(e){if(this.canSend("remoteEnterConversation",e)){var t=e.converid,n=e.fromuser,i=e.usertype;this.publish(N,{"converid":t,"fromuser":n,"usertype":i},11,B[N],!0)}},e.prototype.remoteLeaveConversation=function(e){if(this.canSend("remoteLeaveConversation",e)){var t=e.converid;this.publish(O,{"converid":t},11,B[O])}},e.prototype.remoteSendMessage=function(e){this.canSend("remoteSendMessage",e)&&this.send(e)},e.prototype.remoteOnPredictMessage=function(e){this.canSend("remoteOnPredictMessage",e)&&this.publish(D,e,11,B[D])},e.prototype.remoteEvaluationConverstion=function(e){this.canSend("remoteEvaluationConverstion",e)&&this.publish(L,e,11,B[L],!0)},e.prototype.remoteGetUserHistoryConversations=function(e){this.canSend("remoteGetUserHistoryConversations",e)&&this.publish(A,e,11,B[A])},e.prototype.remoteMessageFeedBack=function(e,t){if(!this.feedbackMessageList[e.messageid]){var n=this.MQTT.nimClient;n.publish(e,s["default"].STATUS_MESSAGE_SEND_READ,G.NO_ACK,e.conversationid,t,s["default"].MESSAGE_ORDER),this.feedbackMessageList[e.messageid]=1}},e.prototype.remoteRobotSwitchArtificial=function(e){this.canSend("remoteRobotSwitchArtificial",e)&&this.publish(k,e,11,B[k])},e.prototype.remoteExitQueue=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];S["default"].deleteBusyMessage(e.converid);var n=e.isGiveupBtn,i=e.converid;if(n){var r=T["default"].findConversationByConverid(i);if(r.isRobot())return S["default"].deleteRobotSwitchArtiFailMessage(i),delete e.converid,void(this.canSend("remoteExitQueue",e)&&this.publish(U,e,11,B[U]))}0===e.headto&&t?setTimeout(function(){NTKF&&NTKF.closeChat&&NTKF.closeChat(e.converid)},u.Terminal.mobile?300:0):(delete e.converid,this.canSend("remoteExitQueue",e)&&this.publish(U,e,11,B[U]))},e.prototype.remoteCallBackStreamMedia=function(e){this.canSend("remoteCallBackStreamMedia",e)&&this.publish(P,e,11,B[P])},e.prototype.remoteLeaveStreamMedia=function(e){this.canSend("remoteLeaveStreamMedia",e)&&this.publish(F,e,11,B[F])},e.prototype.remoteStreamMedia=function(e){this.canSend("remoteStreamMedia",e)&&this.publish(j,e,11,B[j])},e}();t["default"]=H.prototype.getInstance(),e.exports=t["default"]}).call(t,n(112))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){var n=e.createat,i=t.createat;return n<i?-1:n>i?1:0}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return e.forEach(function(e){var i=!0;t.forEach(function(t){e.messageid===t.messageid&&(i=!1)}),i&&n.push(e)}),n.concat(t)}t.__esModule=!0,t.sortMessageByCreateAt=a;var u=n(142),c=i(u),l=n(126),f=i(l),d=n(127),p=n(141),h=i(p),g=n(140),m=i(g),v=n(125),y=i(v),b=n(155),T=i(b),w=n(158),S=i(w),M=n(124),E=i(M),C=n(137),_=n(161),x=i(_),I="cursor: pointer; color: #009999; display:inline-block; font-size:12px",N=function(){function e(){o(this,e),this.messageList={},this.lastMessage="",this.lastMessageList={},this.systemMessageList={},this.lastShowTime=0,this.showTimeList=[],this.allImageMessage={},this.historyMessageRequestStatus="",this.firstTimeGetHistory=!0,this.messageTryTime={},this.greet={},(0,E["default"])("MessagePool",this),(0,E["default"])("addBusyMessage",this.receiveAddBusyMessage.bind(this))}return e.prototype.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.cloneMessage=function t(e,n){var i=this.messageList[e]||[],t=i.slice(0),o=this.allImageMessage[e]||[],a=o.slice(0),s=this.systemMessageList[e]||{},u=r(s,[]),c=this.lastMessageList[e]||"";return this.messageList[n]=t,this.allImageMessage[n]=a,this.systemMessageList[n]=u,this.lastMessageList[n]=c,delete this.messageList[e],delete this.allImageMessage[e],delete this.systemMessageList[e],delete this.lastMessageList[e],this.messageList[n]},e.prototype.hasValidMessage=function(e){for(var t=!1,n=this.messageList[e],i=0;i<n.length;i+=1){var r=n[i];if("ntproduct"!==r.msgtype&&"faq"!==r.msgtype){t=!0;break}}return t},e.prototype.addMessage=function(e,t){var n=this;if(!e)return null;var i=e.converid;if(e.requestid&&!e.converid&&e.sys){if(this.greet[e.requestid])return null;for(var r=Object.keys(this.messageList),o=0;o<r.length;o+=1){var a=h["default"].findConversationByConverid(r[o]);a&&a.requestid===e.requestid&&(a.isTalk()||a.isBusy())&&(i=a.converid,e.fromuser={"userid":a.getkfid(),"username":a.getName()},e.isGreet=!0,this.greet[e.requestid]=!0)}}if(e&&e.converid&&("faq"===e.msgtype||"ntproduct"===e.msgtype)){var s=h["default"].findConversationByConverid(e.converid);s&&(e.fromuser={"userid":s.getkfid(),"username":s.getName()})}if(!i){var u=e.messageid;return"undefined"==typeof this.messageTryTime[u]&&(this.messageTryTime[u]=0),this.messageTryTime[u]<6?setTimeout(function(){n.messageTryTime[u]+=1,n.addMessage(e,t)},500):this.messageTryTime[u]=0,null}if(i in this.messageList){for(var c=!1,d=this.messageList[i],p=0,g=d.length;p<g;p+=1){var m=d[p];if(m.messageid===e.messageid){m.setStatus(e.status),c=!0;break}}if(c)d&&d.length>0&&(this.lastMessage=d[d.length-1]);else{var v=new T["default"](e,t);d.push(v);var y=this.showTimeList,b=(0,C.getMinuteStampByTimeStamp)(v.createat);if(0===y.length||y.indexOf(b)===-1?(y.push(b),v.showTime=!0):v.showTime=!1,v.isGreet){var w=h["default"].findConversationByRequestid(v.requestid);if(w){for(var S=this.messageList[w.converid]||[],M=0,E=S.length;M<E;M+=1){var _=S[M];if(_.showTime===!0){var x=(0,C.getMinuteStampByTimeStamp)(_.createat);if(x===b){_.showTime=!1;break}}}v.checkGreetMessageTime(),v.showTime=!0}}this.lastMessage=v}}else{var I=new T["default"](e,t);this.messageList[i]=[I],this.lastMessage=I}return f["default"].trace("MessagePool: "+(t?"发送消息":"接收消息")+" "+JSON.stringify(this.lastMessage)+", 会话id: "+i,l.INFO),this.lastMessageList[i]=this.lastMessage.getShowMessage(),this.notifyUIGetMessage(i),this.lastMessage.messageid},e.prototype.updateMessage=function(e,t){var n=e.converid,i=t||e.status,r=this.messageList[n];if(r){for(var o=0,a=r.length;o<a;o+=1){var s=r[o];if(s.messageid===e.messageid){s.setStatus(i);break}}this.notifyUIGetMessage(n)}},e.prototype.deleteMessage=function(e,t){if(e&&t&&e in this.messageList)for(var n=this.messageList[e],i=0,r=n.length;i<r;i+=1)if(n[i].messageid===t){n.splice(i,1),this.notifyUIGetMessage(e);break}},e.prototype.addImgMessage=function(e,t){if(this.allImageMessage&&this.allImageMessage[t]){var n=!1;this.allImageMessage[t].forEach(function(t){t.messageid===e.messageid&&(n=!0)}),n||this.allImageMessage[t].push(e)}else this.allImageMessage[t]=[e]},e.prototype.getImageMessages=function(e){var t=this.allImageMessage[e];return t},e.prototype.updateImageMessage=function(e){var t="",n=Object.keys(this.messageList);1===n.length&&(t=n[0]);var i=this.messageList[t];if(i){for(var r=0,o=i.length;r<o;r+=1){var a=i[r];if(a.uploadid===e.uploadid){Object.assign(a,e),a.request();break}}this.notifyUIGetMessage(t)}},e.prototype.clearImageMessage=function(e){var t="",n=Object.keys(this.messageList);1===n.length&&(t=n[0]);var i=this.messageList[t];if(i){for(var r=0,o=i.length;r<o;r+=1){var a=i[r];if(a.uploadid===e){i.splice(r,1);break}}this.notifyUIGetMessage(t)}},e.prototype.sendStashMessage=function(e,t){var n=void 0;n=e===t?this.getMessagesByConverid(e)||[]:this.cloneMessage(e,t)||[];for(var i=0,r=n.length;i<r;i+=1)n[i].isSend&&1!==n[i].status&&"progress"!==n[i].uploadstatus&&(n[i].setConverid(t),n[i].checkTime(),n[i].request())},e.prototype.setSendingMessageToFailure=function(e){var t=this.messageList[e];t&&(t=t.filter(function(e){return e.getStatus()===b.MESSAGE_STATUS_LIST.SENDING}),t.forEach(function(e){e.setStatus(b.MESSAGE_STATUS_LIST.FAILURE)}),this.notifyUIGetMessage(e))},e.prototype.getMessagesByConverid=function(e){var t=this.messageList[e];t||(t=[],this.messageList[e]=[]);var n=t.sort(a),i=n.slice(0);return i},e.prototype.requestHistoryMessage=function(e){h["default"].requestHistory(e)},e.prototype.addHistoryMessage=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[],r=n;return r&&r.err&&(r=[]),r.reverse().forEach(function(n){var r=!1;if(n.messageid&&n.msgtype&&n.message&&19!==n.msgtype||n.params&&["1","2","3"].indexOf(n.params.xn_cmtid)>-1){n.history=1,n.showConverid=e;var o=(0,C.getMinuteStampByTimeStamp)(n.createat),a=t.showTimeList;0===a.length||a.indexOf(o)===-1?(a.push(o),n.showTime=!0):n.showTime=!1,r=i.some(function(e){return e.messageid===n.messageid}),r||i.push(new T["default"](n,!1))}}),0===r.length?(this.historyMessageRequestStatus="nomore",void this.notifyUIGetHistoryMessage(e,this.historyMessageRequestStatus)):(i.sort(a),this.messageList[e]=s(i,this.messageList[e]),this.historyMessageRequestStatus="success",void this.notifyUIGetHistoryMessage(e,this.historyMessageRequestStatus))},e.prototype.notifyUIGetMessage=function(e){window._XN_noscroll=!1,c["default"].publish("UIStateChange",{"activeConverid":e,"lastMessage":this.lastMessage?Object.assign({},this.lastMessage):this.lastMessage,"historyMessageRequestStatus":"normalMessage"}),y["default"].handleMessageData(e),y["default"].handleScrollMessageBoxBottom()},e.prototype.notifyUIGetHistoryMessage=function(e){c["default"].publish("UIStateChange",{"activeConverid":e,"lastMessage":this.lastMessage,"historyMessageRequestStatus":this.firstTimeGetHistory?"normalMessage":this.historyMessageRequestStatus}),this.firstTimeGetHistory||(window._XN_noscroll=!0),this.firstTimeGetHistory=!1,y["default"].handleMessageData(e)},e.prototype.receiveSendMessageEvent=function(e){f["default"].trace("访客端发送需要转发到服务器,客户端接收不需要转发到服务器"),this.addMessage(e,!0),x["default"].execute("sendMessage",[{"msg":e}])},e.prototype.receiveUpdateMessageStatus=function(e){this.updateMessage(e)},e.prototype.receiveRemoteAddMessage=function(e){19===e.msgtype?(this.addSystemMessage({"converid":e.converid,"sysMsgType":5===e.sys?"success":"none","msg":e.message},9===e.sys?d.SYSTEM_MESSAGE_TYPE.SWITCHART:""),5===e.sys&&y["default"].handleEvaluateResult(e)):(this.addMessage(e,!1),x["default"].execute("receiveMessage",[{"msg":e}]))},e.prototype.receiveRemoteUpdateMessageStatusSuccess=function(e){this.updateMessage(e,1)},e.prototype.receiveAddBusyMessage=function(e,t,n){this.setSendingMessageToFailure(t),S["default"].setAllToolStatus(0);var i=e.number,r=e.queueConfig,o=r.web.content,a=void 0;o?(a=o.replace("{$queue}",i),a=a.replace("{$giveUp}","<span onclick=\"NTKF.exitQueue({converid:'"+t+"',templateid:'"+n+'\', headto:0, isGiveupBtn: 1})" style="'+I+'"> 放弃</span>'),a=S["default"].isLeaveMessageAvailable()?a.replace("{$leaveMessage}","<span onclick=\"NTKF.exitQueue({converid:'"+t+"', templateid:'"+n+'\',headto:1}); NTKF.ChangeToMessage()" style="'+I+'"> 留言</span>'):a.replace("{$leaveMessage}","")):a=NT_LANG.waitMessage,this.deleteBusyMessage(t),this.addSystemMessage({"converid":t,"sysMsgType":"none","msg":a},d.SYSTEM_MESSAGE_TYPE.BUSY)},e.prototype.deleteBusyMessage=function(e){this.deleteSystemMessage(e,d.SYSTEM_MESSAGE_TYPE.BUSY)},e.prototype.addAutoDisconnectMessage=function(e){this.addSystemMessage({"converid":e,"sysMsgType":"none","msg":NT_LANG.autoDisconnectMessage},d.SYSTEM_MESSAGE_TYPE.AUTODISCONNECT)},e.prototype.deleteAutoDisconnectMessage=function(e){this.deleteSystemMessage(e,d.SYSTEM_MESSAGE_TYPE.AUTODISCONNECT)},e.prototype.addRobotSwitchArtiFailMessage=function(e,t){var n=NT_LANG.robotSwitchArtiFailMessage;S["default"].isLeaveMessageAvailable()&&(n+=NT_LANG.robotSwitchArtiFailMessage2,n=n.replace("{$leaveMessage}",'<span onclick="NTKF.ChangeToMessage()" style="'+I+'">'+NT_LANG.robotSwitchArtiFailMessage3+"</span>")),n=n.replace("{$chatwithrobot}","<span onclick=\"NT_CORE.MessagePool.deleteRobotSwitchArtiFailMessage('"+t+'\')" style="'+I+'">'+NT_LANG.robotSwitchArtiFailMessage4+"&nbsp;</span>"),this.addSystemMessage({"converid":t,"sysMsgType":"none","msg":n},d.SYSTEM_MESSAGE_TYPE.SWITCHARTFAILURE)},e.prototype.deleteRobotSwitchArtiFailMessage=function(e){this.deleteSystemMessage(e,d.SYSTEM_MESSAGE_TYPE.SWITCHART),this.deleteSystemMessage(e,d.SYSTEM_MESSAGE_TYPE.SWITCHARTFAILURE)},e.prototype.addSystemMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.converid||(e.converid=m["default"].getCurrentConverid()),e.msgtype=19;var n=this.addMessage(e,!1);t&&(this.systemMessageList[e.converid]||(this.systemMessageList[e.converid]={}),this.systemMessageList[e.converid][t]=n)},e.prototype.deleteSystemMessage=function(e,t){this.deleteMessage(e,this.getSystemMessageid(e,t))},e.prototype.getSystemMessageid=function(e,t){return this.systemMessageList[e]&&this.systemMessageList[e][t]?this.systemMessageList[e][t]:""},e}();t["default"]=N.prototype.getInstance()},function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return!(!e||!t)&&(e.msgtype===t.msgtype&&e.message===t.message&&e.status===t.status&&(!e.style||!t.style||e.style.opacity===t.style.opacity))}t.__esModule=!0,t["default"]=t.MESSAGE_DIRECTION=t.MESSAGE_STATUS_LIST=t.MESSAGE_DOCUMENT_LOGO=t.MESSAGE_DOCUMENT_NTCOMMONQUESTION=t.MESSAGE_DOCUMENT_SYSTEM=t.MESSAGE_DOCUMENT_PRODUCT=void 0,t.isSameMessageView=o;var a=n(132),s=i(a),u=n(127),c=i(u),l=n(156),f=i(l),d=n(149),p=i(d),h=n(154),g=i(h),m=n(131),v=i(m),y=n(141),b=i(y),T=n(152),w=i(T),S=n(113),M=n(153),E=i(M),C=n(130),_=i(C),x=n(157),I=i(x),N=n(137),O=c["default"].MESSAGE_DOCUMENT_TXT,A=c["default"].MESSAGE_DOCUMENT_IMAGE,R=c["default"].MESSAGE_DOCUMENT_AUDIO,D=c["default"].MESSAGE_DOCUMENT_VIDEO,L=c["default"].MESSAGE_DOCUMENT_MAGIC,k=c["default"].MESSAGE_DOCUMENT_FILE,U=t.MESSAGE_DOCUMENT_PRODUCT="ntproduct",P=t.MESSAGE_DOCUMENT_SYSTEM="ntsystem",F=t.MESSAGE_DOCUMENT_NTCOMMONQUESTION="faq",j=(t.MESSAGE_DOCUMENT_LOGO="logo",t.MESSAGE_STATUS_LIST={"SENDING":"sending","COMPLETE":1,"FAILURE":"failure"}),G=t.MESSAGE_DIRECTION={"SEND":"send","RECEIVE":"receive","CENTER":"center"},V="",B=function(){function t(n,i){var o=this;r(this,t);var a=Object.assign({},n);if(this.sendTimer=null,this.sendTimeout=3e4,this.needfeedback=!1,this.isSend=i,Object.assign(this,a),i)if(a.messageid=this.generateMessageid(),this.messageid=a.messageid,"ntproduct"!==this.msgtype&&(this.createat-V>3e5||!V)?(this.showtime=!0,V=this.createat):this.showtime=!1,L===this.msgtype&&this.formatVisitorMagicMessageUrl(),[P,U].indexOf(a.msgtype)>-1)this.message=a.message,this.status=j.COMPLETE,1!==n.history&&(this.direction=G.CENTER);else{var s=p["default"].getVisitorConversationInfo();a.fromuser=s,this.fromuser=s;var u=b["default"].findConversationByConverid(a.converid);u&&u.isValid()?u.isVisitorActive()?"progress"!==a.uploadstatus&&this.msgtype!==L&&this.request():u.enter(p["default"].getNTID()):u.request(),this.status=j.SENDING,this.direction=G.SEND,this.sendTimer=setTimeout(function(){o.setStatus(j.FAILURE),o.notifyMessagePoolStatusUpdate()},this.sendTimeout)}else this.messageid?1!==n.history&&(this.createat=(new Date).getTime()+e.timedifference):this.messageid=this.generateMessageid(),L===this.msgtype&&(this.replaceMagicMessageParams(),this.formatMagicMessageUrl()),"ntproduct"!==this.msgtype&&(this.createat-V>3e5||!V)?(this.showtime=!0,V=this.createat):this.showtime=!1,a.fromuser&&a.fromuser.userid&&p["default"].getNTID()===a.fromuser.userid?this.direction=G.SEND:(this.direction=G.RECEIVE,1!==n.history&&(this.needfeedback=!0)),this.status=j.COMPLETE}return t.prototype.generateMessageid=function(){return this.createat=(new Date).getTime()+e.timedifference,this.createat+(S.Terminal.mobile?"WAP":"WEB")},t.prototype.feedback=function(){var e=this.converid,t=this.messageid,n=this.fromuser&&this.fromuser.userid||"";E["default"].remoteMessageFeedBack({"conversationid":e,"messageid":t,
"userid":n},n),this.needfeedback=!1},t.prototype.request=function(){var e=this.getSendMessage();[P,U].indexOf(e.msgtype)>-1||E["default"].remoteSendMessage(e)},t.prototype.setConverid=function(e){this.converid=e},t.prototype.getConverid=function(){return this.converid},t.prototype.setStatus=function(e){e!==j.COMPLETE&&e!==j.FAILURE||clearTimeout(this.sendTimer),this.status=e},t.prototype.getStatus=function(){return this.status},t.prototype.getIcon=function(){return this.fromuser||this.sys?w["default"].getIconByUserId(this.fromuser?this.fromuser.userid:"sys"+this.sys):""},t.prototype.getMessageIcon=function(){return this.fromuser||this.sys?w["default"].getIconByUserId(this.fromuser?this.fromuser.userid:"sys"+this.sys):""},t.prototype.getName=function(){if(!this.fromuser)return"";var e=w["default"].getNameByUserId(this.fromuser.userid);return this.fromuser.showname?e=this.fromuser.showname:this.fromuser.nickname?e=this.fromuser.nickname:this.fromuser.username&&(e=this.fromuser.username),this.fromuser.userid===p["default"].getNTID()&&0!==v["default"].getEncryption()&&(e=""),e},t.prototype.isSend=function(){return this.isSend},t.prototype.getShowName=function(){return this.fromuser&&this.fromuser.userid!==p["default"].getNTID()?this.getName():""},t.prototype.notifyMessagePoolStatusUpdate=function(){g["default"].receiveUpdateMessageStatus(this)},t.prototype.getSendMessage=function(){var t=void 0;switch(this.msgtype){case O:t={"message":this.message};break;case A:t={"message":this.message,"url":this.url,"sourceurl":this.sourceurl,"size":this.size};break;case k:case D:t={"message":this.message,"url":e.formatIEUrl(this.url),"sourceurl":e.formatIEUrl(this.sourceurl),"size":this.size};break;case R:t={"message":this.message,"url":this.url,"size":this.size};break;case L:t={"message":this.message,"params":this.params},t.params.custome=this.custome}return Object.assign({"messageid":this.messageid,"converid":this.converid,"msgtype":this.msgtype,"fromuser":this.fromuser,"createat":""},t)},t.prototype.replaceMagicMessageParams=function(){this.params&&(S.Terminal.Mobile?this.params.xn_devicetype="wap":this.params.xn_devicetype="web",this.params.xn_ntid=p["default"].getNTID(),this.params.xn_msgid=this.messageid,this.params.xn_userrole=1,this.params.userid=v["default"].get("loginid")||this.params.userid,this.params.username=v["default"].get("uname")||this.params.username,this.params.userlevel=v["default"].get("ulevel")||this.params.userlevel,this.params.itemid=v["default"].get("prid")||this.params.itemid,this.params.orderid=v["default"].get("orderid")||this.params.orderid,this.params.custome?this.custome=encodeURI(this.params.custome):this.custome="",delete this.params.custome,"1"!==this.params.xn_cmtid&&"2"!==this.params.xn_cmtid||S.Terminal.mobile||(this.position=0),"3"===this.params.xn_cmtid&&(this.position=0),this.magicFormatParams=this.params)},t.prototype.formatMagicMessageUrl=function(){this.url=""+_["default"].get("magicServerUrl")+s["default"].stringify(this.magicFormatParams)+this.custome+"&lan="+NT_LANG_TYPE+"&"+s["default"].stringify(f["default"].getMagicParam())},t.prototype.formatVisitorMagicMessageUrl=function(){S.Terminal.Mobile?this.params.xn_devicetype="wap":this.params.xn_devicetype="web",this.params.xn_ntid=p["default"].getNTID(),this.params.xn_msgid=this.messageid,this.params.xn_userrole=1,this.params.userid=v["default"].get("loginid")||this.params.userid,this.params.username=v["default"].get("uname")||this.params.username,this.params.userlevel=v["default"].get("ulevel")||this.params.userlevel,this.params.itemid=v["default"].get("prid")||this.params.itemid,this.params.orderid=v["default"].get("orderid")||this.params.orderid,this.params.custome?this.custome=encodeURI(this.params.custome):this.custome="",delete this.params.custome,this.url=""+_["default"].get("magicServerUrl")+s["default"].stringify(this.params)+this.custome+"&lan="+NT_LANG_TYPE+"&"+s["default"].stringify(f["default"].getMagicParam())},t.prototype.checkTime=function(){_["default"].get("checkTime")||(this.createat+=e.timedifference)},t.prototype.checkGreetMessageTime=function(){this.createat=this.createat-500},t.prototype.getShowMessage=function(){switch(this.msgtype){case O:try{var t=(0,I["default"])(this.message);return t.replace(/<\/?[^>]*>/g,"").replace(e.emojiReg,function(t){return'<img width="20px" style="vertical-align:middle" src="'+e.sourceURI+"images/emoji/"+e.emojiRule[t.replace(/\[|\]/g,"")]+'.png" >'})}catch(n){return this.message}case A:return NT_LANG.pictureMessage;case R:return NT_LANG.audioMessage;case k:return NT_LANG.fileMessage;case D:return NT_LANG.videoMessage;case 19:return NT_LANG.systemMessage;case F:return NT_LANG.FAQ;default:return""}},t.prototype.getNTUIMessage=function(){var t=this,n=function(){t.username=t.getName(),t.usericon=t.getIcon(),t.createtime=(0,N.messageTime)(t.createat)},i=function(t){for(var n=e.fileRule,i="",r=Object.keys(n),o=0;o<r.length;o+=1){var a=r[o];if(n[a].reg.test(t)){i=n[a].icon;break}}return i},r=function(e){var t=e.split(".")[0].length;return e.split(".")[0].length>10?e.substring(0,4)+"..."+e.split(".")[0].substring(t-2)+"."+e.split(".")[1]:e},o=function(e,n){t.msgtype=12,t.sourceurl=e,t.url=e,t.msg=n};switch(this.msgtype){case 11:n(),this.msg=(0,I["default"])(this.message,o).replace(e.emojiReg,function(t){return'<img width="20px" height="20px" style="vertical-align:middle" src="'+e.sourceURI+"images/emoji/"+e.emojiRule[t.replace(/\[|\]/g,"")]+'.png" >'});break;case 12:n(),this.url=e.formatIEUrl(this.url),this.sourceurl=e.formatIEUrl(this.sourceurl),this.size=this.size;break;case 17:n(),this.url=e.formatIEUrl(this.url),this.msg=r(this.message),this.size=this.size,this.type=i(this.message.split(".")[this.message.split(".").length-1]);break;case 14:n(),this.staticurl=this.url,this.url=this.sourceurl,this.size=this.size;break;case 15:n();break;case 19:this.type=this.sysMsgType,this.msg=this.msg;break;case"faq":n(),this.title=this.message.title,this.content=this.message.content;break;case"ntproduct":n(),this.productid=this.message.prid,this.productName=this.message.pn,this.category=this.message.ca,this.brand=this.message.br,this.url=this.message.url,this.siteprice=this.message.sp,this.marketprice=this.message.mp,this.imageurl=this.message.iu}return this},t}();t["default"]=B}).call(t,n(112))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=n(131),a=i(o),s=n(126),u=i(s),c=function(){function e(t){r(this,e),this.siteidRule=t||/[a-zA-Z0-9\s]+/,this.siteid="",this.name="",this.externalInfo="",this.externalInfoList=[],this.hasMagic=!1,t&&(this.siteidRule=t)}return e.prototype.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.init=function(){u["default"].trace("Enterprise: 企业信息开始初始化",s.INFO);var e=a["default"].getEnterpriseInfo();Object.assign(this,e),e.exterinfo&&this.setExternalInfo(e.exterinfo),u["default"].trace("Enterprise: 企业信息初始化完毕，站点id: "+this.getSiteid(),s.INFO)},e.prototype.setSiteid=function(e){this.siteidRule.test(e)&&(this.siteid=e)},e.prototype.getSiteid=function(){return this.siteid},e.prototype.setName=function(e){this.name=e},e.prototype.getName=function(){return this.name},e.prototype.setExternalInfo=function(e){this.hasMagic=!1,e&&e.magicParam&&(this.hasMagic=!0,this.magicParam=e.magicParam),this.externalInfo=e},e.prototype.getExternalInfo=function(){return this.externalInfo},e.prototype.getMagicParam=function(){return this.hasMagic?this.magicParam:{}},e.prototype.getTemplateId=function(){var e="";return this.externalInfo&&this.externalInfo.templateid&&(e=this.externalInfo.templateid),e},e.prototype.set=function(e,t){this[e]=t},e.prototype.get=function(e){return this[e]},e.prototype.executeUrlReplaceRule=function(e){var t=this.externalInfo.urlReplaceRule;if(!t)return e;for(var n=e,i=Object.keys(t),r=0;r<i.length;r+=1){var o=i[r],a=t[o],s=a.placeholder,u=a.value;s&&u&&(n=n.replace(s,u))}return n},e}();t["default"]=c.prototype.getInstance(),e.exports=t["default"]},function(e,t,n){(function(i){"use strict";function r(e,t){var n;try{n=JSON.parse(e)}catch(r){return(0,o.linkFilter)(e)}if(!n.blocks)return(0,o.linkFilter)(e);var a=[],s={"atomic":14,"header-one":32,"header-two":24,"header-three":18,"header-four":16,"header-five":14,"header-six":12},u="px",c=!1;return n.blocks.forEach(function(e,t){if(e.type&&"atomic"===e.type&&e.entityRanges){var r=n.entityMap[e.entityRanges[0].key];if("image"===r.type&&r.data&&r.data.src){var l="";return r.data["max-width"]&&(l+="max-width:"+r.data["max-width"]+";"),r.data["max-height"]&&(l+="max-height:"+r.data["max-height"]),void a.push("<img src="+r.data.src+" style="+l+">")}}for(var f=e.text,d=f.split(""),p=[],h=0;h<d.length;h++){var g=d[h],m=[];p.push({"text":g,"style":m})}for(var v=e.inlineStyleRanges||[],y=0;y<v.length;y++){var b=v[y],T=b.offset,w=b.length,S=b.style;if("undefined"==typeof T||!w||!S)break;for(var M=T;M<T+w;M++)"#"===S.charAt(0)?(p[M].color=S,p[M].style.push("span")):p[M].style.push(S.charAt(0).toLowerCase())}for(var E=0;E<p.length;E++){var C=p[E].style.reverse();if(0===E)for(var _=0;_<C.length;_++){var x=C[_];p[E].color&&_===C.length-1?d[E]="<"+x+' style="color:'+p[E].color+";font-size:"+(s[e.type]||16)+u+'">'+d[E]:d[E]="<"+x+">"+d[E]}if(E===p.length-1)for(var I=0;I<C.length;I++){var N=C[I];d[E]=d[E]+("</"+N+">")}if(E>=1&&(p[E].style.toString()!=p[E-1].style.toString()||p[E].color!=p[E-1].color)){for(var O=0;O<C.length;O++){var A=C[O];p[E].color&&O===C.length-1?d[E]="<"+A+' style="color:'+p[E].color+";font-size:"+(s[e.type]||16)+u+'">'+d[E]:d[E]="<"+A+">"+d[E]}for(var R=p[E-1].style.reverse(),D=0;D<R.length;D++){var L=R[D];d[E]="</"+L+">"+d[E]}}}if(f=d.join(""),f=(0,o.linkFilter)(f))if(new RegExp(i.emojiReg).test(f))a.push(f),c=!0;else{var k="display:inline;vertical-align:middle;margin:0;padding:0;font-size:"+(s[e.type]||16)+u;c?(a.push('<span style="'+k+'">'+f+"</span>"),c=!1):a.push((0==t?"":"<br/>")+'<span style="'+k+'">'+f+"</span>")}else c?c=!1:a.push("<br/>")}),a.length>0&&(a=a.join("")),a}t.__esModule=!0,t["default"]=r;var o=n(137);e.exports=t["default"]}).call(t,n(112))},function(e,t,n){(function(i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var a=n(139),s=r(a),u=n(130),c=r(u),l=n(124),f=r(l),d=n(126),p=r(d),h=n(131),g=r(h),m=n(113),v=n(159),y=r(v),b=n(125),T=r(b),w={"name":"小能科技","logo":"","autoconnect":1,"chatwindowid":1,"web":{"toolbar":{"enable_voice":0,"enable_face":1,"enable_picture":1,"enable_evaluate":1,"enable_file":1,"enable_history":0,"enable_download":0,"enable_capture":0},"tabs":{"tab":[{"id":1,"name":"关于企业","content":"企业介绍","onoff":0}],"selected":1},"autoexpansion":0,"messageTips":1,"position":{"type":8}}},S=function(){function e(t){o(this,e),this.config=t,this.appConfig={},this.firstTime=!0,this.themeName={"1":"Common","2":"appleStyle","3":"BulletScreen","4":"Xiaomi","5":"Xiaomi","6":"Xiaomi"},(0,f["default"])("SettingConfig",this)}return e.prototype.getInstance=function(t){return this.instance||(this.instance=new e(t)),this.instance},e.prototype.init=function(e,t){var n=this;p["default"].trace("SettingConfig: 设置接口初始化",d.INFO);var r=this,o=g["default"].get("templateid"),a={};return"zh-cn"!==window.NT_LANG_TYPE&&(a={"lang":window.NT_LANG_TYPE}),(0,s["default"])(""+c["default"].get("SettingUrl")+(o?"?templateid="+o:""),{"headers":a},parseInt(i.getSettingTimeout,10)).then(function(i){i.err?(p["default"].trace("SettingConfig: 获取设置数据失败",d.ERROR),t()):(p["default"].trace("SettingConfig: 获取设置数据成功",d.INFO),r.config=i.data,n.originEnableStaffService=0!==r.config.web.toolbar.enable_staffservice,r.initConfig(),T["default"].handleSettingLoading(),e(),n.getFastQuestionData(function(e){var t=1===n.config.chatwindowid?n.get("tabs"):n.get("tabs").tabControl;if(t&&t.tab&&t.tab.mids)for(var i=t.tab.mids,r=0;r<i.length;r+=1)2===i[r]&&(t.tab.contents[r]=e.data);n.set("tabs",1===n.config.chatwindowid?t:{"tabControl":t}),T["default"].handleFaqData(y["default"].formatFaq(e.data))})),n.firstTime=!1})},e.prototype.getEvaluateData=function(e){return(0,s["default"])(c["default"].get("EvaluateUrl"),{"method":"get"}).then(function(t){"function"==typeof e&&e(t.err?"error":t)})},e.prototype.getFastQuestionData=function(e){var t=g["default"].get("templateid");return(0,s["default"])(""+c["default"].get("FastQuestionUrl")+(t?"?templateid="+t+"&etype=1":"?etype=2"),{"method":"get"}).then(function(t){"function"==typeof e&&e(t.err?"error":t)})},e.prototype.initConfig=function(){this.setTheme(),this.setPosition(),this.ntalkerStyle=n(160),this.autoconnect(),this.setHeader(),this.setRightLabel(),this.setToolbar(),this.setTextHolder(),this.setSlider(),this.setMessageTips(),1===this.config.chatwindowid&&this.setBottomSection(),this.setLeaveMessage(),p["default"].trace("SettingConfig 初始化完毕",d.INFO)},e.prototype.setTheme=function(){this.set("theme","Common")},e.prototype.setPosition=function(){this.set("position",this.config.web.position),T["default"].setInitPosition(this.config.web.position,!0)},e.prototype.autoconnect=function(){this.set("autoconnect",this.config.autoconnect)},e.prototype.setHeader=function(){var e={};e.name=this.config.name,e.logo=this.config.logo,this.set("header",e),this.set("logoMessage",e.logo),T["default"].handleLogoData(e.logo)},e.prototype.setRightLabel=function(){var e=this;this.set("autoexpansion",this.config.web.autoexpansion),this.set("more",!1);var t=0,n=[],i=[],r=[];this.config.web.tabs.tab.forEach(function(t){"common problem"===t.name&&(t.name="FAQ"),0!==t.onoff&&(n.push(t.id),i.push(t.name),r.push(t.content),e.set("more",!0)),2===t.id?t.type="faq":t.type="text"});var o=this.config.web.tabs.tab.filter(function(e){return 1===e.onoff&&(2!==e.id&&""!==e.content||1===e.onoff&&2===e.id)});if(!m.Terminal.mobile){var a=T["default"].handleTabData(o);a&&(o=a),o=Array.isArray(o)&&o.sort(function(e,t){return e.id-t.id}),this.firstTime&&(0===o.length?(T["default"].handleAutoExpansion(0),T["default"].handleCloseMore()):T["default"].handleAutoExpansion(this.config.web.autoexpansion))}var s=void 0;try{var u=this.ntalkerStyle.rightSctionStyle,c=u.label,l=c.container,f=c.tagwrapper,d=c.tag,p=c.current,h=c.tabcontainer,g=c.tabwrapper,v=c.tab;i.length>0&&(d.width=parseInt(100/i.length,10)-6+"%"),s={"style":l,"currentIndex":t,"tag":{"name":"tags","style":{"wrapper":f,"current":p,"tag":d},"names":i},"tab":{"name":"rightTabs","width":240,"style":{"container":h,"wrapper":g,"tab":v},"mids":n,"contents":r}}}catch(y){s={"tabControl":{"style":{"width":"240px"},"currentIndex":t,"tag":{"name":"tags","names":i},"tab":{"name":"rightTabs","width":240,"style":{"wrapper":{"width":"960px"},"tab":{"width":"240px","float":"left"}},"mids":n,"contents":r}}}}this.set("tabs",s),this.set("enable_upload",1)},e.prototype.setToolbar=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.set("chatToolbar",this.generateToolbarData(e))},e.prototype.setToolStatus=function(e,t){this.ntalkerStyle.spriteInfo[e].disabled=1===t?0:1,T["default"].setToolBarDisabled(e,t)},e.prototype.isRobotShow=function(){return this.originEnableStaffService},e.prototype.setAllToolStatus=function(e){var t=this,n=1===e?0:1;Object.keys(this.config.web.toolbar,function(e){var i=t.ntalkerStyle.spriteInfo[e.replace("enable_","")];i&&(i.disabled=n)}),this.set("enable_upload",e)},e.prototype.isShow=function(e){return 1===this.config.web.toolbar["enable_"+e]},e.prototype.generateToolbarData=function(e){var t=this,n=this.get("theme"),i=0,r=[],o=[],a=this.ntalkerStyle,s=a.spriteUrl,u=a.spriteInfo;e&&this.isRobotShow()?this.config.web.toolbar.enable_staffservice=1:this.config.web.toolbar.enable_staffservice=0;var c=Object.keys(this.config.web.toolbar);return m.Terminal.ielt9&&(this.config.web.toolbar.enable_face=0,this.config.web.toolbar.enable_picture=0,this.config.web.toolbar.enable_file=0),c.forEach(function(e){if("enable_voice"!==e&&"enable_history"!==e&&1===t.config.web.toolbar[e]){i+=1;var n=e.replace("enable_","");r.push(u[n]),o.push(n),"capture"===n&&(i+=1,r.push(u[n+"Options"]),o.push(n+"Options"))}}),c.forEach(function(e){var n=t.config.web.toolbar[e];T["default"].handleChatToolbar(e.split("_")[1],n)}),{"toolbar":{"name":n+"_toolbar","wrapperStyle":{"display":"inline-block"},"count":i,"width":20,"height":20,"buttonMargin":15,"bkgs":{"src":s,"option":r,"color":{"before":"transparent","after":"transparent"}},"eName":o}}},e.prototype.setTextHolder=function(){this.set("hint","我想说...")},e.prototype.setSlider=function(){},e.prototype.setMessageTips=function(){this.set("messageTips",this.config.web.messageTips)},e.prototype.setBottomSection=function(){},e.prototype.setLeaveMessage=function(e){e&&(this.config.leaveMsg.noticeContent=e),this.set("leaveMessage",this.config.leaveMsg)},e.prototype.isLeaveMessageAvailable=function(){try{if(this.appConfig.leaveMessage.useable)return!0}catch(e){p["default"].trace("留言表单数据异常，留言不可用，请及时处理! ",d.ERROR)}return!1},e.prototype.set=function(e,t){this.appConfig[e]=t},e.prototype.get=function(e){return"null"===this.appConfig[e]?"":this.appConfig[e]},e}();t["default"]=S.prototype.getInstance(w),e.exports=t["default"]}).call(t,n(112))},function(e,t){"use strict";t.__esModule=!0;var n={"formatFaq":function(e){function t(e){var n={};n.title=e.groupName,n.id=e.groupId;var i=!1;if(n.children||""!==e.parentId?(n.children=[],n.level="lv1"):(n.children=[],n.level="lv0"),e.fastQuestionGroups&&e.fastQuestionGroups.length>0&&(e.fastQuestionGroups.forEach(function(e){var i={};i.title=e.groupName,i.id=e.groupId;var r=t(e);r&&n.children.push(r)}),i=!0),e.fastQuestionItems&&e.fastQuestionItems.length>0){var r=e.fastQuestionItems;r.forEach(function(t){var i={};i.title=t.title,i.id=t.itemId;try{var r=JSON.parse(t.answer);15===r.msgtype?i.answer={"msgtype":15,"params":r.params,"position":r.position}:i.answer=r.message}catch(o){i.answer=t.answer}""===e.parentId?i.level="lv3":i.level="lv2",n.children.push(i)}),i=!0}return i?n:null}var n=[];if(!e)return null;for(var i=function(e,t){return e.rank-t.rank},r=e.sort(i),o=0;o<r.length;o+=1){var a=t(r[o]);a&&n.push(a)}return n}};t["default"]=n,e.exports=t["default"]},function(e,t,n){(function(i){"use strict";t.__esModule=!0;var r,o=n(113),a={"spriteUrl":i.sourceURI+"images/see_more_clock.png","spriteInfo":{"face":{"normal":"-10px -4px","hover":"-10px -28px","title":"表情","disabled":0},"picture":{"normal":"-45px -4px","hover":"-45px -28px","title":"图片上传","disabled":0},"file":{"normal":"-114px -4px","hover":"-114px -28px","title":"文件上传","disabled":0},"evaluate":{"normal":"-79px -4px","hover":"-79px -28px","title":"评价","disabled":window.NTIE8Debug?0:1},"capture":{"normal":"-147px -4px","hover":"-147px -28px","title":"截图","disabled":0},"download":{"normal":"-180px -4px","hover":"-180px -28px","title":"下载历史记录","disabled":0},"staffservice":{"normal":"-213px -4px","hover":"-213px -28px","title":"转人工","disabled":0},"close1":{"normal":"-265px -60px","hover":"-284px -60px"},"close":{"normal":"-280px -30px","hover":"-280px 30px","title":"关闭"},"min":{"normal":"-280px -12px","hover":"-280px 12px","title":"最小化"},"captureOptions":{"type":"option","color":"#A5A5A5","childrenConfig":{"ref":"CaptureOptions","config":{"name":"capture","contents":[{"key":"隐藏窗口","value":!0,"style":{"left":"0px","bottom":"30px"}},{"key":"不隐藏窗口","value":!1,"style":{"left":"0px","bottom":"60px"}}],"bkg":"#fff","focusBkg":"#efefef","zIndex":2147483647},"selected":0,"eName":"setCaptureMin"}},"sendOption":{"type":"option","options":["Enter","Ctrl+Enter"],"selected":0,"color":"#FFF"}},"base":{"margin":0,"padding":0,"border":"none","float":"none","width":"auto","height":"auto","minWidth":"none","minHeight":"none","maxWidth":"none","maxHeight":"none","clear":"none","position":"static","left":"auto","top":"auto","right":"auto","bottom":"auto","textAlign":"left","boxSizing":"content-box","color":"#000","backgroundColor":"transparent","fontFamily":"Microsoft YaHei,Arial","fontWeight":"normal"},"MobileMinimum":{"wrapper":{"position":"fixed","top":"80%","left":"13px","width":"62px","height":"62px"},"wrapperLeft":{"width":"62px","height":"62px","borderRadius":"50%","background":"white"},"bubble":{"width":"42px","height":"32px","marginLeft":"12px","paddingTop":"17px"},"messagebar":{"width":"14px","height":"14px","marginLeft":"10px","marginTop":"-35px"},"reminder":{"color":"#ff4848","fontSize":"7px","position":"absolute","left":"8px","top":"13px","display":"inline-block","width":"15px","height":"15px","borderRadius":"50%","border":"1px solid #ff4848","background":"#fff","lineHeight":"15px"},"msg":{"color":"#fff","width":"100%","fontSize":"12px"},"lastMessage":{"lineHeight":"15px","minWidth":"30px","maxWidth":"180px","height":"15px","color":"#fff","overflow":"hidden","textOverflow":"ellipsis","whiteSpace":"nowrap","background":i.themeConfig.primaryColor,"marginLeft":"74px","borderRadius":"5px","padding":"10px","position":"absolute","top":"16px","fontSize":"12px"},"triangle":{"width":"4px","height":"8px","position":"absolute","left":"70px","top":"23px"}},"loading":{"wrapper":{"width":"100%","height":"33px","position":"fixed","bottom":"0px","textAlign":"center"},"picture":null},"wapChat":{"wrapper":{"width":"100%","height":"100vh","position":o.Terminal.isAbsolute?"relative":"fixed","top":"0px","left":"0px","background":"#ECEDF2"},"header":{"wrapper":{"width":"100%","height":"48px","backgroundColor":i.themeConfig.primaryColor,"position":o.Terminal.isAbsolute?"absolute":"fixed","top":0,"textAlign":"center"},"headerBack":{"fontSize":"14px","color":"#fff","position":"absolute","top":"13px","left":"24px","textDecoration":"none"},"logo":{"float":"left","width":"36px","height":"36px","display":"inline-block","margin":"6px 7px 0px 16px"},"logoTheme":{"width":"36px","height":"36px","display":"inline-block","margin":"6px 7px 0px 16px","borderRadius":"50%"},"back":{"width":"40px","height":"40px","backgroundColor":"red","position":"fixed","top":"4px","left":0,"backgroundSize":"0.26rem 0.44rem"},"staffservice":{"width":"48px","height":"48px","lineHeight":"48px","position":"fixed","fontSize":"14px","top":0,"right":"55px","color":"#fff"},"close":{"width":"40px","height":"40px","lineHeight":"40px","position":"fixed","right":"5px","top":"4px","color":"#edd1ce","background":"url("+i.resourcePath+"chat_close.png) no-repeat","backgroundSize":"20px 10px","backgroundPosition":"2px"},"title":{"width":"100%","height":"100%","textAlign":"center"}},"mainSection":{"width":"100%","background":"#ecedf2","position":o.Terminal.isAbsolute?"absolute":"fixed","top":"48px","bottom":"84px","backgroundColor":"#e1e2e8"},"bottom":{"wrapper":{"width":"100%","height":"auto","position":o.Terminal.isAbsolute?"absolute":"fixed","bottom":0},"commonBox":{"width":"100%","backgroundColor":"#eceff2"},"textHolderWrapper":{"position":"relative","margin":"0 14px 0 12px"},"textHolder":{"width":"100%","minHeight":"35px","maxHeight":"105px","lineHeight":"35px","border":"none","borderRadius":"5px","padding":"0 35px 0 10px !important","boxSizing":"border-box","overflowY":"auto","overflowX":"hidden","float":"left","margin":"0px","outline":"none","backgroundColor":"rgba(255,255,255,1)","fontSize":"14px","color":"#000","WebkitUserSelect":"auto"},"btn":{"display":"inline-block","width":"20px","height":"20px","padding":"14px 20px 10px 18px","WebkitTouchCallout":"default"},"send":{"position":"absolute","top":"0px","right":"14px","width":"21px","height":"21px","padding":"7px 10px","WebkitTouchCallout":"default"},"face":{"wrapper":{"clear":"both","width":"100%","height":"180px","overflowY":"hidden","backgroundColor":"#fff"},"faceBox":{"width":"100%","height":"150px","overflow":"hidden","boxSizing":"border-box","textAlign":"left","padding":"10px"},"faceItemWrapper":{"width":"25px","height":"25px","display":"inline-block !important","padding":"8px"},"faceItem":{"width":"100%","height":"100%"},"bottomBar":{"width":"100%","height":"30px","backgroundColor":"#f1f1f1","overflow":"hidden"},"selectTit":{"width":"40px","height":"0.72rem","float":"left"},"sendButton":{"width":"70px","height":"30px","backgroundColor":i.themeConfig.primaryColor,"float":"right","color":"#fff","lineHeight":"30px","textAlign":"center","fontSize":"14px"}}}},"mobileLeaveMessage":{"wrapper":{"height":"100vh","overflow":"scroll !important","backgroundColor":"#fff"},"header":{"position":"relative","width":"100%","height":"64px","background":i.themeConfig.secondaryColor,"textAlign":"center","backgroundImage":'url("'+i.resource.mobileLeaveMessage.plus+'")',"backgroundRepeat":"no-repeat","backgroundPosition":"70px 8px"},"back":{"position":"absolute","top":"24px","left":"17px","width":"16px","height":"18px"},"title":{"fontSize":"16px","textAlign":"center","color":i.themeConfig.primaryColor,"fontFamily":"MicrosoftYaHei","paddingTop":"24px","lineHeight":"16px","backgroundImage":'url("'+i.resource.mobileLeaveMessage.plusShallow+'")',"backgroundRepeat":"no-repeat","backgroundSize":"10px 10px","backgroundPosition":"267px 4px"},"formWrapper":{"position":"relative","width":"90%","height":"auto","padding":"1px 5% 12px","background":"#fff"},"firstInput":{"marginTop":"-1px"},"notice":{"textAlign":"left","color":"#999999","fontSize":"12px","fontFamily":"MicrosoftYaHei","padding":"12px 0 0","lineHeight":"16px"},"inputItem":{"width":"100%","height":"35px","border":"1px solid #cccccc","margin":"15px 0px","boxSizing":"border-box","borderRadius":"5px","fontSize":"12px","background":"#f5f5f5","textIndent":"30px"},"imgName":{"width":"14px","height":"17px","position":"absolute","marginTop":"9px","margin":"9px 7px 0px 10px"},"imgEmail":{"width":"14px","height":"17px","position":"absolute","marginTop":"9px","margin":"9px 7px 0px 10px"},"imgPhone":{"width":"14px","height":"17px","position":"absolute","marginTop":"9px","margin":"9px 7px 0px 10px"},"textareaItem":{"width":"100%","height":"105px","border":"1px solid #cccccc","margin":"15px 0px 0px 0px","fontSize":"12px","padding":"5px","borderRadius":"5px","resize":"none","boxSizing":"border-box","background":"#f5f5f5"},"numberTag":{"width":"100%","height":"35px","fontSize":"12px","textAlign":"right","fontFamily":"arial","color":"#cccccc","fontWeight":"bold","paddingTop":"10px"},"sendButton":{"width":"100%","height":"45px","lineHeight":"45px","boxSizing":"border-box","backgroundColor":i.themeConfig.primaryColor,"borderRadius":"5px","fontSize":"15px","color":"#fff","textAlign":"center","fontWeight":"bold","fontFamily":"MicrosoftYaHei"},"promit":(r={"position":"absolute","bottom":"-15px","left":"0px","color":"red","fontSize":"10px","marginLeft":"31px"},r["fontSize"]="12px",r)},"wapBigPicture":{"mask":{"position":"fixed","top":0,"left":0,"width":"100%","height":"100%","opacity":".75","backgroundColor":"#000","zIndex":"10000000000"},"container":{"position":"fixed","top":0,"right":0,"bottom":0,"left":0,"margin":"auto","textAlign":"center","zIndex":"10000000001","overflow":"hidden"},"bigpic":{"margin":"auto !important","maxWidth":"90%","maxHeight":"90%","top":0,"left":0,"bottom":0,"right":0,"position":"absolute"}},"wapMessageStyle":{"common":{"right":{"wrapper":{"padding":"10px","overflow":"hidden","fontSize":"16px","wordBreak":"break-word"},"avatar":{"width":"40px","height":"40px","float":"right"},"name":{"display":"none"},"main":{"position":"relative","maxWidth":"60%","minWidth":"36px","padding":"12px","float":"right","borderRadius":"12px","background":i.themeConfig.primaryColor,"color":"#fff","wordWrap":"break-word","marginRight":"22px"},"arrow":{"position":"absolute","bottom":"1px","right":"-7px","zIndex":"-1","width":"17px","height":"13px"},"status":{"position":"absolute","left":"-20px","bottom":"12px"}},"left":{"wrapper":{"padding":"10px","overflow":"hidden","fontSize":"16px","wordBreak":"break-word"},"name":{"margin":"15px 0px 6px 24px","fontSize":"14px","color":"#666"},"avatar":{"width":"40px","height":"40px","float":"left"},"main":{"position":"relative","maxWidth":"70%","minWidth":"36px","padding":"12px","float":"left","borderRadius":"12px","background":"#fff","color":"black","wordWrap":"break-word","marginLeft":"22px"},"arrow":{"position":"absolute","bottom":"1px","left":"-7px","zIndex":"-1","width":"17px","height":"13px"}}},"11":{},"12":{"right":{"main":{"padding":"1px"},"content":{"padding":"2px","borderRadius":"12px","float":"right","marginRight":"22px","backgroundColor":i.themeConfig.primaryColor,"position":"relative"},"img":{"maxWidth":"140px","borderRadius":"12px"}},"left":{"main":{"padding":"1px"},"content":{"padding":"2px","borderRadius":"12px","float":"left","marginLeft":"22px","backgroundColor":"white","position":"relative"},"img":{"maxWidth":"140px","borderRadius":"12px"}}},"14":{"right":{"main":{"padding":"1px","overflow":"hidden"},"content":{"lineHeight":0,"fontSize":0}},"left":{"main":{"padding":"1px","overflow":"hidden"},"content":{"lineHeight":0,"fontSize":0}}},"17":{"right":{"main":{"padding":"1px"},"img":{"maxWidth":"280px"}},"left":{"main":{"padding":"1px"},"img":{"maxWidth":"280px"}}},"13":{"right":{"main":{"padding":"1px"},"content":{"padding":"10px","float":"right","marginRight":"22px","borderRadius":"12px","backgroundColor":i.themeConfig.primaryColor,"position":"relative"},"img":{"width":"140px"}},"left":{"main":{"padding":"1px"},"content":{"padding":"10px","float":"left","marginLeft":"22px","borderRadius":"12px","backgroundColor":"white","position":"relative"},"img":{"width":"140px"}}},"19":{"wrapper":{"position":"relative","listStyle":"none","padding":"10px 0","margin":0,"textAlign":"center","overflow":"hidden"},"main":{"position":"relative","left":"10%","width":"80%","minHeight":"26px","backgroundColor":"#f2f3f4","textAlign":"center","borderRadius":"1rem"},"pic":{"verticalAlign":"middle","marginRight":"0px","width":"26px","height":"26px","display":"inline-block"},"content":{"color":"#666","fontSize":"12px","display":"inline-block","verticalAlign":"middle"}},"ntproduct":{"wrapper":{"position":"relative","width":"100%","height":"120px"},"main":{"position":"relative","width":"440px","minHeight":"82px","background":"#FBFCFC","boxShadow":"1px 1px 5px 1px #dedede","fontFamily":"microsoft yahei","textAlign":"left","top":"0px","left":"10px","zIndex":"1000","display":"block","padding":"10px"},"itemLogo":{"float":"left","width":"80px","height":"80px"},"proList":{"width":"250px","float":"left"},"proItem":{"listStyle":"none"},"price":{"color":"red"},"close":{"position":"absolute","width":"12px","height":"12px","right":"10px","top":"10px","cursor":"pointer","background":"url('"+i.sourceURI+"images/see_more_clock.png') no-repeat"}}}};t["default"]=a,e.exports=t["default"]}).call(t,n(112))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(126),s=i(a),u=function(){function e(){r(this,e),this.callbackArr=["loadScript","loadUIScript","connectKf","closeChat","openMinimum","receiveMessage","sendMessage","openChat","leaveMessage","submitEvaluate","robotSwitchArtiFail","identityAuth"],this.identityAuth=function(e){console(e)}}return e.prototype.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.vertify=function(e){var t=[];if(Array.isArray(e))for(var n=0,i=e.length;n<i;n+=1)e[n].type&&e[n].func&&this.callbackArr.indexOf(e[n].type)>=0?t.push(e[n]):s["default"].trace("亲，您使用的方法："+e[n].type+", 小能暂时没有提供哦！",Error);else"object"===("undefined"==typeof e?"undefined":o(e))&&e.type&&e.func&&this.callbackArr.indexOf(e.type)>=0?t.push(e):s["default"].trace("亲，您使用的方法："+e.type+", 小能暂时没有提供哦！",Error);return t},e.prototype.set=function(e){
var t=this.vertify(e);if(0!==t.length)for(var n=0,i=t.length;n<i;n+=1)t[n].type&&t[n].func&&this.callbackArr.indexOf(t[n].type)>=0&&(this[t[n].type]=t[n].func)},e.prototype.execute=function(e,t){"function"==typeof this[e]&&this[e].apply([],t||[])},e}();t["default"]=u.prototype.getInstance(),e.exports=t["default"]},function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(t,n){u||(u=e.sourceURI.replace("respack/","js/")),(0,s["default"])(""+u+t+".js",{"charset":"utf-8","async":!1},function(){n()})}function o(e,t){(0,s["default"])(e,{"charset":"utf-8","async":!1},function(){t()})}t.__esModule=!0,t.LoadScript=r,t.LoadCDNScript=o;var a=n(163),s=i(a),u=""}).call(t,n(112))},function(e,t){function n(e,t){for(var n in t)e.setAttribute(n,t[n])}function i(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function r(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,t,o){var a=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script");"function"==typeof t&&(o=t,t={}),t=t||{},o=o||function(){},s.type=t.type||"text/javascript",s.charset=t.charset||"utf8",s.async=!("async"in t)||!!t.async,s.src=e,t.attrs&&n(s,t.attrs),t.text&&(s.text=""+t.text);var u="onload"in s?i:r;u(s,o),s.onload||i(s,o),a.appendChild(s)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){D["default"].setStatus("success")}function u(){D["default"].setStatus("handshake")}function c(){D["default"].setStatus("failure")}function l(e){x["default"].receiveAddSuccess({"converid":JSON.parse(e).converid})}function f(e){x["default"].receiveConversationInfo(e)}function d(e){x["default"].receiveMemberInfo(e)}function p(e){N["default"].receiveRemoteAddMessage(e),setTimeout(function(){x["default"].receiveRemoteAddMessage(e)},1)}function h(e){N["default"].receiveRemoteUpdateMessageStatusSuccess(e)}function g(e){var t=e.support,n=e.forbidden,i=e.queueConfig;t&&i&&i.web&&1!==n?x["default"].receiveConversationBusy(e):x["default"].receiveConversationLeaveMessage(e,1===n)}function m(e){x["default"].handleSystemMessage(e)}function v(e){x["default"].receiveAddPredictMessage(e)}function y(e){x["default"].receiveInviteConversationEvaluation(e)}function b(e){x["default"].receiveRobotSwitchArtiFail(e)}function T(e){x["default"].receiveRobotSwitchArtiAlarm(e)}function w(e){x["default"].receiveConversationTerminated(e)}function S(e){P["default"].trace("接收到音视频通话",U.INFO),A["default"].receiveStreamMedia(e)}function M(e){P["default"].trace("访客"+(1===e.tasktype?"音频 ":"视频")+e.description,U.INFO),A["default"].receiveCallBackStreamMedia(e)}function E(e){A["default"].notifyStopStreamMedia(e)}t.__esModule=!0,t["default"]=void 0;var C=n(165),_=n(141),x=i(_),I=n(154),N=i(I),O=n(166),A=i(O),R=n(153),D=i(R),L=n(167),k=i(L),U=n(126),P=i(U),F=NT_IMSDK,j=F.INIMCallBack,G=F.NIMCode,V=F.ConnectStatus,B=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.onMessageArrivedHandler=function(e){var t=void 0;if(t="string"==typeof e?JSON.parse(e):e,t&&t.m&&t.body){var n=t.body;if(t.m===C.remoteNotifyConversationTerminated&&w(n),!k["default"].isMyMessage(n)&&t.m!==C.remoteNotifyRobotSwitchArtiFail)return void P["default"].trace("not this page message:"+t.m+": "+JSON.stringify(n),U.INFO);switch(P["default"].trace(t.m+"  :  "+JSON.stringify(n),U.INFO),t.m){case C.remoteNotifyChatOrder:l(n);break;case C.remoteNotifyConversationInformation:f(n);break;case C.remoteNotifyConversationMemberInfo:d(n);break;case C.remoteNotifySendMessage:p(n);break;case C.remoteNotifyQueueInformation:g(n);break;case C.remoteNotifyOnPredictMessage:v(n);break;case C.remoteNotifyInviteConversationEvaluation:y(n);break;case C.remoteNotifySystemMessage:m(n);break;case C.remoteNotifyRobotSwitchArtiFail:b(n);break;case C.remoteNotifyRobotSwitchArtiAlarm:T(n);break;case C.remoteNotifyStreamMedia:S(n);break;case C.remoteNotifyCallBackStreamMedia:M(n);break;case C.remoteNotifyStopStreamMedia:E(n)}}},t.prototype.onMessageDeliveredHandler=function(e,t){try{P["default"].trace("-----onMessageDeliveredHandler: "+JSON.stringify(e),U.INFO)}catch(n){P["default"].trace(n.message,U.ERROR)}(41===t||43===t)&&e.messageid&&e.message&&e.msgtype&&h(e,t)},t.prototype.onConnectStatusHandler=function(e,t){switch(e){case V.ST_CONNECTED:t===-1?s():u();break;case G.RECONNECTING_ERROR:c();break;case G.RECONNECT_FAILED_ERROR:c()}},t}(j);t["default"]=B,e.exports=t["default"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i,r,o=(r=i=function a(){n(this,a)},i.remoteGetSupplier=2001,i.remoteChangeSupplierStatus=2002,i.remoteGetCustomer=2011,i.remoteChangeCustomerStatus=2012,i.remoteGetUserHistoryConversations=3e3,i.remoteGetUserConversation=3001,i.remoteGetConversationInfo=3002,i.remoteRequestChat=3003,i.remoteJoinConversation=3004,i.remoteEnterConversation=3005,i.remoteSendMessage=3006,i.remoteLeaveConversation=3007,i.remoteExitConversation=3008,i.remoteGetEvaluationInfo=3009,i.remoteRequestEvaluation=3010,i.remoteCommitEvaluationResult=3011,i.remoteTerminateConversation=3012,i.remoteAddConversationMember=3013,i.remoteRemoveConversationMember=3014,i.remoteCommitConclusionResult=3015,i.remoteOnPredictMessage=3016,i.remoteDisableSendMsg=3017,i.remoteExitQueue=3018,i.remoteRobotSwitchArtificial=3106,i.remoteEvaluationConverstion=3204,i.remoteCallBackStreamMedia=3302,i.remoteLeaveStreamMedia=3303,i.remoteStreamMedia=3301,i.remoteNotifyConversationList=5e3,i.remoteNotifyConversationInformation=5001,i.remoteNotifyUserHistoryConversations=5002,i.remoteNotifySendMessage=5003,i.remoteNotifyOnPredictMessage=5004,i.remoteNotifyEvaluationInfo=5005,i.remoteNotifyConversationMemberInfo=5006,i.remoteNotifyConversationTerminated=5007,i.remoteNotifyUserInformation=5008,i.remoteNotifyNotification=5009,i.remoteNotifyQueueInformation=5010,i.remoteNotifyRobotSwitchArtiFail=5026,i.remoteNotifyRobotSwitchArtiAlarm=5027,i.remoteNotifyInviteConversationEvaluation=5031,i.remoteNotifySystemMessage=6201,i.remoteNotifyStreamMedia=6301,i.remoteNotifyCallBackStreamMedia=6302,i.remoteNotifyStopStreamMedia=6304,i.remoteNotifyChatOrder=31,r);t["default"]=o,e.exports=t["default"]},function(e,t,n){(function(i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var a=n(126),s=r(a),u=n(162),c=n(125),l=r(c),f=n(153),d=r(f),p={"RTC_AUDIO":1,"RTC_VIDEO":2},h={"RTC_INIT":0,"RTC_ACCEPTING":1,"RTC_MEDIAFAILURE":2,"RTC_ACCEPTED":3,"RTC_SPONSOR":4,"RTC_MIN":5,"RTC_END":6},g=function(){function e(){o(this,e),this.converid="",this.taskid="",this.type=p.RTC_AUDIO,this.status=h.RTC_INIT,this.t=0,this.hour=0,this.minute=0,this.second=0,this.flag=""}return e.prototype.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.init=function(){var e=this;return new Promise(function(t){window.AgoraRTC?t():(0,u.LoadCDNScript)(i.RTC_Client_ADDRESS,function(){e.rtc=AgoraRTC,t()})})},e.prototype.initRTCClient=function(){var e=this,t={"mode":"live","codec":"h264"};this.client=this.rtc.createClient(t),this.client.init(i.RTC_Client_APPID,function(){e.createRTCView()})},e.prototype.createRTCView=function(){var e=this,t=this.taskid;this.client.join(null,t,null,function(t){e.localStream=e.rtc.createStream({"streamID":t,"audio":!0,"video":e.type===p.RTC_VIDEO,"screen":!1,"mediaSource":"screen"}),s["default"].trace("RTCManage Agora localStream创建成功",a.INFO),e.localStream.setVideoProfile("480p_2"),e.subscribeStreamMedia(),e.localStream.init(function(){s["default"].trace("RTCManage Agora 声网麦克风检测成功",a.INFO),d["default"].remoteCallBackStreamMedia({"converid":e.converid,"taskid":e.taskid,"operation":2,"description":"接受邀请"}),e.publishStreamMedia(),e.renderView(h.RTC_ACCEPTED),e.localStream.play("xnRtcMinView"),e.handleAcceptedView()},function(t){s["default"].trace("RTCManage Agora 声网麦克风检测失败: "+t,a.INFO),e.renderView(h.RTC_MEDIAFAILURE)})},function(){s["default"].trace("RTCManage Agora client join failed",a.ERROR),l["default"].sendSystemMessage({"sysMsgType":"failure","msg":"连接中断"})})},e.prototype.publishStreamMedia=function(){this.client.publish(this.localStream,function(e){console.log(e)})},e.prototype.checkSystemRequirements=function(){return this.rtc.checkSystemRequirements()},e.prototype.isCalling=function(){return this.status===h.RTC_ACCEPTED||this.status===h.RTC_SPONSOR},e.prototype.receiveStreamMedia=function(e){var t=this;this.init().then(function(){var n=e.converid,i=e.taskid,r=e.tasktype;return t.setConverid(n),t.setTaskid(i),t.checkSystemRequirements()?(s["default"].trace("RTCManage: 浏览器兼容性达到RTC要求",a.INFO),void t.renderView(h.RTC_ACCEPTING,r)):(s["default"].trace("RTCManage: 浏览器兼容性未达到RTC要求",a.ERROR),void t.refuseInvite())})},e.prototype.setConverid=function(e){this.converid=e},e.prototype.setTaskid=function(e){this.taskid=e},e.prototype.setType=function(e){this.type=e},e.prototype.setStatus=function(e){this.status=e},e.prototype.getRenderConfig=function(){return{"type":this.type,"status":this.status}},e.prototype.subscribeStreamMedia=function(){var e=this;this.client.on("stream-added",function(t){var n=t.stream;e.client.subscribe(n,function(e){s["default"].trace("RTCManage Agora stream subscribe failed "+e,a.ERROR)})}),this.client.on("stream-subscribed",function(t){e.remoteStream&&e.remoteStream.uid===t.stream.uid&&(document.getElementById("xnRtcMaxView").innerHTML=""),e.remoteStream=t.stream,s["default"].trace("RTCManage Agora Subscribe remote stream successfully",a.INFO),e.renderView(h.RTC_ACCEPTED),e.remoteStream.play("xnRtcMaxView")}),this.client.on("mute-video",function(e){s["default"].trace("evt.uid "+e.uid,a.INFO)}),this.client.on("unmute-video",function(e){s["default"].trace("evt.uid "+e.uid,a.INFO)})},e.prototype.renderView=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.status,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.type;this.setType(t),this.setStatus(e),l["default"].handleRTCView(this.getRenderConfig())},e.prototype.RTCViewOpen=function(){this.handleAcceptedView(),NT_UI.RTCShowMax()},e.prototype.setVolume=function(e){this.localStream.setAudioVolume(e),0===e&&this.localStream.disableAudio()},e.prototype.RTCTypeChange=function(){this.type===p.RTC_VIDEO?(this.localStream.disableVideo(),this.type=p.RTC_AUDIO):(this.localStream.enableVideo(),this.type=p.RTC_VIDEO),this.renderView()},e.prototype.RTCMicrophoneChange=function(e){e?this.localStream.disableAudio():this.localStream.enableAudio()},e.prototype.handleAcceptedView=function(){this.showAcceptedTime(),l["default"].handleRTCKfName()},e.prototype.showAcceptedTime=function(){var e=this;this.computeTime("rtc-acceptedview-call-callTime"),clearInterval(this.flag),this.flag=setInterval(function(){e.computeTime("rtc-acceptedview-call-callTime")},1e3)},e.prototype.computeTime=function(e){var t=this;this.hour=Math.floor(this.t/60/60),this.minute=Math.floor(this.t/60%60),this.second=Math.floor(this.t%60);var n=function(e,n,i){t.hour=e%10===e?"0"+e:e,t.minute=n%10===n?"0"+n:n,t.second=i%10===i?"0"+i:i};n(this.hour,this.minute,this.second),NT_UI.setCustomData(e,this.hour+":"+this.minute+":"+this.second),this.t=Number(this.t)+1},e.prototype.RTCViewClose=function(){var e=1e3*this.t;this.renderView(h.RTC_INIT),this.leaveRTCClient(),clearInterval(this.flag),this.clearTime(),d["default"].remoteLeaveStreamMedia({"converid":this.converid,"taskid":this.taskid,"time":e,"description":"挂断电话"})},e.prototype.clearTime=function(){this.t=0,this.hour=0,this.minute=0,this.second=0},e.prototype.renderViewMin=function(){var e=this;NT_UI.RTCShowMin(),this.computeTime("rtc-minview-call-callTime"),clearInterval(this.flag),this.flag=setInterval(function(){e.computeTime("rtc-minview-call-callTime")},1e3)},e.prototype.leaveRTCClient=function(){var e=this;this.client.leave(function(){e.localStream.stop(),e.localStream.close(),s["default"].trace("RTCManage: 用户离开RTC频道成功",a.INFO)},function(){s["default"].trace("RTCManage: 用户离开RTC频道失败",a.INFO)})},e.prototype.sponsorInvite=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"video";this.renderView(h.RTC_SPONSOR,e),d["default"].remoteStreamMedia({"converid":this.converid,"taskid":this.taskid,"tasktype":e,"starttime":new Date,"description":"访客发起音视频通话请求"})},e.prototype.acceptInvite=function(){this.initRTCClient()},e.prototype.refuseInvite=function(){this.renderView(h.RTC_INIT),d["default"].remoteCallBackStreamMedia({"converid":this.converid,"taskid":this.taskid,"operation":3,"description":"用户挂断电话"})},e.prototype.receiveCallBackStreamMedia=function(e){4===e.operation&&this.renderView(h.RTC_INIT)},e.prototype.notifyStopStreamMedia=function(){NT_UI.RTCToast("rtc-acceptedview-toastWrapper",2e3,this.RTCViewClose.call(this))},e}();t["default"]=g.prototype.getInstance(),e.exports=t["default"]}).call(t,n(112))},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function e(){n(this,e),this.requestidList={},this.templateidList={}}return e.prototype.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.setRequestid=function(e){this.requestidList[e]=1},e.prototype.setTemplateid=function(e){this.templateidList[e]=1},e.prototype.clear=function(e,t){this.requestidList[t]=0,this.templateidList[e]=0},e.prototype.isMyMessage=function(e){if(!e)return!1;var t=e.templateid,n="";return e.conversationInfo&&(t=e.conversationInfo.templateid,n=e.conversationInfo.requestid.split("_").slice(0,-1).join(""),this.requestidList[n]&&(e.conversationInfo.requestid=n,this.setTemplateid(t))),e.requestid&&(n=e.requestid.split("_").slice(0,-1).join(""),e.requestid=n,this.setTemplateid(t)),!t&&e.converid&&(t=e.converid.split("_").slice(0,-1).join("_")),1===this.templateidList[t]||1===this.requestidList[n]},e}();t["default"]=i.prototype.getInstance(),e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=n(131),a=i(o),s=n(169),u=i(s),c=n(113),l={"carry":!1},f=function(){function e(){r(this,e),this.config=Object.assign({},l),this.carry_tid="",this.isCarry=!0}return e.prototype.init=function(){this.carry=this.config.carry,this.isCarry&&!c.Terminal.mobile&&window.addEventListener&&window.addEventListener("unload",this.bindEvent.bind(this))},e.prototype.changeCarry=function(e,t,n){this.carry=e,this.carryconverid=t,this.carrytemplateid=n},e.prototype.bindEvent=function(){var e=this.createSeed();u["default"].set(s.CARRY_CHAT_INFO,e),u["default"].commit()},e.prototype.createSeed=function(){var e=a["default"].get("templateid"),t=this.carry,n=this.carryconverid;return{"templateid":e,"carryconverid":n,"carry":t}},e.prototype.getInstance=function(t){return this.instance||(this.instance=new e(t)),this.instance},e}();t["default"]=f.prototype.getInstance(),e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,t.FINAL_PAGE_ID=t.CARRY_CHAT_INFO=t.OUTCHAT_PAGE=t.COMMON_CONFIG=t.PRODUCT_INFO=t.SERVER_ADDR=t.SERVER_EXPIRETIME=void 0;var o=n(126),a=i(o),s="NTALL",u="SERVER_EXPIRETIME",c="SERVER_ADDR",l="PRODUCT_INFO",f="COMMON_CONFIG",d="OUTCHAT_PAGE",p="CARRY_CHAT_INFO",h="FINAL_PAGE_ID",g=void 0;try{g=window.localStorage,g.getItem("test")}catch(m){a["default"].trace("请注意本地存储被禁用",o.Error),g={"getItem":function(){return null}}}var v=function(){function e(){r(this,e)}return e.prototype.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.init=function(){var e=g.getItem(s);e=e?JSON.parse(e):{},this.useLocalStorage=!0,this.ntCacheData=e},e.prototype.set=function(e,t){t&&(this.ntCacheData[e]=t)},e.prototype.get=function(e){return this.ntCacheData[e]},e.prototype.remove=function(e){this.ntCacheData[e]=null},e.prototype.commit=function(){try{g.setItem(s,JSON.stringify(this.ntCacheData))}catch(e){this.useLocalStorage=!1}},e}();t.SERVER_EXPIRETIME=u,t.SERVER_ADDR=c,t.PRODUCT_INFO=l,t.COMMON_CONFIG=f,t.OUTCHAT_PAGE=d,t.CARRY_CHAT_INFO=p,t.FINAL_PAGE_ID=h,t["default"]=v.prototype.getInstance()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,t["default"]=void 0;var o=n(126),a=i(o),s=function(){function e(t){r(this,e),this.leaveMessage=t,this._viewData={},this.setViewData()}return e.prototype.updateData=function(e){this.leaveMessage=e,this._viewData={},this.setViewData()},e.prototype.setViewData=function(){this._viewData=this.leaveMessage,2!==this.leaveMessage.plan&&this._viewData.params.forEach(function(e){e.placeholder=e.value,e.value=""})},e.prototype.getViewData=function(){return this._viewData},e.prototype.updateViewData=function(e){var t=this;e&&Object.keys(e,function(n){switch(n){case"name":t._viewData.params[0].value=e.name;break;case"phone":t._viewData.params[1].value=e.phone;break;case"email":t._viewData.params[2].value=e.email;break;case"content":t._viewData.params[3].value=e.content;break;default:a["default"].trace("未知的submitkey: "+n,o.INFO)}})},e}();t["default"]=s,e.exports=t["default"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function e(){n(this,e),this.timeout=3e5,this.timer={},this.cb={}}return e.prototype.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.start=function(e,t){var n=this;this.timer[e]||(this.cb[e]=t,this.timer[e]=setTimeout(function(){"function"==typeof n.cb[e]&&n.cb[e](e)},this.timeout))},e.prototype.refresh=function(e){var t=this;this.timer[e]&&(clearTimeout(this.timer[e]),this.timer[e]=setTimeout(function(){"function"==typeof t.cb[e]&&t.cb[e](e)},this.timeout))},e.prototype.clear=function(e){clearTimeout(this.timer[e]),this.timer[e]=0,this.cb[e]=function(){}},e}();t["default"]=i.prototype.getInstance(),e.exports=t["default"]},function(e,t){"use strict";function n(e,t,n){var i="POST";if(!e)return!1;var r=new XMLHttpRequest;return!!r&&(r.addEventListener("progress",function(e){n({"status":"uploading","event":e})},!1),r.addEventListener("load",function(e){var t=JSON.parse(r.responseText);if(t.success){var i=t.data;i.fileName?n({"status":"success","key":i.key,"url":i.url}):i.thumbnailImage&&i.srcFile?n({"status":"success","key":i.srcFile.key,"url":i.thumbnailImage.url,"sourceurl":i.srcFile.url}):i.srcFileProperties&&n({"status":"success","key":i.srcFileProperties.key,"url":i.srcFileProperties.url,"sourceurl":i.srcFileProperties.url,"staticurl":i.screenshotProperties.url})}},!1),r.addEventListener("error",function(t){n({"status":"error","event":t,"url":e})},!1),r.addEventListener("abort",function(t){n({"status":"cancel","event":t,"url":e})},!1),r.open(i,e,!0),void r.send(t))}function i(e){e.value=""}t.__esModule=!0,t.uploadFile=n,t.clearFile=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=g["default"].get("xn_sid_"+s["default"].get("siteid")),t=0;if(e){var n=Math.round(((0,S.getTime)()-+e.toString().substr(0,13))/36e5);n>=4&&(e="")}return e||(e=(0,S.getTime)(2),s["default"].get("login")&&(t=1),g["default"].set("xn_sid_"+s["default"].get("siteid"),e)),[e,t]}t.__esModule=!0;var a=n(131),s=i(a),u=n(130),c=i(u),l=n(151),f=i(l),d=n(149),p=i(d),h=n(138),g=i(h),m=n(139),v=i(m),y=n(113),b=n(174),T=n(126),w=i(T),S=n(137),M={"ALL":0,"CHAT":1,"CLOSE":2},E=function(){function e(){r(this,e),this.enable=1,this.eventLevel=M.CHAT,this.eventTypes=["click"],this.customRules=[],this.type={"other":["siteid","sid","uname","ulevel","oname","log"],"body":["nt","login","qq","wechat","cookie","phone","email","imei"],"navigation":{"Web":["url","ttl","lev","pgid"],"LBS":["lng","lat","country","provice","city"],"Terminal":["an","fl","dv","tml","lang","scs"],"Product":["prid","pn","mp","sp","iu","ca","br"],"Order":["oi","op"],"IP":["ip"],"Source":["ref"]}}}return e.prototype.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.init=function(){var e=this;if(!c["default"].get("TrailEnable"))return void w["default"].trace("TrailCollect disable",T.INFO);this.eventLevel=c["default"].get("TrailEventLevel"),w["default"].trace("TrailCollector: 轨迹采集开始初始化",T.INFO),this.instance.collectData={},this.initCollectData(),this.registerEventListener();var t=s["default"].getTrailCollectorInfo(),n=Object.keys(t);n.forEach(function(n){e.set(n,t[n])}),this.set("nt",f["default"].getNTID()),this.set("uname",p["default"].get("username")),this.set("sid",o()[0]),this.set("log",o()[1]),this.instance.collectData.navigation&&this.instance.collectData.navigation.Product&&(this.instance.collectData.navigation.Product=[this.instance.collectData.navigation.Product]),this.instance.collectData.navigation&&this.instance.collectData.navigation.Order&&(this.instance.collectData.navigation.Order=[this.instance.collectData.navigation.Order]),this.TrailCollectorUrl=c["default"].get("TrailCollectorUrl"),this.ProductUrl=c["default"].get("ProductUrl"),this.commit(JSON.stringify(this.instance.collectData))},e.prototype.initCollectData=function(){this.set("url",document.location.href),this.set("ttl",document.title),this.set("pgid",""+(0,S.hashCode)(document.location.href+document.title)),this.set("fl",y.Terminal.flashVersion),this.set("dv",y.Terminal.device),this.set("tml",y.Terminal.terminal),this.set("lang",y.Terminal.language),this.set("scs",y.Terminal.screensize),this.set("ref",document.referrer)},e.prototype.registerEventListener=function(){switch(this.eventLevel){case M.ALL:this.registerCustomerEventListener(),this.registerDocumentEventListener();break;case M.CHAT:this.registerCustomerEventListener();break;case M.CLOSE:w["default"].trace("TrailCollector: 轨迹用户行为事件采集器关闭",T.INFO)}},e.prototype.registerDocumentEventListener=function(){var e=this;this.eventTypes.forEach(function(t){(0,b.addEvent)(document,t,e[t+"EventListener"].bind(e))})},e.prototype.registerCustomerEventListener=function(){var e=this;this.customRules.forEach(function(t){var n=document.querySelector(t.selector);t.eventTypes.forEach(function(i){(0,b.addEvent)(n,i,e[i+"CustomEventListener"].bind(e,t.attrs)),n.setAttribute("nt-customer-event",1)})})},e.prototype.clickEventListener=function(){if(1!==event.target.getAttribute("nt-customer-event")){var e=event.target;if(0===e.childNodes.length||1===e.childNodes.length&&3===e.childNodes[0].nodeType){var t=this.collectData.navigation.Web.pgid,n=document.location.hash,i=(0,S.cssPath)(e),r=i.ep,o=i.ei,a=""+(0,S.hashCode)(t+n+r+o),s=(0,S.nodeMessage)(e);if(!s)return;var u="click";this.commit(this.generateEventData({"eid":a,"pgid":t,"eh":n,"ep":r,"ei":o,"ev":s,"et":u}))}}},e.prototype.clickCustomEventListener=function(e,t){var n=event.target,i={"node_id":(0,S.cssPath)(n),"node_name":n.innerHTML,"event_source":document.location.href,"event_tab":document.title,"custom_event":{}};e.forEach(function(e){i.custom_event[e]=t.target.getAttribute(e)}),w["default"].trace(i,T.INFO),this.commit(this.generateEventData(i))},e.prototype.set=function(e,t){var n=this,i=[],r=function o(r){Object.keys(r).forEach(function(a){if(["other","body","navigation","Web","LBS","Terminal","Event","Product","Order","IP","Source"].indexOf(a)!==-1)if(Array.isArray(r[a])&&r[a].indexOf(e)>-1){var s=n.instance.collectData;i.push(a);for(var u=0,c=i.length;u<c;u+=1){var l=i[u];s[l]||(s[l]={}),s=s[l]}s[e]=t}else Array.isArray(r[a])||(i.push(a),o(r[a]))})};r(this.type)},e.prototype.getProductInfo=function(e){s["default"].get("prid")&&(0,v["default"])(this.ProductUrl+s["default"].get("prid"),{"headers":{"token":c["default"].get("NTSkyEyeToken")}}).then(function(t){t.err?w["default"].trace("getProductInfo err"+t.err,T.ERROR):t.params&&e(t.params)})},e.prototype.commit=function(e){w["default"].trace("TrailCollector: 开始上报轨迹",T.INFO),(0,v["default"])(this.TrailCollectorUrl,{"method":"POST","headers":{"token":c["default"].get("NTSkyEyeToken")},"body":e},5e3,!1).then(function(e){e.err?w["default"].trace("TrailCollector: 上报轨迹超时，将对轨迹浏览及报表计算产生影响，请及时处理! ",T.ERROR):w["default"].trace("TrailCollector: 上报轨迹成功",T.INFO)})},e.prototype.generateEventData=function(e){return JSON.stringify({"other":{"siteid":"kf_3004","sid":o()[0],"log":o()[1]},"body":{"nt":this.get("nt")},"navigation":{"Event":e}})},e}();t["default"]=E.prototype.getInstance(),e.exports=t["default"]},function(e,t){"use strict";function n(e,t,n){e&&(e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!0):e["on"+t]=n)}t.__esModule=!0,t.addEvent=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,t.PAGE_STATUS=void 0;var o=n(144),a=i(o),s=n(113),u=n(174),c=n(169),l=i(c),f=t.PAGE_STATUS={"BLUR":0,"FOCUS":1},d=function(){function e(){r(this,e),this.instance=null,this.status=f.FOCUS,this.id=a["default"].v4()}return e.prototype.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.init=function(){s.Terminal.ie8||s.Terminal.ie9?this.judgeCurrentPage():this.modernJudgeCurrentPage()},e.prototype.judgeCurrentPage=function(){var e=this;(0,u.addEvent)(window,"focus",function(){e.status=f.FOCUS}),(0,u.addEvent)(window,"blur",function(){e.status=f.BLUR})},e.prototype.modernJudgeCurrentPage=function(){var e=this,t=this,n=void 0,i=void 0;"undefined"!=typeof document.hidden?(n="hidden",i="visibilitychange"):"undefined"!=typeof document.msHidden?(n="msHidden",i="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(n="webkitHidden",i="webkitvisibilitychange");var r=function(){document[n]?t.status=f.BLUR:(t.status=f.FOCUS,l["default"].set(c.FINAL_PAGE_ID,t.id)),l["default"].commit()};(0,u.addEvent)(document,i,r),setInterval(function(){l["default"].get(c.FINAL_PAGE_ID)!==e.id?document[n]?e.status=f.BLUR:(t.status=f.FOCUS,l["default"].set(c.FINAL_PAGE_ID,t.id),l["default"].commit()):e.status=f.FOCUS},1e3)},e}();t["default"]=d.prototype.getInstance()},function(e,t,n){(function(e){"use strict";e.resource={"defaultVisitorLogo":e.resourcePath+"default_visitor.png","defaultDestLogo":e.resourcePath+"default_kefu.png","defaultMultDestLogo":e.resourcePath+"default_kefu_2.png","leftVoicePlay":e.resourcePath+"kf_sound.gif","leftVoiceStop":e.resourcePath+"kf_sound.png","rightVoicePlay":e.resourcePath+"my_sound.gif","rightVoiceStop":e.resourcePath+"my_sound.png","videoPlay":e.resourcePath+"play.png","sending":e.resourcePath+"sending.gif","failure":e.resourcePath+"failure.png","success":e.resourcePath+"success.png","warn":e.resourcePath+"warn.png","fileBaseURI":e.sourceURI+"images/filetype/","leavemessageSuccess":e.resourcePath+"leavemessage_success.png","closeLeavemessage":e.resourcePath+"leavemessage_close.png","fileDownloadIcon":e.resourcePath+"file_download_icon.png","arrowLeft":e.resourcePath+"arrow_left.png","arrowRight":e.resourcePath+"arrow_right.png","mobileLeaveMessage":{"back":e.resourcePath+"back.png","email":e.resourcePath+"email.png","name":e.resourcePath+"name.png","phone":e.resourcePath+"phone.png","plus":e.resourcePath+"plus.png","plusDeep":e.resourcePath+"plus_deep.png","plusShallow":e.resourcePath+"plus_shallow.png"},"bubble":e.resourcePath+"min_bubble.png","triangle":e.resourcePath+"min_triangle.png","loadingMessage":e.resourcePath+"loading_message.gif","loadingImageMessage":e.resourcePath+"loadin_image_message.png","rightBubbles":e.resourcePath+"right_bubbles.png"},e.fileRule={"doc":{"icon":"word","reg":/docx?$/},"excel":{"icon":"excle","reg":/xlsx?$/},"ppt":{"icon":"ppt","reg":/pptx?$/},"pdf":{"icon":"pdf","reg":/pdf?$/},"jpg":{"icon":"jpg","reg":/(jpg|jpeg)$/},"png":{"icon":"png","reg":/png$/},"txt":{"icon":"txt","reg":/txt?$/},"rar":{"icon":"zip","reg":/rar$/},"zip":{"icon":"zip","reg":/zip$/},"other":{"icon":"other","reg":/\w+/}},e.emojiReg=/\[OK\]|\[爱心\]|\[拜托\]|\[棒棒的\]|\[呲牙\]|\[大哭\]|\[发呆\]|\[发呆\]|\[发怒\]|\[飞吻\]|\[尴尬\]|\[惊恐\]|\[惊讶\]|\[开心\]|\[苦恼\]|\[酷酷的\]|\[困\]|\[冷汗\]|\[流汗\]|\[满意\]|\[迷恋\]|\[勉强\]|\[喵惊讶\]|\[喵开心\]|\[喵哭\]|\[喵苦笑\]|\[喵色\]|\[哦\]|\[伤心\]|\[挑逗\]|\[调皮\]|\[调皮\]|\[笑哭\]|\[笑脸\]|\[斜眼\]|\[祝贺\]/gi,e.emojiRule={"1f197":"OK","1f49b":"爱心","1f64f":"拜托","1f44d":"棒棒的","1f601":"呲牙","1f62d":"大哭","1f610":"发呆","1f621":"发怒","1f618":"飞吻","1f62c":"尴尬","1f616":"惊恐","1f631":"惊讶","1f606":"开心","1f629":"苦恼","1f60e":"酷酷的","1f611":"困","1f613":"冷汗","1f605":"流汗","1f60c":"满意","1f60d":"迷恋","1f623":"勉强","1f640":"喵惊讶","1f63a":"喵开心","1f63f":"喵哭","1f639":"喵苦笑","1f63b":"喵色","1f60f":"哦","1f622":"伤心","1f609":"挑逗","1f61d":"调皮","1f602":"笑哭","1f60a":"笑脸","1f612":"斜眼","3297":"祝贺","OK":"1f197","爱心":"1f49b","拜托":"1f64f","棒棒的":"1f44d","呲牙":"1f601","大哭":"1f62d","发呆":"1f610","发怒":"1f621","飞吻":"1f618","尴尬":"1f62c","惊恐":"1f616","惊讶":"1f631","开心":"1f606","苦恼":"1f629","酷酷的":"1f60e","困":"1f611","冷汗":"1f613","流汗":"1f605","满意":"1f60c","迷恋":"1f60d","勉强":"1f623","喵惊讶":"1f640","喵开心":"1f63a","喵哭":"1f63f","喵苦笑":"1f639","喵色":"1f63b","哦":"1f60f","伤心":"1f622","挑逗":"1f609","调皮":"1f61d","笑哭":"1f602","笑脸":"1f60a","斜眼":"1f612","祝贺":"3297"}}).call(t,n(112))},function(e,t,n){"use strict";t.__esModule=!0,t["default"]=function(e){var t=e.toLowerCase().replace("_","-");"zh-cn"!==t&&"en-us"!==t&&"ja-jp"!==t&&(t="zh-cn"),window.NT_LANG_TYPE=t,window.NT_LANG=n(178)("./"+t+".js"),window.NT_UI&&window.NT_UI.updateLanguage&&window.NT_UI.updateLanguage()},e.exports=t["default"]},function(e,t,n){function i(e){return n(r(e))}function r(e){return o[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var o={"./en-us.js":179,"./index.js":177,"./ja-jp.js":180,"./zh-cn.js":181};i.keys=function(){return Object.keys(o)},i.resolve=r,e.exports=i,i.id=178},function(e,t){"use strict";t.__esModule=!0,t["default"]={"pictureMessage":"Picture message","audioMessage":"The audio message","fileMessage":"File message","videoMessage":"Video message","systemMessage":"System message","FAQ":"FAQ","visitor":"visitor","waitMessage":"Hello, standing in line...","autoDisconnectMessage":"You have been silent for too long. You have been disconnected automatically","robotSwitchArtiFailMessage":"Manual customer service is not available now, you can {$chatwithrobot}","robotSwitchArtiFailMessage2":"Or {$leaveMessage}","robotSwitchArtiFailMessage3":"leave a message","robotSwitchArtiFailMessage4":"continue chatting with the robot","multiSession":"Multiplayer session","serverConnectFailMessage":"Service connection failed, please try again later","offlineCustomeServiceMessage":"Customer service is offline","pasteMultiPictureSystemMessage":"Dear, temporarily only support to paste a picture, to your inconvenience, please understand!","leaveMessageSuccessToast":"Thanks for your support. We will contact you as soon as possible",
"leaveMessageFailureToast":"Message failed","uploadFileTypeErrorMessage":"File upload failed, type error","uploadImageTypeErrorMessage":"Image upload failed, type error","uploadMaxSizeErrorMessage":"Upload size exceeded limit (20M)","waitToast":"Please wait patiently in line","phoneNumberFormatError":"Wrong phone number format","phoneNumberNullError":"Please fill in your mobile phone number","phoneNumberSizeError":"The phone number length should not exceed 11 digits","nameNullError":"Please fill in your name","nameSizeError":"Name length should not exceed 5 digits","emailFormatError":"Email format error","emailNullError":"Please fill in the email","emailSizeError":"The length of the mailbox should not exceed 25 digits","leaveMessageNullError":"Please fill in the message","leaveMessageSizeError":"Message length cannot exceed 100 digits","download":"download","lookUpHistoryMessage":"See more messages","more":"more","chatInputPlaceholder":"I want to say...","send":"send","close":"close","evaluateInputPlaceholder":"Thoughts of the moment","submit":"submit","loadingToast":"loading","unreadMessageToast":"You have","unreadMessageToast2":"unread messages"},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]={"pictureMessage":"写真メッセージ","audioMessage":"音声メッセージ","fileMessage":"ファイルニュース。","videoMessage":"ビデオメッセージ","systemMessage":"システムニュース","FAQ":"よくある問題","visitor":"客","waitMessage":"こんにちは、列に并んでいます……","autoDisconnectMessage":"あなたはすでに長い間話していないので、自動的に接続を切断しています。","robotSwitchArtiFailMessage":"人工客服はしばらくオンラインではありませんが,あなたは{$chatwithrobot}","robotSwitchArtiFailMessage2":"あるいは {$leaveMessage}","robotSwitchArtiFailMessage3":"メッセージを残す","robotSwitchArtiFailMessage4":"ロボットとチャットを続ける","multiSession":"多数の会話","serverConnectFailMessage":"サービス接続が失敗したので、後ほど再試してください。","offlineCustomeServiceMessage":"客服は既に離れ離れになっている。","pasteMultiPictureSystemMessage":"実际には、一枚だけの写真を贴り、ご迷惑をお持ちいたしますので、ご了承ください。！","leaveMessageSuccessToast":"メッセージは成功します。ご支援に感謝します。私たちは近いうちにあなたに連絡します。","leaveMessageFailureToast":"書き残しに失敗する","uploadFileTypeErrorMessage":"ファイル投稿は失败、タイプミス。","uploadImageTypeErrorMessage":"写真投稿は失败し、タイプのミス。","uploadMaxSizeErrorMessage":"アップグレード(20M)を超える","waitToast":"行列の中には、我慢して待ってください。","phoneNumberFormatError":"番号が間違っています。","phoneNumberNullError":"携帯番号を記入してください。","phoneNumberSizeError":"携帯電話の番号は11位を超えない。","nameNullError":"氏名を記入してください","nameSizeError":"名前の長さは5ビットを超えない。","emailFormatError":"メール・フォーマットエラー","emailNullError":"メールを記入してください","emailSizeError":"メールの長さは25位を超えてはならない。","leaveMessageNullError":"コメントを書いてください","leaveMessageSizeError":"書き込みの長さは100を超えない。","download":"ダウンロード","lookUpHistoryMessage":"より多くのニュースを調べる","more":"より","chatInputPlaceholder":"言いたい……","send":"送信","close":"閉鎖","evaluateInputPlaceholder":"今の考え","submit":"提出","loadingToast":"ロードマップ中……","unreadMessageToast":"あなたは","unreadMessageToast2":"本の未確認のメッセージを持っています。"},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]={"pictureMessage":"图片消息","audioMessage":"音频消息","fileMessage":"文件消息","videoMessage":"视频消息","systemMessage":"系统消息","FAQ":"常见问题","visitor":"游客","waitMessage":"您好，正在排队…","autoDisconnectMessage":"您已经太久不说话了，已为您自动断开连接","robotSwitchArtiFailMessage":"人工客服暂不在线，您可以{$chatwithrobot}","robotSwitchArtiFailMessage2":"或者 {$leaveMessage}","robotSwitchArtiFailMessage3":"留言","robotSwitchArtiFailMessage4":"继续与机器人聊天","multiSession":"多人会话","serverConnectFailMessage":"服务连接失败，请稍后重试","offlineCustomeServiceMessage":"客服已离线","pasteMultiPictureSystemMessage":"亲，暂仅支持粘贴一张图片，给您带来的不便，请您谅解！","leaveMessageSuccessToast":"留言提交成功，感谢您的支持，我们会尽快与你联系","leaveMessageFailureToast":"留言失败","uploadFileTypeErrorMessage":"文件上传失败，类型错误","uploadImageTypeErrorMessage":"图片上传失败，类型错误","uploadMaxSizeErrorMessage":"上传大小超出限制（20M）","waitToast":"排队中，请耐心等待","phoneNumberFormatError":"手机号码格式错误","phoneNumberNullError":"请填写手机号码","phoneNumberSizeError":"手机号码长度不超过11位","nameNullError":"请填写姓名","nameSizeError":"姓名长度不能超过5位","emailFormatError":"邮箱格式错误","emailNullError":"请填写邮箱","emailSizeError":"邮箱长度不能超过25位","leaveMessageNullError":"请填写留言","leaveMessageSizeError":"留言长度不能超过100位","download":"下载","lookUpHistoryMessage":"查看更多消息","more":"更多","chatInputPlaceholder":"我想说…","send":"发送","close":"关闭","evaluateInputPlaceholder":"此刻的想法","submit":"提交","loadingToast":"正在努力加载中......","unreadMessageToast":"您有","unreadMessageToast2":"条未读消息"},e.exports=t["default"]},function(e,t,n){function i(e){return n(r(e))}function r(e){return o[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var o={"./kf_3004.js":183,"./kf_9015.js":184,"./kf_9051.js":185};i.keys=function(){return Object.keys(o)},i.resolve=r,e.exports=i,i.id=182},function(e,t){"use strict";if(window.NTKF_PARAM&&window.NTKF_PARAM.erpparam){var n=window.NTKF_PARAM.erpparam;xn("setCustomerInfo",{"exterinfo":{"p_status":n}})}},function(e,t,n){(function(e){"use strict";if(window.NTKF_PARAM&&window.NTKF_PARAM.erpparam){var t=window.NTKF_PARAM.erpparam;xn("setCustomerInfo",{"exterinfo":{"p_status":t}})}e.initLevel=1}).call(t,n(112))},function(e,t,n){(function(e){"use strict";if(window.NTKF_PARAM&&window.NTKF_PARAM.erpparam){var t=window.NTKF_PARAM.erpparam;xn("setCustomerInfo",{"exterinfo":{"p_status":t}})}e.initLevel=1}).call(t,n(112))}]);
//# sourceMappingURL=bundle.min.js.map